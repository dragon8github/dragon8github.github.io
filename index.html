<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>cy&#39;lee è´å°”å¡”çŒ«</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="è´å°”å¡”çŒ«,å‰ç«¯,web,Vue,React">
<meta name="keywords" content="è´å°”å¡”çŒ«,å‰ç«¯,web,Vue,React">
<meta property="og:type" content="website">
<meta property="og:title" content="cy&#39;lee è´å°”å¡”çŒ«">
<meta property="og:url" content="http://cylee.top/index.html">
<meta property="og:site_name" content="cy&#39;lee è´å°”å¡”çŒ«">
<meta property="og:description" content="è´å°”å¡”çŒ«,å‰ç«¯,web,Vue,React">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cy&#39;lee è´å°”å¡”çŒ«">
<meta name="twitter:description" content="è´å°”å¡”çŒ«,å‰ç«¯,web,Vue,React">
  
    <link rel="alternate" href="/atom.xml" title="cy&#39;lee è´å°”å¡”çŒ«" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">cy&#39;lee è´å°”å¡”çŒ«</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">å‰ç«¯å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-search-btn" class="nav-icon"></a>
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-npmpublish" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/20/npmpublish/" class="article-date">
  <time datetime="2019-03-20T02:48:27.000Z" itemprop="datePublished">2019-03-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/npm/">npm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/20/npmpublish/">npm å‘å¸ƒåŒ…å’Œåˆ é™¤åŒ…ï¼ˆ2019æœ€æ–°æ”»ç•¥ï¼‰</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<blockquote>
<p>ğŸ“– é˜…è¯»æœ¬æ–‡å¤§æ¦‚éœ€è¦ 6 åˆ†é’Ÿã€‚</p>
</blockquote>
<h3 id="æ“ä½œæ¦‚è§ˆ"><a href="#æ“ä½œæ¦‚è§ˆ" class="headerlink" title="æ“ä½œæ¦‚è§ˆ"></a>æ“ä½œæ¦‚è§ˆ</h3><ol>
<li>éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤ã€‚</li>
<li>npm å®˜ç½‘æ³¨å†Œè´¦å·ï¼ˆç•¥ï¼‰ã€‚</li>
<li>npm init åˆå§‹åŒ–ä½ çš„åŒ…ã€‚</li>
<li>å‘å¸ƒ npm publishã€‚</li>
<li>å¦‚ä½•å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Ÿ</li>
<li>å¦‚ä½•åˆ é™¤ä½ çš„å‘å¸ƒåŒ…ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯ 2FAï¼Ÿä»€ä¹ˆæ˜¯ Authenticator Appï¼Ÿä»€ä¹ˆæ˜¯ One-time Passwordï¼Ÿ</li>
<li>ï¼ˆåè®°ï¼‰è¡¥å……è¯´æ˜</li>
</ol>
<h4 id="ä¸€ã€éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤"><a href="#ä¸€ã€éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤" class="headerlink" title="ä¸€ã€éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤"></a>ä¸€ã€éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤</h4><p>1ã€ç›´æ¥ä¸Š <a href="https://www.npmjs.com/" target="_blank" rel="noopener">npmjs.com</a> å®˜ç½‘æœç´¢</p>
<p><img src="http://wx1.sinaimg.cn/large/006ar8zggy1g18zx67djmj30ry075756.jpg" alt=""></p>
<p>2ã€ä¹Ÿå¯ä»¥ç”¨ä¸€äº›å·¥å…·åº“æŸ¥æ‰¾ï¼Œè™½ç„¶æœ‰ç‚¹ç”»è›‡æ·»è¶³ï¼Œä½†æŸäº›åœºæ™¯è¿˜æ˜¯é€‚ç”¨çš„ã€‚æ¯”å¦‚åŠ¨æ€å‘å¸ƒåŒ…ã€‚</p>
<ul>
<li><a href="https://github.com/sindresorhus/npm-name-cli" target="_blank" rel="noopener">npm-name-cli</a></li>
</ul>
<p><img src="https://github.com/sindresorhus/npm-name-cli/raw/master/screenshot.gif" alt=""></p>
<hr>
<blockquote>
<p>äºŒã€<a href="https://www.npmjs.com/login" target="_blank" rel="noopener">npm å®˜ç½‘</a>æ³¨å†Œè´¦å·ï¼ˆç•¥ï¼‰</p>
</blockquote>
<hr>
<h4 id="ä¸‰ã€npm-init-åˆå§‹åŒ–ä½ çš„åŒ…ã€‚"><a href="#ä¸‰ã€npm-init-åˆå§‹åŒ–ä½ çš„åŒ…ã€‚" class="headerlink" title="ä¸‰ã€npm init åˆå§‹åŒ–ä½ çš„åŒ…ã€‚"></a>ä¸‰ã€npm init åˆå§‹åŒ–ä½ çš„åŒ…ã€‚</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init -y</span><br></pre></td></tr></table></figure>
<h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><p>é‡ç‚¹å…³æ³¨å’Œä¿®æ”¹ä»¥ä¸‹ä¸‰é¡¹ï¼š</p>
<ul>
<li>nameï¼šä½ çš„åŒ…å</li>
<li>versionï¼šï¼ˆæ¨èï¼‰ç”¨ jQuery çš„ç‰ˆæœ¬è§„èŒƒï¼š<strong>0.0.1</strong></li>
<li>mainï¼šä½ çš„å…¥å£æ–‡ä»¶</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"chuanghui-vue-portal"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.1"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"src/components/chuanghui-portal.vue"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"ChuangHui Vue Components"</span>,</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"lizhaohong &lt;928532756@qq.com&gt;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å››ã€å‘å¸ƒ-npm-publish"><a href="#å››ã€å‘å¸ƒ-npm-publish" class="headerlink" title="å››ã€å‘å¸ƒ npm publish"></a>å››ã€å‘å¸ƒ npm publish</h4><p>å…ˆæ·»åŠ  npm è´¦å·<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ npm adduser </span><br><span class="line">Username: ...</span><br><span class="line">Password: ...</span><br><span class="line">Email: (this IS public) 928532756@qq.com</span><br><span class="line">Logged <span class="keyword">in</span> as cylee on https://registry.npmjs.org/.</span><br></pre></td></tr></table></figure></p>
<p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g19101gkfzj30g003m0sr.jpg" alt=""></p>
<p>æ­£å¼å‘å¸ƒï¼Œå°±ä¸€å¥è¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm publish</span><br></pre></td></tr></table></figure>
<p>æ­£å¸¸çš„è¯ï¼Œåœ¨ npm ä¸ªäºº package é¡µé¢ä¸­å¯ä»¥çœ‹åˆ°ä¸Šä¼ çš„åŒ…ï¼š</p>
<p><img src="http://wx1.sinaimg.cn/large/006ar8zggy1g1911ff0s4j31h20fdwgp.jpg" alt=""></p>
<h4 id="äº”ã€è¿­ä»£æ–°ç‰ˆæœ¬"><a href="#äº”ã€è¿­ä»£æ–°ç‰ˆæœ¬" class="headerlink" title="äº”ã€è¿­ä»£æ–°ç‰ˆæœ¬"></a>äº”ã€è¿­ä»£æ–°ç‰ˆæœ¬</h4><p>åªéœ€è¦æŠŠä½  <code>package.json</code> çš„ <code>version</code> ç‰ˆæœ¬å·æ”¹å˜ï¼Œå¦‚ <strong>0.0.1 -&gt; 0.0.2</strong>ï¼Œå†æ‰§è¡Œ <code>$ npm publish</code> å³å¯ã€‚</p>
<hr>
<h4 id="å…­ã€åˆ é™¤å‘å¸ƒåŒ…"><a href="#å…­ã€åˆ é™¤å‘å¸ƒåŒ…" class="headerlink" title="å…­ã€åˆ é™¤å‘å¸ƒåŒ…"></a>å…­ã€åˆ é™¤å‘å¸ƒåŒ…</h4><blockquote>
<p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æœ‰å¼ºè¿«ç—‡ï¼Œä»…ä»…æ˜¯ä¿®å¤ä¸€ä¸ª bug å°±è¦æŠŠç‰ˆæœ¬å·ä» 0.0.1 å‡çº§åˆ° 0.02ã€‚</p>
<p>å¿ƒé‡Œè‚¯å®šå¾ˆçº ç»“ï¼Œæ›´å¤šçš„å¯èƒ½æ˜¯é€‰æ‹©åˆ æ‰åŒ…é‡æ–°ä¸Šä¼ ã€‚</p>
</blockquote>
<p>ç½‘ä¸Šä»‹ç»åˆ é™¤å‘å¸ƒåŒ…çš„æ–¹æ³•å€’ä¹Ÿç®€å•ã€‚æ‰§è¡Œä»¥ä¸‹å³å¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm unpublish --force</span><br></pre></td></tr></table></figure>
<p>ä½†ä½ å¯èƒ½å‡ºç° <code>ERRï¼š2FA</code> ä¹‹ç±»çš„é”™è¯¯ä¿¡æ¯ï¼Ÿé‚£ä½ å¯èƒ½è¦å…ˆè¿›è¡Œä¸€å¤§å †è®¾ç½®äº†ï¼Œçœ‹ä¸‹å»å§ã€‚</p>
<h4 id="ä¸ƒã€ä»€ä¹ˆæ˜¯-2FAï¼Ÿä»€ä¹ˆæ˜¯-Authenticator-Appï¼Ÿä»€ä¹ˆæ˜¯-One-time-Passwordï¼Ÿ"><a href="#ä¸ƒã€ä»€ä¹ˆæ˜¯-2FAï¼Ÿä»€ä¹ˆæ˜¯-Authenticator-Appï¼Ÿä»€ä¹ˆæ˜¯-One-time-Passwordï¼Ÿ" class="headerlink" title="ä¸ƒã€ä»€ä¹ˆæ˜¯ 2FAï¼Ÿä»€ä¹ˆæ˜¯ Authenticator Appï¼Ÿä»€ä¹ˆæ˜¯ One-time Passwordï¼Ÿ"></a>ä¸ƒã€ä»€ä¹ˆæ˜¯ 2FAï¼Ÿä»€ä¹ˆæ˜¯ Authenticator Appï¼Ÿä»€ä¹ˆæ˜¯ One-time Passwordï¼Ÿ</h4><p>ç®€å•æ¦‚æ‹¬ï¼š</p>
<ul>
<li><strong>2FA</strong>ï¼š NPM å‘å¸ƒåŒ…ç®¡ç†çš„æƒé™è®¾ç½®ï¼Œå¯ä»¥åœ¨ NPM åå°é…ç½®ï¼›</li>
<li><strong>Authenticator App</strong>ï¼šæ˜¯å¾®è½¯ Microsoft å‡ºå“çš„ä¸€æ¬¾å®æ—¶å¯†ç Appï¼Œè¯·è‡ªè¡Œåˆ°Appå•†åº—æœç´¢ä¸‹è½½ï¼›</li>
<li><strong>One-time Password</strong>ï¼šAuthenticator App è¾“å‡ºçš„å®æ—¶å¯†ç ã€‚</li>
</ul>
<p>å…·ä½“è®¾ç½®æ­¥éª¤ï¼š<a href="https://docs.npmjs.com/configuring-two-factor-authentication" target="_blank" rel="noopener">å®˜æ–¹æ•™ç¨‹</a></p>
<p>1ã€åˆ° App å•†åº—æœç´¢å¹¶ä¸”ä¸‹è½½ Microsoft Authenticator App.</p>
<p>2ã€è¿›å…¥ npm åå°ï¼Œæ‰¾åˆ°å¦‚å›¾æ‰€ç¤ºï¼š<br><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g191w9ghp3j318n0myacc.jpg" alt=""></p>
<p>3ã€é€‰æ‹© [Authorization and Publishing] - [submit]</p>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g191xx4oacj30gt0nidh6.jpg" alt=""></p>
<p>4ã€æ‰“å¼€ Authenticator Appï¼Œé€‰æ‹© â€œæ·»åŠ è´¦æˆ·â€ - â€œå…¶ä»–è´¦æˆ·ï¼ˆGoogleã€Facebook ç­‰ï¼‰â€</p>
<p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g192bkruiyj30cd09ydh9.jpg" alt=""></p>
<p>5ã€æ‰«æ <code>æ­¥éª¤3</code> åçš„äºŒç»´ç ã€‚</p>
<p>6ã€ä½“éªŒ  One-time Passwordã€‚å¦‚å›¾æ‰€ç¤º</p>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g192dhbrgyj30c106sq3w.jpg" alt=""></p>
<p>7ã€ä½¿ç”¨ One-time Password åˆ é™¤å‘å¸ƒåŒ…ã€‚éœ€è¦åŠ ä¸Š â€“otp <one-time password=""></one-time></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm unpublish chuanghui-portal --force --otp 863613</span><br></pre></td></tr></table></figure>
<h4 id="å…«ã€ï¼ˆåè®°ï¼‰"><a href="#å…«ã€ï¼ˆåè®°ï¼‰" class="headerlink" title="å…«ã€ï¼ˆåè®°ï¼‰"></a>å…«ã€ï¼ˆåè®°ï¼‰</h4><p>å¼€é€šäº† 2FA ä»¥åï¼Œä½ çš„è´¦å·å‘å¸ƒåŒ…<code>$ npm publish</code> éƒ½æ˜¯éœ€è¦ä½¿ç”¨ One-Time Passwordçš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm publish --otp 863613</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/20/npmpublish/" data-id="cjtglyf4j004kzwvwqy9gie5i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-flutterdebuger" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/12/flutterdebuger/" class="article-date">
  <time datetime="2019-03-12T01:52:17.000Z" itemprop="datePublished">2019-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/flutter/">flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/12/flutterdebuger/">flutter Android debuger</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>æ“ä½œé¢„è§ˆï¼š</p>
<ol>
<li>å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹ï¼›</li>
<li>ä½¿ç”¨ <code>flutter devices</code> æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°ï¼›</li>
<li>åœ¨ <code>Android studio</code> ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡» <code>[debug]</code>ï¼›</li>
<li>çœŸæœºè‡ªåŠ¨å®‰è£…Appã€‚<h4 id="ä¸€ã€å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹æœº"><a href="#ä¸€ã€å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹æœº" class="headerlink" title="ä¸€ã€å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹æœº"></a>ä¸€ã€å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹æœº</h4></li>
</ol>
<blockquote>
<p>æ³¨æ„ï¼šåˆ‡è®°ä¸æ˜¯å……ç”µçº¿</p>
</blockquote>
<p>å¦‚æœæ­£å¸¸è¿æ¥æˆåŠŸï¼Œä½ çš„æ‰‹æœºå’Œç”µè„‘éƒ½æœ‰æç¤ºã€‚æ³¨æ„æ‰‹æœºä¼šæç¤ºä½ é€‰æ‹©ã€USB ä¼ è¾“æ–¹å¼ã€‘ï¼Œå¿…é¡»é€‰æ‹©ã€ä¼ è¾“æ–‡ä»¶ã€‘ï¼ˆæˆ–è€…MTPï¼ˆå¤šåª’ä½“ä¼ è¾“ï¼‰ï¼‰</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0zromxjlqj30br0nmgxw.jpg" alt=""></p>
<h4 id="äºŒã€ä½¿ç”¨-flutter-devices-æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°"><a href="#äºŒã€ä½¿ç”¨-flutter-devices-æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°" class="headerlink" title="äºŒã€ä½¿ç”¨ flutter devices æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°"></a>äºŒã€ä½¿ç”¨ <code>flutter devices</code> æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°</h4><p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0zrnf86g8j30hf02t749.jpg" alt=""></p>
<h4 id="ä¸‰ã€åœ¨-Android-studio-ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡»-debug"><a href="#ä¸‰ã€åœ¨-Android-studio-ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡»-debug" class="headerlink" title="ä¸‰ã€åœ¨ Android studio ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡» [debug]"></a>ä¸‰ã€åœ¨ <code>Android studio</code> ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡» <code>[debug]</code></h4><p><img src="http://wx1.sinaimg.cn/large/006ar8zggy1g0zrrlvwesj30kt036wei.jpg" alt=""></p>
<h4 id="å››ã€çœŸæœºè‡ªåŠ¨å®‰è£…Appï¼ˆç•¥ï¼‰ã€‚"><a href="#å››ã€çœŸæœºè‡ªåŠ¨å®‰è£…Appï¼ˆç•¥ï¼‰ã€‚" class="headerlink" title="å››ã€çœŸæœºè‡ªåŠ¨å®‰è£…Appï¼ˆç•¥ï¼‰ã€‚"></a>å››ã€çœŸæœºè‡ªåŠ¨å®‰è£…Appï¼ˆç•¥ï¼‰ã€‚</h4><p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g0zruf9snrj30u01o0jwf.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/12/flutterdebuger/" data-id="cjtglyf2y001izwvwbjm1uq9t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/">flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-androidssr" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/10/androidssr/" class="article-date">
  <time datetime="2019-03-10T05:22:26.000Z" itemprop="datePublished">2019-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/ssr/">ssr</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/10/androidssr/">androidssr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>çœ‹ä¸Šå»æ¯”windowså®¢æˆ·ç«¯å¤šäº†å¾ˆå¤šé€‰é¡¹ï¼Œä½†å®é™…ä¸Šåªéœ€è¦è®¾ç½®è¿™äº”ä¸ªï¼š</p>
<blockquote>
<p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1PKL0ViJJRJw9zkG8AlvEdQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1PKL0ViJJRJw9zkG8AlvEdQ</a> </p>
<p>æå–ç ï¼šp175 </p>
</blockquote>
<h3 id="æ“ä½œæ­¥éª¤ï¼š"><a href="#æ“ä½œæ­¥éª¤ï¼š" class="headerlink" title="æ“ä½œæ­¥éª¤ï¼š"></a>æ“ä½œæ­¥éª¤ï¼š</h3><ol start="0">
<li>ä¸‹è½½å®‰è£…å®‰å“ssr</li>
<li>è¾“å…¥ip</li>
<li>è¾“å…¥å¯†ç </li>
<li>è¾“å…¥ç«¯å£</li>
<li>é€‰æ‹©æ··æ·†æ–¹å¼ï¼šplain</li>
<li>é€‰æ‹©åŠ å¯†æ–¹æ³•ï¼šaes-256-cfbï¼ˆå’Œä½ çš„æœåŠ¡å™¨åŠ å¯†ä¸€æ ·ï¼‰</li>
<li>ç‚¹å‡»å³ä¸Šè§’çš„é£æœº</li>
</ol>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g0xmnvd495j30cl0ottba.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/10/androidssr/" data-id="cjtglyf2n0010zwvwbxvn5lrc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssr/">ssr</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-requestjs" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/06/requestjs/" class="article-date">
  <time datetime="2019-03-06T02:54:53.000Z" itemprop="datePublished">2019-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/06/requestjs/">è¯·æ±‚ç¼“å­˜ç­–ç•¥</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>è¯¥ä»£ç æ‘˜æŠ„è‡ª  <a href="https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js#L66" target="_blank" rel="noopener">ant-design-pro</a> </p>
<p><a href="https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js#L66" target="_blank" rel="noopener">https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js#L66</a></p>
<p>åªè¦ä¸æ˜¯å®æ—¶æ•°æ®çš„æ¥å£ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥å……åˆ†åˆ©ç”¨è¯·æ±‚ç¼“å­˜çš„ç‰¹æ€§ï¼ŒèŠ‚çº¦å®¢æˆ·ç«¯ç½‘ç»œèµ„æºçš„æµªè´¹ï¼Œä¹Ÿå‡å°‘æœåŠ¡å™¨çš„è¯·æ±‚å‹åŠ›ã€‚</p>
<p>ç‰¹åˆ«æ˜¯æˆ‘çš„é¡¹ç›®ä¸­çš„æ•°æ®ï¼Œæœ€çŸ­çš„è¿­ä»£å‘¨æœŸä¹Ÿæ˜¯â€œæ¯æ—¥ä¸€æ›´â€ã€‚æ‰€ä»¥ç¼“å­˜ç‰¹æ€§å¯ä»¥æ”¾å¿ƒå¤§èƒ†ä½¿ç”¨ã€‚ä½†ä¸ºäº†ä¿é™©ï¼Œç¼“å­˜ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯è®¾ç½®çŸ­ä¸€ç‚¹ã€‚æ¯”å¦‚1åˆ†é’Ÿã€‚</p>
<p>åŸç†å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>æ¯æ¬¡è¯·æ±‚éƒ½å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰åˆ™å­˜èµ·æ¥ï¼Œå¦‚æœæœ‰åˆ™éœ€è¦åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™è¿˜æ˜¯è¦è¯·æ±‚ï¼Œå¦åˆ™æ‰è¿”å›ç¼“å­˜ï¼›</li>
<li>æ¯æ¬¡å­˜ä¹‹å‰ï¼Œåˆ¤æ–­ç¼“å­˜æ˜¯å¦æ»¡äº†ï¼Ÿï¼ˆsessionStoreageçš„å®¹é‡å¤§æ¦‚5Mï¼‰ï¼Œå¦‚æœæ»¡äº†åˆ™éœ€è¦æ¸…ç©ºå†å­˜å…¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ•°æ®ä½“ç§¯è¶…è¿‡5Mï¼ˆå‡ åä¸‡æ•°æ®ï¼‰ï¼Œé‚£ä½ æ¸…ç©ºå­˜å…¥è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬å­˜å…¥ä¹‹å‰è¦åˆ¤æ–­æ•°æ®ä½“ç§¯æ˜¯å¦å¤§äº5Mï¼Œå¦‚æœæ˜¯åˆ™ä¸åŠ å…¥ç¼“å­˜ï¼›</li>
</ol>
<h4 id="é—®é¢˜ä¸€ï¼šå¦‚ä½•åˆ¤æ–­ä½ æµè§ˆå™¨çš„ç¼“å­˜å®¹é‡ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚ä¸å‡ºæ„å¤–è‚¯å®šæ˜¯5120kbã€‚"><a href="#é—®é¢˜ä¸€ï¼šå¦‚ä½•åˆ¤æ–­ä½ æµè§ˆå™¨çš„ç¼“å­˜å®¹é‡ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚ä¸å‡ºæ„å¤–è‚¯å®šæ˜¯5120kbã€‚" class="headerlink" title="é—®é¢˜ä¸€ï¼šå¦‚ä½•åˆ¤æ–­ä½ æµè§ˆå™¨çš„ç¼“å­˜å®¹é‡ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚ä¸å‡ºæ„å¤–è‚¯å®šæ˜¯5120kbã€‚"></a>é—®é¢˜ä¸€ï¼šå¦‚ä½•åˆ¤æ–­ä½ æµè§ˆå™¨çš„ç¼“å­˜å®¹é‡ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚ä¸å‡ºæ„å¤–è‚¯å®šæ˜¯5120kbã€‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–localStorageæœ€å¤§å®¹é‡</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(!<span class="built_in">window</span>.sessionStorage) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å½“å‰æµè§ˆå™¨ä¸æ”¯æŒsessionStorage!'</span>)</span><br><span class="line">   &#125;    </span><br><span class="line">   <span class="keyword">var</span> test = <span class="string">'0123456789'</span>;</span><br><span class="line">   <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">     num += num;</span><br><span class="line">     <span class="keyword">if</span>(num.length == <span class="number">10240</span>) &#123;</span><br><span class="line">       test = num;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     add(num);</span><br><span class="line">   &#125;</span><br><span class="line">   add(test);</span><br><span class="line">   <span class="keyword">var</span> sum = test;</span><br><span class="line">   <span class="keyword">var</span> show = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      sum += test;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="built_in">window</span>.sessionStorage.removeItem(<span class="string">'test'</span>);</span><br><span class="line">       <span class="built_in">window</span>.sessionStorage.setItem(<span class="string">'test'</span>, sum);</span><br><span class="line">       <span class="built_in">console</span>.log(sum.length / <span class="number">1024</span> + <span class="string">'KB'</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(sum.length / <span class="number">1024</span> + <span class="string">'KBè¶…å‡ºæœ€å¤§é™åˆ¶'</span>);</span><br><span class="line">       clearInterval(show);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;, <span class="number">0.1</span>)</span><br><span class="line"> &#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–sessionStorageçš„å‰©ä½™å®¹é‡</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">window</span>.sessionStorage) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'æµè§ˆå™¨ä¸æ”¯æŒsessionStorage'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(item <span class="keyword">in</span> <span class="built_in">window</span>.sessionStorage) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">window</span>.sessionStorage.hasOwnProperty(item)) &#123;</span><br><span class="line">            size += <span class="built_in">window</span>.sessionStorage.getItem(item).length;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å½“å‰sessionStorageå‰©ä½™å®¹é‡ä¸º'</span> + (size / <span class="number">1024</span>).toFixed(<span class="number">2</span>) + <span class="string">'KB'</span>);</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g0sufs054qg30lq0ny4go.gif" alt=""></p>
<h4 id="é—®é¢˜äºŒï¼šä»¥ä»€ä¹ˆä½œä¸ºç¼“å­˜é”®ï¼ˆsessionStorage-keysï¼‰ï¼Ÿ"><a href="#é—®é¢˜äºŒï¼šä»¥ä»€ä¹ˆä½œä¸ºç¼“å­˜é”®ï¼ˆsessionStorage-keysï¼‰ï¼Ÿ" class="headerlink" title="é—®é¢˜äºŒï¼šä»¥ä»€ä¹ˆä½œä¸ºç¼“å­˜é”®ï¼ˆsessionStorage keysï¼‰ï¼Ÿ"></a>é—®é¢˜äºŒï¼šä»¥ä»€ä¹ˆä½œä¸ºç¼“å­˜é”®ï¼ˆsessionStorage keysï¼‰ï¼Ÿ</h4><ol>
<li>Urlï¼šè¯·æ±‚åœ°å€ï¼Œå« â€œ?â€ åé¢çš„ GET å‚æ•°;</li>
<li>Optionsï¼šåŒ…å« headers å’Œ paramsã€body ç­‰;</li>
<li>Otherï¼šè­¬å¦‚æœ‰ä¸€äº›å…¬å…±å‚æ•°é€šå¸¸æ˜¯åœ¨ <code>interceptors request</code> è¯·æ±‚æ‹¦æˆªå™¨ä¸­æ‰æ·»åŠ çš„ã€‚å¦‚æœæ²¡æœ‰åˆ™ä¸è®¡å…¥ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import hash from &apos;hash.js&apos;</span><br><span class="line"></span><br><span class="line">// ç¼“å­˜é”®ï¼ˆæŒ‡çº¹ï¼‰ = è¯·æ±‚url + è¯·æ±‚é…ç½® + å…¶ä»–ç‰¹æ®Šå‚æ•°</span><br><span class="line">const fingerprint = Url + Options + Other;</span><br><span class="line">// åŠ å¯†æ··æ·†</span><br><span class="line">const hashcode = hash( fingerprint )</span><br></pre></td></tr></table></figure>
<h4 id="é—®é¢˜ä¸‰ï¼šsessionStorage-æ˜¯æ²¡æœ‰è¿‡æœŸå’Œç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µçš„ï¼Œéœ€è¦æ€ä¹ˆå®ç°ï¼Ÿ"><a href="#é—®é¢˜ä¸‰ï¼šsessionStorage-æ˜¯æ²¡æœ‰è¿‡æœŸå’Œç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µçš„ï¼Œéœ€è¦æ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="é—®é¢˜ä¸‰ï¼šsessionStorage æ˜¯æ²¡æœ‰è¿‡æœŸå’Œç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µçš„ï¼Œéœ€è¦æ€ä¹ˆå®ç°ï¼Ÿ"></a>é—®é¢˜ä¸‰ï¼šsessionStorage æ˜¯æ²¡æœ‰è¿‡æœŸå’Œç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µçš„ï¼Œéœ€è¦æ€ä¹ˆå®ç°ï¼Ÿ</h4><p>éœ€è¦æ–°å»ºä¸€ä¸ªç‰¹æ®Šçš„é”®æ¥è®°å½•è¯¥ç¼“å­˜å½•å…¥çš„æ—¶é—´ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç¼“å­˜</span></span><br><span class="line">sessionStorage.setItem(hashcode, <span class="built_in">JSON</span>.stringify(content))</span><br><span class="line"><span class="comment">// åŒæ—¶ï¼Œè®¾ç½®è¯¥ç¼“å­˜çš„å½•å…¥æ—¶é—´</span></span><br><span class="line">sessionStorage.setItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>, <span class="built_in">Date</span>.now())</span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼ˆè¿™é‡Œçœç•¥äº†åˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨çš„ä»£ç ï¼‰ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬çº¦å®šç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ˜¯60ç§’</span></span><br><span class="line"><span class="keyword">const</span> expirys = <span class="number">60</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¯¥ç¼“å­˜çš„å½•å…¥æ—¶é—´</span></span><br><span class="line"><span class="keyword">const</span> whenCached =  sessionStorage.getItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ç¼“å­˜è¿‡å»äº†å¤šä¹…æ—¶é—´äº†</span></span><br><span class="line"><span class="keyword">const</span> age = (<span class="built_in">Date</span>.now() - whenCached) / <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...å¦‚æœç¼“å­˜æ²¡æœ‰è¿‡æœŸ</span></span><br><span class="line"><span class="keyword">if</span> (age &lt; expirys) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'use cache'</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'no cache'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="é—®é¢˜å››ï¼šå¦‚ä½•æ•æ‰-sessionStorage-è¶…å‡º"><a href="#é—®é¢˜å››ï¼šå¦‚ä½•æ•æ‰-sessionStorage-è¶…å‡º" class="headerlink" title="é—®é¢˜å››ï¼šå¦‚ä½•æ•æ‰ sessionStorage è¶…å‡º?"></a>é—®é¢˜å››ï¼šå¦‚ä½•æ•æ‰ sessionStorage è¶…å‡º?</h4><p>é”™è¯¯åä¸º <code>&quot;QuotaExceededError&quot;</code></p>
<blockquote>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ä½ æ¸…ç©ºç¼“å­˜å†é‡æ–°å­˜å…¥ï¼Œå†…å®¹ä½“ç§¯å¦‚æœæ˜¯å¤§äº5Mä¾ç„¶ä¼šå†åº¦æŠ¥é”™ã€‚æ‰€ä»¥æœ€å¥½é™åˆ¶ç¼“å­˜çš„å¤§å°ã€‚å¦‚æœå¤§äºæŸä¸ªä½“ç§¯ï¼ˆè­¬å¦‚2Mï¼‰ï¼Œåˆ™ä¸å­˜å…¥ç¼“å­˜ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * say something ...</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @hashcode  &#123;String&#125;   ç¼“å­˜é”®</span></span><br><span class="line"><span class="comment"> * @content   &#123;String&#125;   ç¼“å­˜å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> cachedSave = <span class="function">(<span class="params">hashcode, content</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›code500æ˜¯åç«¯å›ºå®šçš„æŠ¥é”™åé¦ˆ &amp;&amp; ä¸èƒ½ä¸ºç©ºå¯¹è±¡ &amp;&amp; æ•°æ®çš„å°äº2M</span></span><br><span class="line">    <span class="keyword">if</span> (content.code != <span class="number">500</span> &amp;&amp; !isEmptyObject(content) &amp;&amp; (<span class="built_in">JSON</span>.stringify(content).length / <span class="number">1024</span>).toFixed(<span class="number">2</span>) &lt; <span class="number">2048</span>) &#123;</span><br><span class="line">      <span class="comment">// è®¾ç½®ç¼“å­˜</span></span><br><span class="line">      sessionStorage.setItem(hashcode, <span class="built_in">JSON</span>.stringify(content))</span><br><span class="line">      <span class="comment">// è®¾ç½®ç¼“å­˜æ—¶é—´</span></span><br><span class="line">      sessionStorage.setItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="comment">// è¶…å‡ºç¼“å­˜å¤§å°</span></span><br><span class="line">      <span class="keyword">if</span> (err.name === <span class="string">'QuotaExceededError'</span>) &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜</span></span><br><span class="line">        sessionStorage.clear()</span><br><span class="line">        <span class="comment">// é‡æ–°è®¾ç½®ç¼“å­˜</span></span><br><span class="line">        sessionStorage.setItem(hashcode, <span class="built_in">JSON</span>.stringify(content))</span><br><span class="line">        <span class="comment">// é‡æ–°è®¾ç½®ç¼“å­˜æ—¶é—´</span></span><br><span class="line">        sessionStorage.setItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›Promise</span></span><br><span class="line">  <span class="keyword">return</span> content</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é—®é¢˜äº”ï¼šå¦‚ä½•åŠ å¯†æŒ‡çº¹ï¼ˆsessionStorage-keysï¼‰ï¼Ÿ"><a href="#é—®é¢˜äº”ï¼šå¦‚ä½•åŠ å¯†æŒ‡çº¹ï¼ˆsessionStorage-keysï¼‰ï¼Ÿ" class="headerlink" title="é—®é¢˜äº”ï¼šå¦‚ä½•åŠ å¯†æŒ‡çº¹ï¼ˆsessionStorage keysï¼‰ï¼Ÿ"></a>é—®é¢˜äº”ï¼šå¦‚ä½•åŠ å¯†æŒ‡çº¹ï¼ˆsessionStorage keysï¼‰ï¼Ÿ</h4><p>å¯ä»¥ä½¿ç”¨å¼€æºçš„ç¬¬ä¸‰æ–¹åº“ï¼š <code>hash.js</code><br><a href="https://github.com/indutny/hash.js" target="_blank" rel="noopener">https://github.com/indutny/hash.js</a></p>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hash = <span class="built_in">require</span>(<span class="string">'hash.js'</span>)</span><br><span class="line">hash.sha256().update(<span class="string">'ä½ éœ€è¦åŠ å¯†çš„æ•°æ®'</span>).digest(<span class="string">'hex'</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h2><p>request.js:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> hash <span class="keyword">from</span> <span class="string">'hash.js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼š&#123;&#125;</span></span><br><span class="line"><span class="keyword">const</span> isEmptyObject = <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.getOwnPropertyNames) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">Object</span>.getOwnPropertyNames(obj).length === <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> k;</span><br><span class="line">        <span class="keyword">for</span> (k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obj.hasOwnProperty(k)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ£€æŸ¥çŠ¶æ€ç </span></span><br><span class="line"><span class="keyword">const</span> checkStatus = <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è¯·æ±‚çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (response.status &gt;= <span class="number">200</span> &amp;&amp; response.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿”å›Promise</span></span><br><span class="line">        <span class="keyword">return</span> response.data</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// æœåŠ¡å™¨å“åº”å¼‚å¸¸</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼“å­˜åˆ°sessionStorage</span></span><br><span class="line"><span class="keyword">const</span> cachedSave = <span class="function">(<span class="params">hashcode, content</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›code500æ˜¯åç«¯å›ºå®šçš„æŠ¥é”™åé¦ˆ &amp;&amp; ä¸èƒ½ä¸ºç©ºå¯¹è±¡ &amp;&amp; æ•°æ®çš„å°äº2M</span></span><br><span class="line">    <span class="keyword">if</span> (content.code != <span class="number">500</span> &amp;&amp; !isEmptyObject(content) &amp;&amp; (<span class="built_in">JSON</span>.stringify(content).length / <span class="number">1024</span>).toFixed(<span class="number">2</span>) &lt; <span class="number">2048</span>) &#123;</span><br><span class="line">      <span class="comment">// è®¾ç½®ç¼“å­˜</span></span><br><span class="line">      sessionStorage.setItem(hashcode, <span class="built_in">JSON</span>.stringify(content))</span><br><span class="line">      <span class="comment">// è®¾ç½®ç¼“å­˜æ—¶é—´</span></span><br><span class="line">      sessionStorage.setItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="comment">// è¶…å‡ºç¼“å­˜å¤§å°</span></span><br><span class="line">      <span class="keyword">if</span> (err.name === <span class="string">'QuotaExceededError'</span>) &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜</span></span><br><span class="line">        sessionStorage.clear()</span><br><span class="line">        <span class="comment">// é‡æ–°è®¾ç½®ç¼“å­˜</span></span><br><span class="line">        sessionStorage.setItem(hashcode, <span class="built_in">JSON</span>.stringify(content))</span><br><span class="line">        <span class="comment">// é‡æ–°è®¾ç½®ç¼“å­˜æ—¶é—´</span></span><br><span class="line">        sessionStorage.setItem(<span class="string">`<span class="subst">$&#123;hashcode&#125;</span>:timestamp`</span>, <span class="built_in">Date</span>.now())</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›Promise</span></span><br><span class="line">  <span class="keyword">return</span> content</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¬å…±è¯·æ±‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> request = <span class="function">(<span class="params">url, options = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æŒ‡çº¹</span></span><br><span class="line">    <span class="keyword">const</span> fingerprint = url + <span class="built_in">JSON</span>.stringify(options)</span><br><span class="line">    <span class="comment">// åŠ å¯†æŒ‡çº¹</span></span><br><span class="line">    <span class="keyword">const</span> hashcode = hash.sha256().update(fingerprint).digest(<span class="string">'hex'</span>)</span><br><span class="line">    <span class="comment">// é¢„è®¾å€¼æŒ‡çº¹</span></span><br><span class="line">    <span class="keyword">const</span> _cachedSave = cachedSave.bind(<span class="literal">null</span>, hashcode)</span><br><span class="line">    <span class="comment">// è¿‡æœŸè®¾ç½®</span></span><br><span class="line">    <span class="keyword">const</span> expirys = options &amp;&amp; options.expirys || <span class="number">60</span></span><br><span class="line">    <span class="comment">// æœ¬è¯·æ±‚æ˜¯å¦ç¦æ­¢ç¼“å­˜ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">if</span> (expirys !== <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="comment">// è·å–ç¼“å­˜</span></span><br><span class="line">        <span class="keyword">const</span> cached = sessionStorage.getItem(hashcode)</span><br><span class="line">        <span class="comment">// è·å–è¯¥ç¼“å­˜çš„æ—¶é—´</span></span><br><span class="line">        <span class="keyword">const</span> whenCached = sessionStorage.getItem($&#123;hashcode&#125;:timestamp)</span><br><span class="line">        <span class="comment">// å¦‚æœç¼“å­˜éƒ½å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (cached !== <span class="literal">null</span> &amp;&amp; whenCached !== <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="comment">// åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">          <span class="keyword">const</span> age = (<span class="built_in">Date</span>.now() - whenCached) / <span class="number">1000</span></span><br><span class="line">          <span class="comment">// å¦‚æœä¸è¿‡æœŸçš„è¯ç›´æ¥è¿”å›è¯¥å†…å®¹</span></span><br><span class="line">          <span class="keyword">if</span> (age &lt; expirys) &#123;</span><br><span class="line">              <span class="comment">// æ–°å»ºä¸€ä¸ªresponse</span></span><br><span class="line">              <span class="keyword">const</span> response = <span class="keyword">new</span> Response(<span class="keyword">new</span> Blob([cached]))</span><br><span class="line">              <span class="comment">// è¿”å›promiseå¼çš„ç¼“å­˜</span></span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> resolve(response.json()))</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// åˆ é™¤ç¼“å­˜å†…å®¹</span></span><br><span class="line">          sessionStorage.removeItem(hashcode)</span><br><span class="line">          <span class="comment">// åˆ é™¤ç¼“å­˜æ—¶é—´</span></span><br><span class="line">          sessionStorage.removeItem($&#123;hashcode&#125;:timestamp)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> axios(url, options).then(checkStatus).then(_cachedSave)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å¦‚ä½•ä½¿ç”¨-request-jsï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨-request-jsï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ request.jsï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ request.jsï¼Ÿ</h3><p>Login.js ç¤ºä¾‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">'@/utils/request.js'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line"></span><br><span class="line">request(<span class="string">'/admin/user/sysUser/login'</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  headers: &#123;<span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span>&#125;,</span><br><span class="line">  data: qs.stringify(&#123; userAccount, userPwd, <span class="attr">type</span>: <span class="string">'account'</span> &#125;)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/06/requestjs/" data-id="cjtglyf540051zwvw2pgfgjub" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/axios/">axios</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bibaoIIFE" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/05/bibaoIIFE/" class="article-date">
  <time datetime="2019-03-05T14:27:09.000Z" itemprop="datePublished">2019-03-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/05/bibaoIIFE/">å–„ç”¨ JavaScript ç‰¹æ€§ï¼šé—­åŒ…ä¸IIFE</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>ä¸€ã€ä½¿ç”¨ <code>IIFE</code> ä¼˜é›…çš„è§£å†³ <code>setInterval</code> é¦–æ¬¡ä¸æ‰§è¡Œçš„å°´å°¬ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½ çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">()</span> =&gt;</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç«‹å³æ‰§è¡Œå¹¶ä¸”è½®è¯¢</span></span><br><span class="line"><span class="keyword">const</span> timer = (<span class="function"><span class="keyword">function</span>(<span class="params">fn, t</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸ºäº†è§£å†³ setInterval é¦–æ¬¡ä¸æ‰§è¡Œçš„å°´å°¬</span></span><br><span class="line">    fn &amp;&amp; fn()</span><br><span class="line">    <span class="comment">// è¿”å›è®¡æ—¶å™¨timer</span></span><br><span class="line">    <span class="keyword">return</span> setInterval(fn, t)</span><br><span class="line">&#125;)(f, <span class="number">1500</span>)</span><br></pre></td></tr></table></figure></p>
<p>äºŒã€å–„ç”¨é—­åŒ…ï¼Œå°±å¯ä»¥è½»æ¾å®ç°ç¼“å­˜æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€‚</p>
<p>ä¸‹é¢å‡ ä¸ªä¾‹å­æ¥ä½“éªŒé—­åŒ…åœ¨å®æˆ˜ä¸­çš„ä½œç”¨ã€‚</p>
<blockquote>
<p>è¿™ç§ä¹Ÿè¢«ç§°ä¸º <code>â€œæ¨¡å—æ¨¡å¼â€</code> â€”â€” ç°ä»£æ¨¡å—åŒ–å®ç°çš„åŸºçŸ³</p>
</blockquote>
<h5 id="1-è½»é‡çº§æç®€çš„è’™ç‰ˆå±‚maskï¼Œååˆ†æ–¹ä¾¿æ‰©å±•ï¼š"><a href="#1-è½»é‡çº§æç®€çš„è’™ç‰ˆå±‚maskï¼Œååˆ†æ–¹ä¾¿æ‰©å±•ï¼š" class="headerlink" title="1. è½»é‡çº§æç®€çš„è’™ç‰ˆå±‚maskï¼Œååˆ†æ–¹ä¾¿æ‰©å±•ï¼š"></a>1. è½»é‡çº§æç®€çš„è’™ç‰ˆå±‚maskï¼Œååˆ†æ–¹ä¾¿æ‰©å±•ï¼š</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Mask = <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</span><br><span class="line">	div.style = <span class="string">'background-color: rgba(255, 255, 255, 0.7);position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 199307100337; display:none;'</span></span><br><span class="line">	div.addEventListener(<span class="string">'click'</span>, cb)</span><br><span class="line">	<span class="built_in">document</span>.body.append(div)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> img = <span class="keyword">new</span> Image()</span><br><span class="line">	img.src = <span class="string">"http://wx3.sinaimg.cn/small/006ar8zggy1g0isbtuj2kg300w00wq2p.gif"</span></span><br><span class="line">	img.style = <span class="string">'position: absolute; top: 50%; left: 50%;'</span></span><br><span class="line">	div.append(img)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> show = <span class="function"><span class="keyword">function</span> (<span class="params">showcb</span>) </span>&#123;</span><br><span class="line">		div.style.display = <span class="string">'block'</span></span><br><span class="line">		showcb &amp;&amp; showcb()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> close = <span class="function"><span class="keyword">function</span> (<span class="params">showcb</span>) </span>&#123;</span><br><span class="line">		div.style.display = <span class="string">'none'</span></span><br><span class="line">		showcb &amp;&amp; showcb()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123; show, close &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè’™ç‰ˆ</span></span><br><span class="line"><span class="keyword">const</span> mask = <span class="keyword">new</span> Mask()</span><br><span class="line"><span class="comment">// æ‰“å¼€è’™ç‰ˆ</span></span><br><span class="line">mask.show()</span><br><span class="line"><span class="comment">// ä¸‰ç§’åå…³é—­</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">	mask.close()</span><br><span class="line">&#125;, <span class="number">3500</span>);</span><br></pre></td></tr></table></figure>
<h5 id="2-å·§å¦™ä½¿ç”¨é—­åŒ…å®ç°å»é‡å¤"><a href="#2-å·§å¦™ä½¿ç”¨é—­åŒ…å®ç°å»é‡å¤" class="headerlink" title="2. å·§å¦™ä½¿ç”¨é—­åŒ…å®ç°å»é‡å¤"></a>2. å·§å¦™ä½¿ç”¨é—­åŒ…å®ç°å»é‡å¤</h5><p>æˆ‘æœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼šéœ€è¦ä»æŒ‡å®šåŒºé—´ï¼ˆæ¯”å¦‚-7 ~ 7ï¼‰éšæœºå– 5 ä¸ªæ•°ï¼Œè™½ç„¶è¯´æ˜¯éšæœºï¼Œä½†å´ä¸æƒ³é‡å¤ã€‚ç”¨é—­åŒ…ç¼“å­˜å·²ç»å–è¿‡çš„æ•°ï¼Œæ¯æ¬¡å–çš„æ—¶å€™é€’å½’è¿‡æ»¤ä¸€ä¸‹å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼“å­˜å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> singeFn = <span class="function"><span class="keyword">function</span> (<span class="params">fn, maxPollTime = <span class="number">20</span></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// ç¼“å­˜</span></span><br><span class="line">	<span class="keyword">var</span> cache = []</span><br><span class="line">	<span class="comment">// è½®è¯¢æ¬¡æ•°</span></span><br><span class="line">	<span class="keyword">var</span> pollTime = <span class="number">0</span></span><br><span class="line">	<span class="comment">// è¿”å›éšæœºæ•°ç”Ÿæˆå™¨</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">_</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="comment">// è·å–éšæœºæ•°</span></span><br><span class="line">		<span class="keyword">var</span> data = fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">		<span class="comment">// å¦‚æœå­˜åœ¨åˆ™é€’å½’</span></span><br><span class="line">		<span class="keyword">if</span> (~cache.indexOf(data)) &#123;</span><br><span class="line">			<span class="comment">// é€’å½’è°ƒç”¨ï¼ˆå¦‚æœé€’å½’æ¬¡æ•°å¤§äºé˜ˆå€¼ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›Falseï¼‰</span></span><br><span class="line">			<span class="keyword">return</span> ++pollTime &gt; maxPollTime ? <span class="literal">false</span> : _.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// é‡ç½®è½®è¯¢æ¬¡æ•°</span></span><br><span class="line">			pollTime = <span class="number">0</span></span><br><span class="line">			<span class="comment">// æ·»åŠ ç¼“å­˜å¹¶ä¸”è¿”å›data</span></span><br><span class="line">			<span class="keyword">return</span> cache.push(data), data</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘çš„éšæœºå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> random = <span class="function"><span class="keyword">function</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (max == <span class="literal">null</span>) &#123;</span><br><span class="line">      max = min;</span><br><span class="line">      min = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> min + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»-7ï¼Œ7å–éšæœºæ•°</span></span><br><span class="line"><span class="keyword">var</span> rangeRadom = random.bind(<span class="literal">null</span>, <span class="number">-7</span>, <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> singeRangeRadom = singeFn(rangeRadom);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¿”å›å€¼ï¼ˆæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> randnum = singeRangeRadom()</span><br><span class="line">    <span class="built_in">console</span>.log(randnum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-ç”¨é—­åŒ…å¯ä»¥å®ç°ç¼“å­˜æ¨¡å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—æ¶ˆè€—ã€‚"><a href="#3-ç”¨é—­åŒ…å¯ä»¥å®ç°ç¼“å­˜æ¨¡å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—æ¶ˆè€—ã€‚" class="headerlink" title="3. ç”¨é—­åŒ…å¯ä»¥å®ç°ç¼“å­˜æ¨¡å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—æ¶ˆè€—ã€‚"></a>3. ç”¨é—­åŒ…å¯ä»¥å®ç°ç¼“å­˜æ¨¡å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—æ¶ˆè€—ã€‚</h5><p>è­¬å¦‚æ¯”è¾ƒå®ç”¨çš„ <code>memoized</code>ï¼Œæˆ‘ç§°ä¹‹ä¸º <code>å‚æ•°æ ‡è®°ç¼“å­˜å™¨</code>ï¼Œæºç å’Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const memoized = fn =&gt; &#123;</span><br><span class="line">	const lookupTable = &#123;&#125;;</span><br><span class="line">	// å¯ä»¥é€šè¿‡è§£é‡Šè¿™ä¸ªæ¥è§‚å¯Ÿç¼“å­˜çš„å˜åŒ–</span><br><span class="line">	// setInterval( () =&gt; console.log(lookupTable) , 1000); </span><br><span class="line">	return arg =&gt; lookupTable[arg] || (lookupTable[arg] = fn(arg));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// é˜¶ä¹˜çš„demo</span><br><span class="line">let fastFactorial = memoized(n =&gt; &#123;</span><br><span class="line">	if (n === 0) &#123;</span><br><span class="line">		return 1;</span><br><span class="line">	&#125;</span><br><span class="line">	// è¿™æ˜¯ä¸€ä¸ªé€’å½’ï¼Œå¹¶ä¸”æ¯ä¸€æ¬¡é€’å½’éƒ½å…·æœ‰ç¼“å­˜è¿‡ç¨‹</span><br><span class="line">	return n * fastFactorial(n -1);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fastFactorial(5)</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘çš„åšå®¢ä¸­<code>ç«™å†…é™æ€æœç´¢åŠŸèƒ½</code>ï¼Œå°±æ˜¯ä½¿ç”¨äº† <code>memoized</code>  çš„ç‰¹æ€§æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘é‡å¤çš„æœç´¢ã€‚</p>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g0s9womogeg30ku0cwqhw.gif" alt=""></p>
<p>å¦‚å›¾ï¼Œå½“æˆ‘è¾“å…¥ â€œcentosâ€ çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åˆ†åˆ«å¯¹ </p>
<blockquote>
<p>â€œcâ€, â€œceâ€, â€œcenâ€, â€œcentâ€, â€œcentoâ€, â€œcentosâ€ </p>
</blockquote>
<p>å…³é”®å­—åˆ†åˆ«è¿›è¡Œäº†:</p>
<blockquote>
<p>æœç´¢ -&gt; è¿‡æ»¤ -&gt; æ¨¡æ¿å¼•æ“ -&gt; æ¸²æŸ“UI</p>
</blockquote>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæŒ‰ä¸‹å…­æ¬¡â€œBackSpaceâ€ã€‚ä¹Ÿå°±æ˜¯å˜æˆäº† </p>
<blockquote>
<p>â€œcentoâ€, â€œcentâ€, â€œcenâ€, â€œceâ€, â€œcâ€, â€œâ€</p>
</blockquote>
<p>æ˜¯å¦åˆå¾—é‡å¤è¿›è¡Œä¸Šè¿°çš„è¿ç®—æ“ä½œå‘¢ï¼Ÿ</p>
<p>æ˜¾ç„¶æ˜¯ä¸å¿…çš„ï¼Œå› ä¸ºæ¯ä¸€æ¬¡è¾“å…¥å…³é”®è¯ï¼Œæˆ‘éƒ½ä¼šæœç´¢ä¸€ä¸‹ç¼“å­˜æ˜¯å¦å­˜åœ¨ç›¸å…³çš„å†…å®¹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šç¼“å­˜èµ·æ¥ã€‚å¦‚æœå­˜åœ¨åˆ™æ‹¿æ¥å³ç”¨ã€‚è¿™æ ·å°±å‡å°‘äº†å¤§é‡çš„è®¡ç®—æ¶ˆè€—ã€‚ç›´æ¥è·³åˆ°æœ€åä¸€æ­¥â€œæ¸²æŸ“UIâ€äº†ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/05/bibaoIIFE/" data-id="cjtglyf2t0019zwvws0rx8c37" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-norepeatxhr" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/05/norepeatxhr/" class="article-date">
  <time datetime="2019-03-05T02:59:17.000Z" itemprop="datePublished">2019-03-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/xhr/">xhr</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/05/norepeatxhr/">æ›´ä¼˜é›…çš„é˜²æ­¢è¯·æ±‚(XHR)é‡å¤ â€”â€” è¯·æ±‚é˜Ÿåˆ—</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><hr><br>é—®é¢˜ï¼šé‡å¤è¯·æ±‚çš„é—®é¢˜åœ¨å¼€å‘ä¸­å¾ˆå¸¸è§ï¼Œæµªè´¹ç½‘ç»œèµ„æºå€’æ˜¯å…¶æ¬¡ï¼Œæœ€æ€•çš„æ˜¯å‰ä¸€æ¬¡çš„ç‚¹å‡»é€»è¾‘ï¼ŒæŠŠåé¢çš„é€»è¾‘è¦†ç›–äº†ã€‚</p>
<blockquote>
<p>è­¬å¦‚ï¼Œä½ åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»äº†â€œå´å½¦ç¥–â€ï¼Œç„¶åå†å¿«é€Ÿç‚¹å‡»äº†â€œå´å­Ÿè¾¾â€ã€‚å‡è®¾â€œå´å½¦ç¥–â€çš„æ•°æ®è¯·æ±‚éœ€è¦3ç§’ï¼Œè€Œâ€œå´å­Ÿè¾¾â€åªéœ€è¦2ç§’ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ï¼Œé¡µé¢ä¼šå…ˆæ¸²æŸ“å‡ºâ€œå´å½¦ç¥–â€ï¼Œè€Œååˆé©¬ä¸Šâ€œå´å­Ÿè¾¾â€çš„æ•°æ®è¦†ç›–ã€‚</p>
<p><strong>ç”¨æˆ·æœ¬æ¥æ˜¯æƒ³æŸ¥çœ‹â€œå´å½¦ç¥–â€çš„ç…§ç‰‡ï¼Œè€Œç•Œé¢å±•ç¤ºçš„å´æ˜¯â€œå´å­Ÿè¾¾â€â€¦â€¦</strong></p>
</blockquote>
<p><img src="http://wx2.sinaimg.cn/large/006ar8zggy1g0rnnuad9uj30dl06xgmp.jpg" alt=""></p>
<p>å¸¸è§çš„é˜²æ­¢é‡å¤è¯·æ±‚çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯å±•ç¤ºä¸€ä¸ªè’™ç‰ˆæˆ–è€…Loadingå±‚ï¼Œæ‹¦æˆªç”¨æˆ·è¿›ä¸€æ­¥æ“ä½œã€‚ç›´åˆ°é€»è¾‘å…¨éƒ¨è·‘é€šä¸ºæ­¢ã€‚</p>
<p>ä½†åœ¨å¤§æ•°æ®å±å¹•ä¸­ï¼Œå¦‚æœæ‹¦æˆªç”¨æˆ·æ“ä½œï¼Œå¹¶ä¸”èµ«ç„¶å‡ºç°ä¸€ä¸ªèŠèŠ±å›¾ï¼Œæ˜¯å¾ˆFu*kçš„ä½“éªŒã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘æˆ‘è‡ªå·±çœ‹åˆ°èŠèŠ±éƒ½çƒ¦ï¼š</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0isbtuj2kg300w00wq2p.gif" alt=""></p>
<p>ä¸è¿‡ï¼Œè¿™ç§ä¸å¥½çš„ä½“éªŒå¹¶ä¸æ˜¯æºäºèŠèŠ±å›¾ï¼Œè€Œæ˜¯æ‹¦æˆªäº†ç”¨æˆ·æ“ä½œã€‚è®©ç”¨æˆ·æ”¾ä¸å¼€ã€‚æ‰€ä»¥éœ€æ±‚æ˜¯ï¼š</p>
<blockquote>
<p>ä½ éšä¾¿çå‡ æŠŠä¹±ç‚¹ï¼Œé‡å¤è¯·æ±‚äº†ç®—æˆ‘è¾“ã€‚</p>
</blockquote>
<h3 id="è¯·æ±‚é˜Ÿåˆ—"><a href="#è¯·æ±‚é˜Ÿåˆ—" class="headerlink" title="è¯·æ±‚é˜Ÿåˆ—"></a>è¯·æ±‚é˜Ÿåˆ—</h3><ol>
<li>æŠŠæ‰€æœ‰è¯·æ±‚éƒ½å¡å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼›</li>
<li>æ¯å½“ä¸€ä¸ªè¯·æ±‚è¿›å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œå…ˆæ¸…ç©ºå¹¶å–æ¶ˆï¼ˆCancelï¼‰é˜Ÿåˆ—ä¸­<strong>ç›¸åŒçš„è¯·æ±‚</strong>ï¼›</li>
<li>å½“ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼Œè¦å°†è‡ªå·±ä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼›</li>
</ol>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0ro3c0myvj30dw09udgm.jpg" alt=""></p>
<p>é‡ç‚¹åœ¨äºå¦‚ä½• <strong>å–æ¶ˆï¼ˆCancelï¼‰</strong> å·²ç»å‘é€çš„è¯·æ±‚ã€‚å®é™…ä¸Šè¿˜çœŸæœ‰ï¼ŒåŸç”Ÿçš„ XHR å°±æœ‰æä¾› abort() å¯ä»¥ä¸­æ–­è¯·æ±‚ã€‚jQuery çš„ Ajax ä¹Ÿæä¾›äº†ï¼š<a href="https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js#L82" target="_blank" rel="noopener">https://github.com/jquery/jquery/blob/master/src/ajax/xhr.js#L82</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = ajax(&#123; ... &#125;)</span><br><span class="line">xhr.abort()</span><br></pre></td></tr></table></figure>
<p>axios ä¹Ÿæä¾›äº†ç±»ä¼¼çš„APIï¼Œä¸è¿‡ç”¨èµ·æ¥æ¯”ä¸Šé¢çš„éº»çƒ¦ä¸€ç‚¹ï¼Œè¯¦æƒ…ä½¿ç”¨åœ¨åç»­çš„demoä¸­ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> axios.CancelToken(<span class="function"><span class="params">_</span> =&gt;</span> &#123; ... &#125;)</span><br></pre></td></tr></table></figure></p>
<p>è™½ç„¶å¤§éƒ¨åˆ†é¡¹ç›®å·²ç»æ˜¯é‡‡ç”¨ axiosã€fetchç­‰ç°ä»£XHRè¯·æ±‚æŠ€æœ¯äº†ã€‚ä½†è¿˜æ˜¯ç”¨ä¼ ç»Ÿçš„jQuery Ajaxæ›´å®¹æ˜“è¯´æ˜ï¼Œåæ­£åŸç†æ˜¯ä¸€æ ·çš„ï¼š</p>
<p>singeAjax.html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SingleAjax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- jquery --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// è·å–çº¯Urlï¼Œä¸åŒ…å«?åé¢çš„å‚æ•°</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> getPureUrl = <span class="function"><span class="params">url</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> index = url.indexOf(<span class="string">'?'</span>)</span></span><br><span class="line"><span class="javascript">	<span class="keyword">return</span> url.substr(<span class="number">0</span>, ~index ? index : url.length)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">//ï¼ˆæ ¸å¿ƒï¼‰ä»¥urlç›¸åŒä½œä¸ºé‡å¤æ¡ä»¶ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µç¼–å†™è‡ªå·±çš„é‡å¤æ¡ä»¶</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> SingleAjax = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ç¼“å­˜çš„é˜Ÿåˆ—</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> pending = [];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// è¿”å›å•ä¾‹æ¨¡å¼ajax</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">opts</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    	<span class="comment">// è·å–çº¯Urlï¼ˆä¸åŒ…å«?åé¢çš„å‚æ•°ï¼‰</span></span></span><br><span class="line"><span class="javascript">    	<span class="keyword">const</span> pureUrl = getPureUrl(opts.url)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ä¸­æ­¢é˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒè¯·æ±‚åœ°å€çš„xhr</span></span></span><br><span class="line"><span class="javascript">        pending.forEach(<span class="function"><span class="params">_</span> =&gt;</span> _.url === pureUrl &amp;&amp; _.xhr.abort());</span></span><br><span class="line"><span class="javascript">        <span class="comment">// è·å– success å›è°ƒå‡½æ•°</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> _success = opts.success</span></span><br><span class="line"><span class="javascript">        <span class="comment">// è£…é¥°æˆåŠŸå›è°ƒå‡½æ•°</span></span></span><br><span class="line"><span class="javascript">        opts.success = <span class="function"><span class="keyword">function</span> (<span class="params">...rest</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        	<span class="comment">// ä»é˜Ÿåˆ—è¿‡æ»¤æ‰å·²ç»æˆåŠŸçš„è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">        	pending = pending.filter(<span class="function"><span class="params">_</span> =&gt;</span> _.url != pureUrl)</span></span><br><span class="line"><span class="javascript">        	<span class="comment">// ç»§ç»­æ‰§è¡Œå®ƒçš„æˆåŠŸ</span></span></span><br><span class="line"><span class="undefined">        	_success &amp;&amp; _success(...rest)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ç§»é™¤æ‰€æœ‰ä¸­æ­¢çš„è¯·æ±‚ï¼Œå¹¶ä¸”å°†æ–°çš„è¯·æ±‚æ¨å…¥ç¼“å­˜</span></span></span><br><span class="line"><span class="javascript">        pending = [...pending.filter(<span class="function"><span class="params">_</span> =&gt;</span> _.url != pureUrl), &#123; <span class="attr">url</span>: pureUrl, <span class="attr">xhr</span>: $.ajax(opts) &#125;]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// ç”Ÿæˆå•ä¾‹ajax</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> singleAjax = <span class="keyword">new</span> SingleAjax()</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span></span><br><span class="line"><span class="undefined">    singleAjax(&#123;</span></span><br><span class="line"><span class="javascript">        url: <span class="string">"https://api.github.com/users/dragon8github"</span>,</span></span><br><span class="line"><span class="javascript">        success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å…¶å®åœ¨æˆåŠŸä¹‹åï¼Œå¯ä»¥è€ƒè™‘æ‰©å±•æŠŠæˆåŠŸçš„xhrä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œä½†å…¶å®ä¹Ÿä¸å½±å“ã€‚å·²ç»æˆåŠŸçš„xhrå°±ç®—å†æ¬¡è¢«æ‰§è¡Œabortä¹Ÿä¸ä¼šæ€ä¹ˆæ ·ï¼Œæ›´ä¸ä¼šä»200å˜æˆcannelçŠ¶æ€ï¼Œæ›´ä¸ä¼šè§¦å‘errorã€‚</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚æˆåŠŸ'</span>, data);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        error: <span class="function"><span class="keyword">function</span>(<span class="params">e, m</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">console</span>.log(<span class="string">'æ•°æ®æ¥å£è¯·æ±‚å¼‚å¸¸ï¼ˆè¯·æ”¾å¿ƒè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œç”±äºè¯·æ±‚è¢«ä¸­æ­¢Cancelï¼Œæ‰€ä»¥ä¼šå›è°ƒerrorã€‚åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹m === "abort" å³å¯ï¼Œä½ è¿˜å¯ä»¥åœ¨ abort() æ—¶åœ¨ _.xhr ä¸­åŠ å…¥ä»»æ„å±æ€§æ¥åˆ¤æ–­æ·±å…¥åˆ¤æ–­ï¼‰'</span>, e, m, m === <span class="string">"abort"</span>);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿäº†åæ¬¡é‡å¤çš„è¯·æ±‚ï¼Œå‘ç°å‰9æ¬¡éƒ½è¢«abortäº†ã€‚åªç•™ä¸‹æœ€åä¸€æ¡ã€‚</p>
<p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0rqu574qbj314m0htmz1.jpg" alt=""></p>
<p>ä¸‹é¢æ˜¯axiosçš„ç¤ºä¾‹ singeAxios:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// è¯·æ±‚é˜Ÿåˆ—</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> pending = []</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// è·å–çº¯Urlï¼Œä¸åŒ…å«?åé¢çš„å‚æ•°</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> getPureUrl = <span class="function"><span class="params">url</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> index = url.indexOf(<span class="string">'?'</span>)</span></span><br><span class="line"><span class="javascript">	<span class="keyword">return</span> url.substr(<span class="number">0</span>, ~index ? index : url.length)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span></span><br><span class="line"><span class="javascript">axios.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// è·å–çº¯Urlï¼ˆä¸åŒ…å«?åé¢çš„å‚æ•°ï¼‰</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> pureUrl = getPureUrl(config.url)</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ä¸­æ­¢é˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒè¯·æ±‚åœ°å€çš„xhr</span></span></span><br><span class="line"><span class="javascript">    pending.forEach(<span class="function"><span class="params">_</span> =&gt;</span> _.url === pureUrl &amp;&amp; _.cancel(<span class="string">'repeat abort'</span>));</span></span><br><span class="line"><span class="javascript">    <span class="comment">// é…ç½®å–æ¶ˆä»¤ç‰Œ</span></span></span><br><span class="line"><span class="javascript">    config.cancelToken = <span class="keyword">new</span> axios.CancelToken(<span class="function"><span class="params">cancel</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">       <span class="comment">// ç§»é™¤æ‰€æœ‰ä¸­æ­¢çš„è¯·æ±‚ï¼Œå¹¶ä¸”å°†æ–°çš„è¯·æ±‚æ¨å…¥ç¼“å­˜</span></span></span><br><span class="line"><span class="javascript">       pending = [...pending.filter(<span class="function"><span class="params">_</span> =&gt;</span> _.url != pureUrl), &#123; <span class="attr">url</span>: pureUrl, cancel &#125;]</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> config</span></span><br><span class="line"><span class="undefined">&#125;, error =&gt; &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span></span><br><span class="line"><span class="javascript">axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// æˆåŠŸå“åº”ä¹‹åæ¸…ç©ºé˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒUrlçš„è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">  pending = pending.filter(<span class="function"><span class="params">_</span> =&gt;</span> _.url != getPureUrl(res.config.url))</span></span><br><span class="line"><span class="javascript">  <span class="comment">// è¿”å› response</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">return</span> res</span></span><br><span class="line"><span class="undefined">&#125;, error =&gt; &#123;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span></span><br><span class="line"><span class="javascript">    axios(&#123;<span class="attr">url</span>: <span class="string">'https://api.github.com/users/dragon8github'</span>&#125;).then(<span class="built_in">console</span>.log).catch(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (_.message === <span class="string">'repeat abort'</span>) <span class="keyword">return</span> <span class="built_in">console</span>.info(_.message)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// other error handler...</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// something code...</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(_.message)</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>axios ä¹Ÿæ˜¯ä¸€æ ·é“ç†ï¼Œåªæ˜¯åšæ³•ä¸ä¸€æ ·ã€‚å‰9ä¸ªè¯·æ±‚éƒ½è¢«abortäº†ã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0rr60x3knj30y30huwfa.jpg" alt=""></p>
<p>ä¸è¿‡å¥‡æ€ªçš„æ˜¯ï¼Œå¹¶æ²¡æœ‰cancelçš„è¿‡ç¨‹ã€‚å°±åƒä»æ¥æ²¡æœ‰å‘èµ·è¯·æ±‚è¿‡ä¸€æ ·ã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0rr5yplkjj30y30hudgw.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/03/05/norepeatxhr/" data-id="cjtglyf4k004mzwvwv55ho0de" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/axios/">axios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xhr/">xhr</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Dartpub" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/21/Dartpub/" class="article-date">
  <time datetime="2019-02-21T03:22:43.000Z" itemprop="datePublished">2019-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Dart/">Dart</a>â–º<a class="article-category-link" href="/categories/Dart/Flutter/">Flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/21/Dartpub/">Dartï¼ˆFlutterï¼‰ pub åŒ…ç®¡ç†</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>Pubï¼ˆ<a href="https://pub.dartlang.org/" target="_blank" rel="noopener">https://pub.dartlang.org/</a> ï¼‰æ˜¯Googleå®˜æ–¹çš„Dart Packagesä»“åº“ï¼Œç±»ä¼¼äºnodeä¸­çš„npmä»“åº“ï¼Œandroidä¸­çš„jcenterï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„åŒ…å’Œæ’ä»¶ï¼Œä¹Ÿå¯ä»¥å‘pubå‘å¸ƒæˆ‘ä»¬çš„åŒ…å’Œæ’ä»¶ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»å¦‚ä½•å‘pubå‘å¸ƒæˆ‘ä»¬çš„åŒ…å’Œæ’ä»¶ã€‚</p>
<h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªæ˜¾ç¤ºéšæœºå­—ç¬¦ä¸²çš„widgetã€‚æœ‰ä¸€ä¸ªåä¸ºâ€œenglish_wordsâ€çš„å¼€æºè½¯ä»¶åŒ…ï¼Œå…¶ä¸­åŒ…å«æ•°åƒä¸ªå¸¸ç”¨çš„è‹±æ–‡å•è¯ä»¥åŠä¸€äº›å®ç”¨åŠŸèƒ½ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨pubä¸Šæ‰¾åˆ°english_wordsè¿™ä¸ªåŒ…ï¼Œç¡®å®šå…¶æœ€æ–°çš„ç‰ˆæœ¬å·å’Œæ˜¯å¦æ”¯æŒFlutterã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0duqg9p60j30y105e0ta.jpg" alt="english_words"></p>
<p>æˆ‘ä»¬çœ‹åˆ°â€œenglish_wordsâ€åŒ…æœ€æ–°çš„ç‰ˆæœ¬æ˜¯3.1.3ï¼Œå¹¶ä¸”æ”¯æŒflutterï¼Œæ¥ä¸‹æ¥ï¼š</p>
<p>å°†english_wordsï¼ˆ3.1.3ç‰ˆæœ¬ï¼‰æ·»åŠ åˆ°ä¾èµ–é¡¹åˆ—è¡¨ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line"><span class="attr">  flutter:</span></span><br><span class="line"><span class="attr">    sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  cupertino_icons:</span> <span class="string">^0.1.0</span></span><br><span class="line">  <span class="comment"># æ–°æ·»åŠ çš„ä¾èµ–</span></span><br><span class="line"><span class="attr">  english_words:</span> <span class="string">^3.1.3</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‹è½½åŒ…"><a href="#ä¸‹è½½åŒ…" class="headerlink" title="ä¸‹è½½åŒ…"></a>ä¸‹è½½åŒ…</h3><p>åœ¨Android Studioçš„ç¼–è¾‘å™¨è§†å›¾ä¸­æŸ¥çœ‹pubspec.yamlæ—¶ï¼Œå•å‡»å³ä¸Šè§’çš„ Packages get ã€‚<br><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0dur11rqtj30dp0a8ab5.jpg" alt="Packages get"></p>
<p>è¿™ä¼šå°†ä¾èµ–åŒ…å®‰è£…åˆ°æ‚¨çš„é¡¹ç›®ã€‚æ‚¨å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter packages get</span><br><span class="line">Running &quot;flutter packages get&quot; in flutter_in_action...</span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>1ã€å¼•å…¥english_wordsåŒ…<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:english_words/english_words.dart'</span>;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨è¾“å…¥æ—¶ï¼Œå¯¼å…¥åè¯¥è¡Œä»£ç å°†ä¼šæ˜¾ç¤ºä¸ºç°è‰²ï¼Œè¯·æ”¾å¿ƒï¼Œè¿™å¹¶ä¸ä¸€å®šæ˜¯å®‰è£…å¤±è´¥å¯¼è‡´çš„ã€‚å®ƒè¡¨ç¤ºå¯¼å…¥çš„åº“å°šæœªä½¿ç”¨ã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0dvh5ytdej30hd030t8r.jpg" alt="import &#39;package:english_words/english_words.dart&#39;;"></p>
<p>2ã€ä½¿ç”¨english_wordsåŒ…æ¥ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ã€‚<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RandomWordsWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">final</span> wordPair = <span class="keyword">new</span> WordPair.random();</span><br><span class="line">    <span class="keyword">return</span> Padding(</span><br><span class="line">      padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">      child: <span class="keyword">new</span> Text(wordPair.toString()),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3ã€æˆ‘ä»¬å°† RandomWordsWidget æ·»åŠ åˆ°â€è®¡æ•°å™¨â€ç¤ºä¾‹çš„é¦–é¡µMyHomePage çš„Columnçš„å­widgetä¸­ã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0dvh87tibj30oy0oktay.jpg" alt="RandomWordsWidget"></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0dvhap38oj30cr0mstai.jpg" alt="RandomWordsWidget"></p>
<h2 id="çƒ­æ›´æ–°"><a href="#çƒ­æ›´æ–°" class="headerlink" title="çƒ­æ›´æ–°"></a>çƒ­æ›´æ–°</h2><p>å¦‚æœåº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œè¯·ä½¿ç”¨çƒ­é‡è½½æŒ‰é’®ã€âš¡ã€‘æ›´æ–°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚æ¯æ¬¡å•å‡»çƒ­é‡è½½æˆ–ä¿å­˜é¡¹ç›®æ—¶ï¼Œéƒ½ä¼šåœ¨æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­éšæœºé€‰æ‹©ä¸åŒçš„å•è¯å¯¹ã€‚ è¿™æ˜¯å› ä¸ºå•è¯å¯¹æ˜¯åœ¨ build æ–¹æ³•å†…éƒ¨ç”Ÿæˆçš„ã€‚æ¯æ¬¡çƒ­æ›´æ–°æ—¶ï¼Œbuildæ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0dvhib782j30nx02bq2x.jpg" alt="âš¡"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/02/21/Dartpub/" data-id="cjtglyf200005zwvwcj2lrbjq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dart/">Dart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pub/">pub</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-DartWeb" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/20/DartWeb/" class="article-date">
  <time datetime="2019-02-20T09:41:10.000Z" itemprop="datePublished">2019-02-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Dart/">Dart</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/20/DartWeb/">Dart for the web  ä¸€å°æ—¶å…¥é—¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>

<p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://webdev.dartlang.org/guides/get-started" target="_blank" rel="noopener">https://webdev.dartlang.org/guides/get-started</a></p>
<h4 id="1ã€Dart-window-å®‰è£…"><a href="#1ã€Dart-window-å®‰è£…" class="headerlink" title="1ã€Dart-window å®‰è£…"></a>1ã€Dart-window å®‰è£…</h4><p><a href="http://www.gekorm.com/dart-windows/" target="_blank" rel="noopener">http://www.gekorm.com/dart-windows/</a></p>
<h4 id="2ã€å®‰è£…å¼€å‘å·¥å…·-webstorm"><a href="#2ã€å®‰è£…å¼€å‘å·¥å…·-webstorm" class="headerlink" title="2ã€å®‰è£…å¼€å‘å·¥å…· webstorm"></a>2ã€å®‰è£…å¼€å‘å·¥å…· webstorm</h4><p><a href="https://webdev.dartlang.org/tools/webstorm" target="_blank" rel="noopener">https://webdev.dartlang.org/tools/webstorm</a></p>
<h4 id="3ã€å®‰è£…ä½¿ç”¨-pub-å®‰è£…ä¸¤ä¸ªå¿…å¤‡æ’ä»¶ï¼šactivateï¼Œwebdev"><a href="#3ã€å®‰è£…ä½¿ç”¨-pub-å®‰è£…ä¸¤ä¸ªå¿…å¤‡æ’ä»¶ï¼šactivateï¼Œwebdev" class="headerlink" title="3ã€å®‰è£…ä½¿ç”¨ pub å®‰è£…ä¸¤ä¸ªå¿…å¤‡æ’ä»¶ï¼šactivateï¼Œwebdev"></a>3ã€å®‰è£…ä½¿ç”¨ pub å®‰è£…ä¸¤ä¸ªå¿…å¤‡æ’ä»¶ï¼šactivateï¼Œwebdev</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; pub global activate webdev</span><br><span class="line">&gt; pub global activate stagehand</span><br></pre></td></tr></table></figure>
<h4 id="4ã€æ–°å»ºä¸€ä¸ªDarté¡¹ç›®"><a href="#4ã€æ–°å»ºä¸€ä¸ªDarté¡¹ç›®" class="headerlink" title="4ã€æ–°å»ºä¸€ä¸ªDarté¡¹ç›®"></a>4ã€æ–°å»ºä¸€ä¸ªDarté¡¹ç›®</h4><p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0d0u82axpj30r00gwjsm.jpg" alt="Create Dart"></p>
<h4 id="5ã€å¯åŠ¨åº”ç”¨ç¨‹åº"><a href="#5ã€å¯åŠ¨åº”ç”¨ç¨‹åº" class="headerlink" title="5ã€å¯åŠ¨åº”ç”¨ç¨‹åº"></a>5ã€å¯åŠ¨åº”ç”¨ç¨‹åº</h4><p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0d0yt2xluj30ps0m1q5g.jpg" alt="Run &#39;index.html&#39;"></p>
<p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0d0yuv7wqj30k207d74n.jpg" alt="Serving `web` on http://localhost:53322"></p>
<p><img src="http://wx3.sinaimg.cn/large/006ar8zggy1g0d0ywnt0lj313n04zaa8.jpg" alt="Your Dart app is running."></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/02/20/DartWeb/" data-id="cjtglyf1u0001zwvwn1igzie5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dart/">Dart</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/20/åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ/" class="article-date">
  <time datetime="2019-02-20T08:08:58.000Z" itemprop="datePublished">2019-02-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/flutter/">flutter</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/20/åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ/">åœ¨ Windows ä¸Šæ­å»º Flutter å¼€å‘ç¯å¢ƒ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><hr><br>1ã€è·å–Flutter SDKï¼š<a href="https://flutter.io/sdk-archive/#windows" target="_blank" rel="noopener">https://flutter.io/sdk-archive/#windows</a></p>
<p>2ã€è§£å‹ <strong>flutter_windows_v1.0.0-stable.zip</strong>ï¼Œå¹¶å°† flutter/bin åŠ å…¥åˆ°ç¯å¢ƒå˜é‡</p>
<p>3ã€å®‰è£…Android Studio ï¼š<a href="https://developer.android.google.cn" target="_blank" rel="noopener">https://developer.android.google.cn</a></p>
<p>4ã€åœ¨ Android Studio çš„ <strong>Browse repositories</strong> å®‰è£… <strong>Flutter</strong> å’Œ <strong>Dart</strong> æ’ä»¶</p>
<ul>
<li>Flutteræ’ä»¶ï¼š æ”¯æŒFlutterå¼€å‘å·¥ä½œæµ (è¿è¡Œã€è°ƒè¯•ã€çƒ­é‡è½½ç­‰)ã€‚</li>
<li>Dartæ’ä»¶ï¼š æä¾›ä»£ç åˆ†æ (è¾“å…¥ä»£ç æ—¶è¿›è¡ŒéªŒè¯ã€ä»£ç è¡¥å…¨ç­‰)ã€‚</li>
</ul>
<p>æ¬¢è¿é¡µ -&gt; configure -&gt; Plugins -&gt; Browse repositoriesâ€¦ -&gt; Search</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cy57wy3qj30mr0ng3zw.jpg" alt="configure"></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cy5amfb5j30ru0nttac.jpg" alt="Plugins"></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cy5d3o4xj30so0o20v9.jpg" alt="Browse repositories..."></p>
<p>5ã€å®‰è£…å®Œ flutter æ’ä»¶åï¼Œé‡å¯ä¸€ä¸‹Android Studioï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æ–°å»º flutter æ¨¡æ¿äº†ã€‚</p>
<p>æ¬¢è¿é¡µ -&gt; Start a new Flutter project -&gt; Flutter application -&gt; è¾“å…¥é¡¹ç›®åç§°å’Œé€‰æ‹©flutterçš„sdkç›®å½• -&gt; finish</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cyaijpcwj30mu0i3q3y.jpg" alt="Start a new Flutter project"></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cyie6pehj30ru0nn3zo.jpg" alt="Flutter application"></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cyigbo29j30ru0nn75k.jpg" alt="flutter sdk "></p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cyij36rtj30ru0nnjsk.jpg" alt="finish"></p>
<p>6ã€è¿è¡Œåº”ç”¨ç¨‹åº</p>
<p><img src="http://wx4.sinaimg.cn/large/006ar8zggy1g0cyqjwvnkj313n0q7wka.jpg" alt="Flutter Demo Home Page"></p>
<hr>
<p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p>
<h5 id="0-ä»»ä½•è®¿é—®ä¸äº†ç½‘ç«™ï¼Œè‡ªåŠ¨å®‰è£…å¤±è´¥ã€ä¸‹è½½å¤±è´¥ç­‰ç½‘ç»œé—®é¢˜ï¼Œè‡ªå·±æƒ³åŠæ³•ævpn-fqã€‚"><a href="#0-ä»»ä½•è®¿é—®ä¸äº†ç½‘ç«™ï¼Œè‡ªåŠ¨å®‰è£…å¤±è´¥ã€ä¸‹è½½å¤±è´¥ç­‰ç½‘ç»œé—®é¢˜ï¼Œè‡ªå·±æƒ³åŠæ³•ævpn-fqã€‚" class="headerlink" title="0. ä»»ä½•è®¿é—®ä¸äº†ç½‘ç«™ï¼Œè‡ªåŠ¨å®‰è£…å¤±è´¥ã€ä¸‹è½½å¤±è´¥ç­‰ç½‘ç»œé—®é¢˜ï¼Œè‡ªå·±æƒ³åŠæ³•ævpn fqã€‚"></a>0. ä»»ä½•è®¿é—®ä¸äº†ç½‘ç«™ï¼Œè‡ªåŠ¨å®‰è£…å¤±è´¥ã€ä¸‹è½½å¤±è´¥ç­‰ç½‘ç»œé—®é¢˜ï¼Œè‡ªå·±æƒ³åŠæ³•ævpn fqã€‚</h5><ul>
<li><p><a href="https://www.cnblogs.com/CyLee/p/10401766.html" target="_blank" rel="noopener">é˜¿é‡Œäº‘ é¦™æ¸¯æœåŠ¡å™¨ Centos7 3åˆ†é’Ÿæå®švpn</a></p>
</li>
<li><p><a href="https://dc.36fy.com/" target="_blank" rel="noopener">åŠ é€Ÿåº¦</a></p>
</li>
</ul>
<h5 id="1-å¯åŠ¨Android-Studioæ—¶ï¼Œå‡ºç°â€œUnable-to-access-Android-SDK-add-on-listâ€"><a href="#1-å¯åŠ¨Android-Studioæ—¶ï¼Œå‡ºç°â€œUnable-to-access-Android-SDK-add-on-listâ€" class="headerlink" title="1. å¯åŠ¨Android Studioæ—¶ï¼Œå‡ºç°â€œUnable to access Android SDK add-on listâ€"></a>1. å¯åŠ¨Android Studioæ—¶ï¼Œå‡ºç°â€œUnable to access Android SDK add-on listâ€</h5><p>ç‚¹å‡» <strong>â€œCancelâ€</strong>ï¼Œ ç¨åå†æ ¹æ®æŒ‡å¼•ï¼Œè‡ªåŠ¨å®‰è£…å³å¯ã€‚</p>
<h5 id="2-å…¶ä»–å¸¸è§é…ç½®é—®é¢˜"><a href="#2-å…¶ä»–å¸¸è§é…ç½®é—®é¢˜" class="headerlink" title="2. å…¶ä»–å¸¸è§é…ç½®é—®é¢˜"></a>2. å…¶ä»–å¸¸è§é…ç½®é—®é¢˜</h5><p><a href="https://book.flutterchina.club/chapter1/configuration.html" target="_blank" rel="noopener">https://book.flutterchina.club/chapter1/configuration.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/02/20/åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ/" data-id="cjtglyf4z004szwvwv50e1o3l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/">flutter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aliyun" class="article is-index article-post article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/19/aliyun/" class="article-date">
  <time datetime="2019-02-19T08:26:24.000Z" itemprop="datePublished">2019-02-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/centos/">centos</a>â–º<a class="article-category-link" href="/categories/centos/vpn/">vpn</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/19/aliyun/">é˜¿é‡Œäº‘ é¦™æ¸¯æœåŠ¡å™¨ Centos7 3åˆ†é’Ÿæå®švpn</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>


<p>æ•™ç¨‹ä¼ é€é—¨ï¼š<br><a href="https://blog.csdn.net/ztx114/article/details/80423705" target="_blank" rel="noopener">é˜¿é‡Œäº‘ä¸»æœºæ­å»ºVPNæœåŠ¡</a><br><a href="https://my.oschina.net/imcf/blog/659230" target="_blank" rel="noopener">åœ¨å…è´¹EC2ä¸Šæ­å»ºè‡ªå·±çš„VPN</a></p>
<h4 id="1ã€å®‰è£…python-å’Œ-Pip"><a href="#1ã€å®‰è£…python-å’Œ-Pip" class="headerlink" title="1ã€å®‰è£…python å’Œ Pip"></a>1ã€å®‰è£…python å’Œ Pip</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install python-setuptools &amp;&amp; easy_install pip</span><br></pre></td></tr></table></figure>
<h4 id="2ã€å®‰è£…-shadowsocks"><a href="#2ã€å®‰è£…-shadowsocks" class="headerlink" title="2ã€å®‰è£… shadowsocks"></a>2ã€å®‰è£… shadowsocks</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install shadowsocks</span><br></pre></td></tr></table></figure>
<h4 id="3ã€æ·»åŠ -shadowsocks-çš„é…ç½®æ–‡ä»¶"><a href="#3ã€æ·»åŠ -shadowsocks-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€æ·»åŠ  shadowsocks çš„é…ç½®æ–‡ä»¶"></a>3ã€æ·»åŠ  shadowsocks çš„é…ç½®æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/shadowsocks.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;server&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;server_port&quot;: 443,</span><br><span class="line">    &quot;local_address&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;local_port&quot;: 1080,</span><br><span class="line">    &quot;password&quot;: &quot;daweiyixiangshihao&quot;,</span><br><span class="line">    &quot;timeout&quot;: 300,</span><br><span class="line">    &quot;method&quot;: &quot;aes-256-cfb&quot;,</span><br><span class="line">    &quot;fast_open&quot;: false,</span><br><span class="line">    &quot;workers&quot;: 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>server_portï¼šæ˜¯å¼€æ”¾ç«¯å£ï¼Œé˜¿é‡Œäº‘é»˜è®¤å¼€æ”¾äº†443;</li>
<li>passwordï¼šæ˜¯è¿æ¥å¯†ç ;</li>
<li>serverï¼šå°±æ˜¯æœ¬æœºï¼Œä¿æŒ0.0.0.0 å³å¯;</li>
<li>methodï¼šæ˜¯ä¼ è¾“æ–¹å¼ï¼Œä¿æŒâ€aes-256-cfbâ€ å³å¯;</li>
</ul>
<h4 id="4ã€å¯åŠ¨-shadowsocks-æœåŠ¡"><a href="#4ã€å¯åŠ¨-shadowsocks-æœåŠ¡" class="headerlink" title="4ã€å¯åŠ¨ shadowsocks æœåŠ¡"></a>4ã€å¯åŠ¨ shadowsocks æœåŠ¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssserver -c /etc/shadowsocks.json -d start</span><br></pre></td></tr></table></figure>
<h4 id="5ã€å…³é—­é˜²ç«å¢™"><a href="#5ã€å…³é—­é˜²ç«å¢™" class="headerlink" title="5ã€å…³é—­é˜²ç«å¢™"></a>5ã€å…³é—­é˜²ç«å¢™</h4><p>CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ã€‚éœ€è¦ä½¿ç”¨å‘½ä»¤å…³é—­é˜²ç«å¢™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ä»£ç†ã€‚</p>
<p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€å‘½ä»¤ï¼šfirewall-cmd â€“state</p>
<p>åœæ­¢firewallå‘½ä»¤ï¼šsystemctl stop firewalld.service</p>
<p>ç¦æ­¢firewallå¼€æœºå¯åŠ¨å‘½ä»¤ï¼šsystemctl disable firewalld.service</p>
<h4 id="6ã€æœ¬æœºä¸‹è½½-shadowsocks-exe"><a href="#6ã€æœ¬æœºä¸‹è½½-shadowsocks-exe" class="headerlink" title="6ã€æœ¬æœºä¸‹è½½  shadowsocks.exe"></a>6ã€æœ¬æœºä¸‹è½½  shadowsocks.exe</h4><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/17y-v40jPGIHcftuE7gGiEA" target="_blank" rel="noopener">https://pan.baidu.com/s/17y-v40jPGIHcftuE7gGiEA</a><br>æå–ç ï¼š5gzb </p>
<h4 id="7ã€é…ç½®-shadowsocks-exe"><a href="#7ã€é…ç½®-shadowsocks-exe" class="headerlink" title="7ã€é…ç½® shadowsocks.exe"></a>7ã€é…ç½® shadowsocks.exe</h4><p><img src="/2019/02/19/aliyun/1.png" alt=""></p>
<h4 id="8ã€è®¿é—®google-com-æµ‹è¯•"><a href="#8ã€è®¿é—®google-com-æµ‹è¯•" class="headerlink" title="8ã€è®¿é—®google.com æµ‹è¯•"></a>8ã€è®¿é—®google.com æµ‹è¯•</h4><p><img src="/2019/02/19/aliyun/2.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://cylee.top/2019/02/19/aliyun/" data-id="cjtglyf2r0016zwvwjcb2gtav" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aliyun/">aliyun</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/centos/">centos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vpn/">vpn</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget widget-category">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Dart/">Dart</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Dart/Flutter/">Flutter</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/video/">video</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/video/MP4/">MP4</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos/">centos</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/centos/Nodejs/">Nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/centos/vpn/">vpn</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cpmposer/">cpmposer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/npm/">npm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/php/laravel/">laravel</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ssr/">ssr</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/xhr/">xhr</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç¢ç‰‡åŒ–/">ç¢ç‰‡åŒ–</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ç¢ç‰‡åŒ–/ç»éªŒ/">ç»éªŒ</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget widget-tag">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dart/">Dart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MP4/">MP4</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aliyun/">aliyun</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cpmposer/">cpmposer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flutter/">flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/">laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pub/">pub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssr/">ssr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/video/">video</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/">vpn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xhr/">xhr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¢ç‰‡åŒ–/">ç¢ç‰‡åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç»éªŒ/">ç»éªŒ</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget widget-posts">
      <ul>
        
          <li>
            <a href="/2019/03/20/npmpublish/">npm å‘å¸ƒåŒ…å’Œåˆ é™¤åŒ…ï¼ˆ2019æœ€æ–°æ”»ç•¥ï¼‰</a>
          </li>
        
          <li>
            <a href="/2019/03/12/flutterdebuger/">flutter Android debuger</a>
          </li>
        
          <li>
            <a href="/2019/03/10/androidssr/">androidssr</a>
          </li>
        
          <li>
            <a href="/2019/03/06/requestjs/">è¯·æ±‚ç¼“å­˜ç­–ç•¥</a>
          </li>
        
          <li>
            <a href="/2019/03/05/bibaoIIFE/">å–„ç”¨ JavaScript ç‰¹æ€§ï¼šé—­åŒ…ä¸IIFE</a>
          </li>
        
          <li>
            <a href="/2019/03/05/norepeatxhr/">æ›´ä¼˜é›…çš„é˜²æ­¢è¯·æ±‚(XHR)é‡å¤ â€”â€” è¯·æ±‚é˜Ÿåˆ—</a>
          </li>
        
          <li>
            <a href="/2019/02/21/Dartpub/">Dartï¼ˆFlutterï¼‰ pub åŒ…ç®¡ç†</a>
          </li>
        
          <li>
            <a href="/2019/02/20/DartWeb/">Dart for the web  ä¸€å°æ—¶å…¥é—¨</a>
          </li>
        
          <li>
            <a href="/2019/02/20/åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ/">åœ¨ Windows ä¸Šæ­å»º Flutter å¼€å‘ç¯å¢ƒ</a>
          </li>
        
          <li>
            <a href="/2019/02/19/aliyun/">é˜¿é‡Œäº‘ é¦™æ¸¯æœåŠ¡å™¨ Centos7 3åˆ†é’Ÿæå®švpn</a>
          </li>
        
          <li>
            <a href="/2019/02/11/Dockeræ¯å¤©äº”åˆ†é’Ÿ8/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å…«ï¼šDockerfile ä¸­çš„å‘½ä»¤ä¸‰å…„è´µ</a>
          </li>
        
          <li>
            <a href="/2019/02/04/ç¢ç‰‡åŒ–ç»éªŒå¹¿åœº/">ç¢ç‰‡åŒ–ç»éªŒå¹¿åœº</a>
          </li>
        
          <li>
            <a href="/2019/02/03/Dockeræ¯å¤©äº”åˆ†é’Ÿ7/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸ƒï¼šè°ƒè¯• dockerfile</a>
          </li>
        
          <li>
            <a href="/2019/02/02/Dockeræ¯å¤©äº”åˆ†é’Ÿ6/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å…­ï¼šç¬¬ä¸€ä¸ª Dockerfile</a>
          </li>
        
          <li>
            <a href="/2019/02/02/Dockeræ¯å¤©äº”åˆ†é’Ÿ5/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹äº”ï¼šdocker commit åˆ¶ä½œé•œåƒ</a>
          </li>
        
          <li>
            <a href="/2019/02/01/ç¢ç‰‡åŒ–çŸ¥è¯†å¹¿åœº/">ç¢ç‰‡åŒ–çŸ¥è¯†å¹¿åœº</a>
          </li>
        
          <li>
            <a href="/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ4/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å››ï¼šå¸¸ç”¨api</a>
          </li>
        
          <li>
            <a href="/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ3/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸‰ï¼šhello-worldã€åˆè¯†dockerfile</a>
          </li>
        
          <li>
            <a href="/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ2/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹äºŒï¼šåˆ‡æ¢ DaoCloud é•œåƒæº</a>
          </li>
        
          <li>
            <a href="/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ1/">ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸€ï¼šå¯åŠ¨ç¬¬ä¸€ä¸ªhttpdå®¹å™¨</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget widget-tagcloud">
      <a href="/tags/Dart/" style="font-size: 13.33px;">Dart</a> <a href="/tags/Docker/" style="font-size: 20px;">Docker</a> <a href="/tags/Flutter/" style="font-size: 10px;">Flutter</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 13.33px;">JavaScript</a> <a href="/tags/MP4/" style="font-size: 10px;">MP4</a> <a href="/tags/Nodejs/" style="font-size: 10px;">Nodejs</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/aliyun/" style="font-size: 10px;">aliyun</a> <a href="/tags/axios/" style="font-size: 13.33px;">axios</a> <a href="/tags/centos/" style="font-size: 16.67px;">centos</a> <a href="/tags/cpmposer/" style="font-size: 13.33px;">cpmposer</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/flutter/" style="font-size: 13.33px;">flutter</a> <a href="/tags/hexo/" style="font-size: 13.33px;">hexo</a> <a href="/tags/laravel/" style="font-size: 16.67px;">laravel</a> <a href="/tags/nginx/" style="font-size: 13.33px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/php/" style="font-size: 20px;">php</a> <a href="/tags/pub/" style="font-size: 10px;">pub</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/ssr/" style="font-size: 10px;">ssr</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/vpn/" style="font-size: 10px;">vpn</a> <a href="/tags/xhr/" style="font-size: 10px;">xhr</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/ç¢ç‰‡åŒ–/" style="font-size: 10px;">ç¢ç‰‡åŒ–</a> <a href="/tags/ç»éªŒ/" style="font-size: 10px;">ç»éªŒ</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget widget-archives">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <canvas class="fireworks" style="position: fixed; left: 0px; top: 0px; z-index: 1; pointer-events: none;" width="2880" height="832"></canvas>

<footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 è´å°”å¡”çŒ«<br>
      Powered by <a href="http://www.baidu.comhttp://cylee.top" target="_blank">cylee.top</a>

      <div class="fr js-go-top">æŒ‰ä¸‹ [Home] é”®è¿”å›é¡¶éƒ¨</div>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.nicescroll/3.7.6/jquery.nicescroll.min.js"></script>
<script src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/Lee.js"></script>



  </div>
</body>
</html>