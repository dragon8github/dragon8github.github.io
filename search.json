[{"title":"npm å‘å¸ƒåŒ…å’Œåˆ é™¤åŒ…ï¼ˆ2019æœ€æ–°æ”»ç•¥ï¼‰","url":"/2019/03/20/npmpublish/","content":"\n<hr>\n> ğŸ“– é˜…è¯»æœ¬æ–‡å¤§æ¦‚éœ€è¦ 6 åˆ†é’Ÿã€‚\n\n### æ“ä½œæ¦‚è§ˆ\n1. éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤ã€‚\n2. npm å®˜ç½‘æ³¨å†Œè´¦å·ï¼ˆç•¥ï¼‰ã€‚\n3. npm init åˆå§‹åŒ–ä½ çš„åŒ…ã€‚\n4. å‘å¸ƒ npm publishã€‚\n5. å¦‚ä½•å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Ÿ\n6. å¦‚ä½•åˆ é™¤ä½ çš„å‘å¸ƒåŒ…ï¼Ÿ\n7. ä»€ä¹ˆæ˜¯ 2FAï¼Ÿä»€ä¹ˆæ˜¯ Authenticator Appï¼Ÿä»€ä¹ˆæ˜¯ One-time Passwordï¼Ÿ\n8. ï¼ˆåè®°ï¼‰è¡¥å……è¯´æ˜\n\n<!--more--> \n\n#### ä¸€ã€éªŒè¯ä½ çš„åŒ…åæ˜¯å¦é‡å¤\n\næœ‰ä¸¤ç§æ–¹æ¡ˆï¼š\n\nï¼ˆæ¨èï¼‰1ã€ç›´æ¥ä¸Š [npmjs.com](https://www.npmjs.com/) å®˜ç½‘æœç´¢\n\n![](http://wx1.sinaimg.cn/large/006ar8zggy1g18zx67djmj30ry075756.jpg)\n\n2ã€ä¹Ÿå¯ä»¥ç”¨ä¸€äº›å·¥å…·åº“æŸ¥æ‰¾ï¼Œè™½ç„¶æœ‰ç‚¹ç”»è›‡æ·»è¶³ï¼Œä½†æŸäº›åœºæ™¯è¿˜æ˜¯é€‚ç”¨çš„ã€‚æ¯”å¦‚åŠ¨æ€å‘å¸ƒåŒ…ã€‚\n\n- [npm-name-cli](https://github.com/sindresorhus/npm-name-cli)\n\n![](https://github.com/sindresorhus/npm-name-cli/raw/master/screenshot.gif)\n\n\n---\n\n> äºŒã€[npm å®˜ç½‘](https://www.npmjs.com/login)æ³¨å†Œè´¦å·ï¼ˆç•¥ï¼‰\n\n\n---\n\n#### ä¸‰ã€npm init åˆå§‹åŒ–ä½ çš„åŒ…ã€‚\n\n```bash\n$ npm init -y\n```\n\n#### package.json\n\né‡ç‚¹å…³æ³¨å’Œä¿®æ”¹ä»¥ä¸‹ä¸‰é¡¹ï¼š\n\n- nameï¼šä½ çš„åŒ…å\n- versionï¼šï¼ˆæ¨èï¼‰ç”¨ jQuery çš„ç‰ˆæœ¬è§„èŒƒï¼š**0.0.1**\n- mainï¼šä½ çš„å…¥å£æ–‡ä»¶\n\n```json\n{\n  \"name\": \"chuanghui-vue-portal\",\n  \"version\": \"0.0.1\",\n  \"main\": \"src/components/chuanghui-portal.vue\",\n  \"description\": \"ChuangHui Vue Components\",\n  \"author\": \"lizhaohong <928532756@qq.com>\"\n}\n```\n\n#### å››ã€å‘å¸ƒ npm publish\n\nå…ˆæ·»åŠ  npm è´¦å·\n```bash\n$ npm adduser \nUsername: ...\nPassword: ...\nEmail: (this IS public) 928532756@qq.com\nLogged in as cylee on https://registry.npmjs.org/.\n```\n\n![](http://wx3.sinaimg.cn/large/006ar8zggy1g19101gkfzj30g003m0sr.jpg)\n\næ­£å¼å‘å¸ƒï¼Œå°±ä¸€å¥è¯ã€‚\n\n```\n$ npm publish\n```\n\næ­£å¸¸çš„è¯ï¼Œåœ¨ npm ä¸ªäºº package é¡µé¢ä¸­å¯ä»¥çœ‹åˆ°ä¸Šä¼ çš„åŒ…ï¼š\n\n![](http://wx1.sinaimg.cn/large/006ar8zggy1g1911ff0s4j31h20fdwgp.jpg)\n\n#### äº”ã€è¿­ä»£æ–°ç‰ˆæœ¬\n\nåªéœ€è¦æŠŠä½  `package.json` çš„ `version` ç‰ˆæœ¬å·æ”¹å˜ï¼Œå¦‚ **0.0.1 -> 0.0.2**ï¼Œå†æ‰§è¡Œ `$ npm publish` å³å¯ã€‚\n\n\n---\n\n\n#### å…­ã€åˆ é™¤å‘å¸ƒåŒ…\n\n> å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æœ‰å¼ºè¿«ç—‡ï¼Œä»…ä»…æ˜¯ä¿®å¤ä¸€ä¸ª bug å°±è¦æŠŠç‰ˆæœ¬å·ä» 0.0.1 å‡çº§åˆ° 0.02ã€‚\n>\n> å¿ƒé‡Œè‚¯å®šå¾ˆçº ç»“ï¼Œæ›´å¤šçš„å¯èƒ½æ˜¯é€‰æ‹©åˆ æ‰åŒ…é‡æ–°ä¸Šä¼ ã€‚\n\nç½‘ä¸Šä»‹ç»åˆ é™¤å‘å¸ƒåŒ…çš„æ–¹æ³•å€’ä¹Ÿç®€å•ã€‚æ‰§è¡Œä»¥ä¸‹å³å¯ï¼š\n\n```bash\n$ npm unpublish --force\n```\n\nä½†ä½ å¯èƒ½å‡ºç° `ERRï¼š2FA` ä¹‹ç±»çš„é”™è¯¯ä¿¡æ¯ï¼Ÿé‚£ä½ å¯èƒ½è¦å…ˆè¿›è¡Œä¸€å¤§å †è®¾ç½®äº†ï¼Œçœ‹ä¸‹å»å§ã€‚\n\n#### ä¸ƒã€ä»€ä¹ˆæ˜¯ 2FAï¼Ÿä»€ä¹ˆæ˜¯ Authenticator Appï¼Ÿä»€ä¹ˆæ˜¯ One-time Passwordï¼Ÿ\n\nç®€å•æ¦‚æ‹¬ï¼š\n- **2FA**ï¼š NPM å‘å¸ƒåŒ…ç®¡ç†çš„æƒé™è®¾ç½®ï¼Œå¯ä»¥åœ¨ NPM åå°é…ç½®ï¼›\n- **Authenticator App**ï¼šæ˜¯å¾®è½¯ Microsoft å‡ºå“çš„ä¸€æ¬¾å®æ—¶å¯†ç Appï¼Œè¯·è‡ªè¡Œåˆ°Appå•†åº—æœç´¢ä¸‹è½½ï¼›\n- **One-time Password**ï¼šAuthenticator App è¾“å‡ºçš„å®æ—¶å¯†ç ã€‚\n\nå…·ä½“è®¾ç½®æ­¥éª¤ï¼š[å®˜æ–¹æ•™ç¨‹](https://docs.npmjs.com/configuring-two-factor-authentication)\n\n1ã€åˆ° App å•†åº—æœç´¢å¹¶ä¸”ä¸‹è½½ Microsoft Authenticator App.\n\n\n2ã€è¿›å…¥ npm åå°ï¼Œæ‰¾åˆ°å¦‚å›¾æ‰€ç¤ºï¼š\n![](http://wx3.sinaimg.cn/large/006ar8zggy1g191w9ghp3j318n0myacc.jpg)\n\n3ã€é€‰æ‹© [Authorization and Publishing] - [submit]\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g191xx4oacj30gt0nidh6.jpg)\n\n4ã€æ‰“å¼€ Authenticator Appï¼Œé€‰æ‹© â€œæ·»åŠ è´¦æˆ·â€ - â€œå…¶ä»–è´¦æˆ·ï¼ˆGoogleã€Facebook ç­‰ï¼‰â€\n\n![](http://wx3.sinaimg.cn/large/006ar8zggy1g192bkruiyj30cd09ydh9.jpg)\n\n5ã€æ‰«æ `æ­¥éª¤3` åçš„äºŒç»´ç ã€‚\n\n6ã€ä½“éªŒ  One-time Passwordã€‚å¦‚å›¾æ‰€ç¤º\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g192dhbrgyj30c106sq3w.jpg)\n\n7ã€ä½¿ç”¨ One-time Password åˆ é™¤å‘å¸ƒåŒ…ã€‚éœ€è¦åŠ ä¸Š --otp <One-time Password>\n\n```bash\n$ npm unpublish chuanghui-portal --force --otp 863613\n```\n\n#### å…«ã€ï¼ˆåè®°ï¼‰\n\nå¼€é€šäº† 2FA ä»¥åï¼Œä½ çš„è´¦å·å‘å¸ƒåŒ…`$ npm publish` éƒ½æ˜¯éœ€è¦ä½¿ç”¨ One-Time Passwordçš„ã€‚\n\n```bash\n$ npm publish --otp 863613\n```","tags":["npm","nodejs"],"categories":["npm"]},{"title":"flutter Android debuger","url":"/2019/03/12/flutterdebuger/","content":"\n<hr>\n\næ“ä½œé¢„è§ˆï¼š\n1. å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹ï¼›\n2. ä½¿ç”¨ `flutter devices` æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°ï¼›\n3. åœ¨ `Android studio` ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡» `[debug]`ï¼›\n4. çœŸæœºè‡ªåŠ¨å®‰è£…Appã€‚\n\n<!--more--> \n\n#### ä¸€ã€å‡†å¤‡ä¸€æ¡æ•°æ®çº¿ï¼Œå¹¶è¿æ¥ç”µè„‘å’Œæ‰‹æœº\n\n> æ³¨æ„ï¼šåˆ‡è®°ä¸æ˜¯å……ç”µçº¿\n\nå¦‚æœæ­£å¸¸è¿æ¥æˆåŠŸï¼Œä½ çš„æ‰‹æœºå’Œç”µè„‘éƒ½æœ‰æç¤ºã€‚æ³¨æ„æ‰‹æœºä¼šæç¤ºä½ é€‰æ‹©ã€USB ä¼ è¾“æ–¹å¼ã€‘ï¼Œå¿…é¡»é€‰æ‹©ã€ä¼ è¾“æ–‡ä»¶ã€‘ï¼ˆæˆ–è€…MTPï¼ˆå¤šåª’ä½“ä¼ è¾“ï¼‰ï¼‰\n\n![](http://wx4.sinaimg.cn/large/006ar8zggy1g0zromxjlqj30br0nmgxw.jpg)\n\n#### äºŒã€ä½¿ç”¨ `flutter devices` æŸ¥çœ‹è®¾å¤‡èƒ½å¦æ‰¾åˆ°\n\n![](http://wx3.sinaimg.cn/large/006ar8zggy1g0zrnf86g8j30hf02t749.jpg)\n\n#### ä¸‰ã€åœ¨ `Android studio` ä¸­é€‰æ‹©ä½ çš„çœŸæœºï¼Œç„¶åç‚¹å‡» `[debug]`\n\n![](http://wx1.sinaimg.cn/large/006ar8zggy1g0zrrlvwesj30kt036wei.jpg)\n\n#### å››ã€çœŸæœºè‡ªåŠ¨å®‰è£…Appï¼ˆç•¥ï¼‰ã€‚\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g0zruf9snrj30u01o0jwf.jpg)","tags":["flutter"],"categories":["flutter"]},{"title":"androidssr","url":"/2019/03/10/androidssr/","content":"\n<hr>\n\nçœ‹ä¸Šå»æ¯”windowså®¢æˆ·ç«¯å¤šäº†å¾ˆå¤šé€‰é¡¹ï¼Œä½†å®é™…ä¸Šåªéœ€è¦è®¾ç½®è¿™äº”ä¸ªï¼š\n\n<!--more-->\n\n> é“¾æ¥ï¼šhttps://pan.baidu.com/s/1PKL0ViJJRJw9zkG8AlvEdQ \n> \n> æå–ç ï¼šp175 \n\n### æ“ä½œæ­¥éª¤ï¼š\n\n0. ä¸‹è½½å®‰è£…å®‰å“ssr\n1. è¾“å…¥ip\n2. è¾“å…¥å¯†ç \n3. è¾“å…¥ç«¯å£\n4. é€‰æ‹©æ··æ·†æ–¹å¼ï¼šplain\n5. é€‰æ‹©åŠ å¯†æ–¹æ³•ï¼šaes-256-cfbï¼ˆå’Œä½ çš„æœåŠ¡å™¨åŠ å¯†ä¸€æ ·ï¼‰\n6. ç‚¹å‡»å³ä¸Šè§’çš„é£æœº\n\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g0xmnvd495j30cl0ottba.jpg)\n","tags":["ssr"],"categories":["ssr"]},{"title":"è¯·æ±‚ç¼“å­˜ç­–ç•¥","url":"/2019/03/06/requestjs/","content":"\n<hr>\n\nè¯¥ä»£ç æ‘˜æŠ„è‡ª  [ant-design-pro](https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js#L66) \n\nhttps://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js#L66\n\nåªè¦ä¸æ˜¯å®æ—¶æ•°æ®çš„æ¥å£ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥å……åˆ†åˆ©ç”¨è¯·æ±‚ç¼“å­˜çš„ç‰¹æ€§ï¼ŒèŠ‚çº¦å®¢æˆ·ç«¯ç½‘ç»œèµ„æºçš„æµªè´¹ï¼Œä¹Ÿå‡å°‘æœåŠ¡å™¨çš„è¯·æ±‚å‹åŠ›ã€‚\n\nç‰¹åˆ«æ˜¯æˆ‘çš„é¡¹ç›®ä¸­çš„æ•°æ®ï¼Œæœ€çŸ­çš„è¿­ä»£å‘¨æœŸä¹Ÿæ˜¯â€œæ¯æ—¥ä¸€æ›´â€ã€‚æ‰€ä»¥ç¼“å­˜ç‰¹æ€§å¯ä»¥æ”¾å¿ƒå¤§èƒ†ä½¿ç”¨ã€‚ä½†ä¸ºäº†ä¿é™©ï¼Œç¼“å­˜ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯è®¾ç½®çŸ­ä¸€ç‚¹ã€‚æ¯”å¦‚1åˆ†é’Ÿã€‚\n\nåŸç†å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š\n1. æ¯æ¬¡è¯·æ±‚éƒ½å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰åˆ™å­˜èµ·æ¥ï¼Œå¦‚æœæœ‰åˆ™éœ€è¦åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™è¿˜æ˜¯è¦è¯·æ±‚ï¼Œå¦åˆ™æ‰è¿”å›ç¼“å­˜ï¼›\n2. æ¯æ¬¡å­˜ä¹‹å‰ï¼Œåˆ¤æ–­ç¼“å­˜æ˜¯å¦æ»¡äº†ï¼Ÿï¼ˆsessionStoreageçš„å®¹é‡å¤§æ¦‚5Mï¼‰ï¼Œå¦‚æœæ»¡äº†åˆ™éœ€è¦æ¸…ç©ºå†å­˜å…¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ•°æ®ä½“ç§¯è¶…è¿‡5Mï¼ˆå‡ åä¸‡æ•°æ®ï¼‰ï¼Œé‚£ä½ æ¸…ç©ºå­˜å…¥è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬å­˜å…¥ä¹‹å‰è¦åˆ¤æ–­æ•°æ®ä½“ç§¯æ˜¯å¦å¤§äº5Mï¼Œå¦‚æœæ˜¯åˆ™ä¸åŠ å…¥ç¼“å­˜ï¼›\n\n<!--more--> \n#### é—®é¢˜ä¸€ï¼šå¦‚ä½•åˆ¤æ–­ä½ æµè§ˆå™¨çš„ç¼“å­˜å®¹é‡ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚ä¸å‡ºæ„å¤–è‚¯å®šæ˜¯5120kbã€‚\n\n```JavaScript\n// è·å–localStorageæœ€å¤§å®¹é‡\n(function() {\n   if(!window.sessionStorage) {\n        console.log('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒsessionStorage!')\n   }    \n   var test = '0123456789';\n   var add = function(num) {\n     num += num;\n     if(num.length == 10240) {\n       test = num;\n       return;\n     }\n     add(num);\n   }\n   add(test);\n   var sum = test;\n   var show = setInterval(function(){\n      sum += test;\n      try {\n       window.sessionStorage.removeItem('test');\n       window.sessionStorage.setItem('test', sum);\n       console.log(sum.length / 1024 + 'KB');\n      } catch(e) {\n       console.log(sum.length / 1024 + 'KBè¶…å‡ºæœ€å¤§é™åˆ¶');\n       clearInterval(show);\n      }\n   }, 0.1)\n })()\n\n\n// è·å–sessionStorageçš„å‰©ä½™å®¹é‡\n(function(){\n    if(!window.sessionStorage) {\n        console.log('æµè§ˆå™¨ä¸æ”¯æŒsessionStorage');\n    }\n    var size = 0;\n    for(item in window.sessionStorage) {\n        if(window.sessionStorage.hasOwnProperty(item)) {\n            size += window.sessionStorage.getItem(item).length;\n        }\n    }\n    console.log('å½“å‰sessionStorageå‰©ä½™å®¹é‡ä¸º' + (size / 1024).toFixed(2) + 'KB');\n})()\n```\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g0sufs054qg30lq0ny4go.gif)\n\n#### é—®é¢˜äºŒï¼šä»¥ä»€ä¹ˆä½œä¸ºç¼“å­˜é”®ï¼ˆsessionStorage keysï¼‰ï¼Ÿ\n\n1. Urlï¼šè¯·æ±‚åœ°å€ï¼Œå« â€œ?â€ åé¢çš„ GET å‚æ•°;\n2. Optionsï¼šåŒ…å« headers å’Œ paramsã€body ç­‰;\n3. Otherï¼šè­¬å¦‚æœ‰ä¸€äº›å…¬å…±å‚æ•°é€šå¸¸æ˜¯åœ¨ `interceptors request` è¯·æ±‚æ‹¦æˆªå™¨ä¸­æ‰æ·»åŠ çš„ã€‚å¦‚æœæ²¡æœ‰åˆ™ä¸è®¡å…¥ã€‚\n\n```\nimport hash from 'hash.js'\n\n// ç¼“å­˜é”®ï¼ˆæŒ‡çº¹ï¼‰ = è¯·æ±‚url + è¯·æ±‚é…ç½® + å…¶ä»–ç‰¹æ®Šå‚æ•°\nconst fingerprint = Url + Options + Other;\n// åŠ å¯†æ··æ·†\nconst hashcode = hash( fingerprint )\n```\n\n\n#### é—®é¢˜ä¸‰ï¼šsessionStorage æ˜¯æ²¡æœ‰è¿‡æœŸå’Œç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µçš„ï¼Œéœ€è¦æ€ä¹ˆå®ç°ï¼Ÿ\n\néœ€è¦æ–°å»ºä¸€ä¸ªç‰¹æ®Šçš„é”®æ¥è®°å½•è¯¥ç¼“å­˜å½•å…¥çš„æ—¶é—´ï¼Œæ¯”å¦‚ï¼š\n\n```JavaScript\n// è®¾ç½®ç¼“å­˜\nsessionStorage.setItem(hashcode, JSON.stringify(content))\n// åŒæ—¶ï¼Œè®¾ç½®è¯¥ç¼“å­˜çš„å½•å…¥æ—¶é—´\nsessionStorage.setItem(`${hashcode}:timestamp`, Date.now())\n```\n\nåˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼ˆè¿™é‡Œçœç•¥äº†åˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨çš„ä»£ç ï¼‰ï¼š\n```JavaScript\n// æˆ‘ä»¬çº¦å®šç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ˜¯60ç§’\nconst expirys = 60 \n\n// è·å–è¯¥ç¼“å­˜çš„å½•å…¥æ—¶é—´\nconst whenCached =  sessionStorage.getItem(`${hashcode}:timestamp`)\n\n// åˆ¤æ–­ç¼“å­˜è¿‡å»äº†å¤šä¹…æ—¶é—´äº†\nconst age = (Date.now() - whenCached) / 1000\n\n// ...å¦‚æœç¼“å­˜æ²¡æœ‰è¿‡æœŸ\nif (age < expirys) {\n    console.log('use cache')\n} else {\n    console.log('no cache')\n}\n```\n\n#### é—®é¢˜å››ï¼šå¦‚ä½•æ•æ‰ sessionStorage è¶…å‡º?\né”™è¯¯åä¸º `\"QuotaExceededError\"`\n> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ä½ æ¸…ç©ºç¼“å­˜å†é‡æ–°å­˜å…¥ï¼Œå†…å®¹ä½“ç§¯å¦‚æœæ˜¯å¤§äº5Mä¾ç„¶ä¼šå†åº¦æŠ¥é”™ã€‚æ‰€ä»¥æœ€å¥½é™åˆ¶ç¼“å­˜çš„å¤§å°ã€‚å¦‚æœå¤§äºæŸä¸ªä½“ç§¯ï¼ˆè­¬å¦‚2Mï¼‰ï¼Œåˆ™ä¸å­˜å…¥ç¼“å­˜ã€‚\n\n```JavaScript\n/**\n * say something ...\n *\n * @hashcode  {String}   ç¼“å­˜é”®\n * @content   {String}   ç¼“å­˜å€¼\n */\nconst cachedSave = (hashcode, content) => {\n    try {\n    // è¿”å›code500æ˜¯åç«¯å›ºå®šçš„æŠ¥é”™åé¦ˆ && ä¸èƒ½ä¸ºç©ºå¯¹è±¡ && æ•°æ®çš„å°äº2M\n    if (content.code != 500 && !isEmptyObject(content) && (JSON.stringify(content).length / 1024).toFixed(2) < 2048) {\n      // è®¾ç½®ç¼“å­˜\n      sessionStorage.setItem(hashcode, JSON.stringify(content))\n      // è®¾ç½®ç¼“å­˜æ—¶é—´\n      sessionStorage.setItem(`${hashcode}:timestamp`, Date.now())\n    }\n  } catch (err) {\n      // è¶…å‡ºç¼“å­˜å¤§å°\n      if (err.name === 'QuotaExceededError') {\n        // æ¸…ç©ºæ‰€æœ‰ç¼“å­˜\n        sessionStorage.clear()\n        // é‡æ–°è®¾ç½®ç¼“å­˜\n        sessionStorage.setItem(hashcode, JSON.stringify(content))\n        // é‡æ–°è®¾ç½®ç¼“å­˜æ—¶é—´\n        sessionStorage.setItem(`${hashcode}:timestamp`, Date.now())\n      }\n  }\n\n  // è¿”å›Promise\n  return content\n}\n```\n\n#### é—®é¢˜äº”ï¼šå¦‚ä½•åŠ å¯†æŒ‡çº¹ï¼ˆsessionStorage keysï¼‰ï¼Ÿ\nå¯ä»¥ä½¿ç”¨å¼€æºçš„ç¬¬ä¸‰æ–¹åº“ï¼š `hash.js`\nhttps://github.com/indutny/hash.js\n\nä½¿ç”¨ç¤ºä¾‹ï¼š\n```JavaScript\nvar hash = require('hash.js')\nhash.sha256().update('ä½ éœ€è¦åŠ å¯†çš„æ•°æ®').digest('hex')\n```\n\n\n## æœ€ç»ˆä»£ç \nrequest.js:\n```JavaScript\nimport axios from 'axios'\nimport hash from 'hash.js'\n\n// åˆ¤æ–­æ˜¯å¦ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼š{}\nconst isEmptyObject = obj => {\n    if (Object.getOwnPropertyNames) {\n        return (Object.getOwnPropertyNames(obj).length === 0);\n    } else {\n        var k;\n        for (k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\n// æ£€æŸ¥çŠ¶æ€ç \nconst checkStatus = (response) => {\n  // åˆ¤æ–­è¯·æ±‚çŠ¶æ€\n    if (response.status >= 200 && response.status < 300) {\n        // è¿”å›Promise\n        return response.data\n    } else {\n      // æœåŠ¡å™¨å“åº”å¼‚å¸¸\n      throw new Error(response.statusText)\n    }\n}\n\n// ç¼“å­˜åˆ°sessionStorage\nconst cachedSave = (hashcode, content) => {\n    try {\n    // è¿”å›code500æ˜¯åç«¯å›ºå®šçš„æŠ¥é”™åé¦ˆ && ä¸èƒ½ä¸ºç©ºå¯¹è±¡ && æ•°æ®çš„å°äº2M\n    if (content.code != 500 && !isEmptyObject(content) && (JSON.stringify(content).length / 1024).toFixed(2) < 2048) {\n      // è®¾ç½®ç¼“å­˜\n      sessionStorage.setItem(hashcode, JSON.stringify(content))\n      // è®¾ç½®ç¼“å­˜æ—¶é—´\n      sessionStorage.setItem(`${hashcode}:timestamp`, Date.now())\n    }\n  } catch (err) {\n      // è¶…å‡ºç¼“å­˜å¤§å°\n      if (err.name === 'QuotaExceededError') {\n        // æ¸…ç©ºæ‰€æœ‰ç¼“å­˜\n        sessionStorage.clear()\n        // é‡æ–°è®¾ç½®ç¼“å­˜\n        sessionStorage.setItem(hashcode, JSON.stringify(content))\n        // é‡æ–°è®¾ç½®ç¼“å­˜æ—¶é—´\n        sessionStorage.setItem(`${hashcode}:timestamp`, Date.now())\n      }\n  }\n\n  // è¿”å›Promise\n  return content\n}\n\n// å…¬å…±è¯·æ±‚\nexport const request = (url, options = {}) => {\n    // æŒ‡çº¹\n    const fingerprint = url + JSON.stringify(options)\n    // åŠ å¯†æŒ‡çº¹\n    const hashcode = hash.sha256().update(fingerprint).digest('hex')\n    // é¢„è®¾å€¼æŒ‡çº¹\n    const _cachedSave = cachedSave.bind(null, hashcode)\n    // è¿‡æœŸè®¾ç½®\n    const expirys = options && options.expirys || 60\n    // æœ¬è¯·æ±‚æ˜¯å¦ç¦æ­¢ç¼“å­˜ï¼Ÿ\n    if (expirys !== false) {\n        // è·å–ç¼“å­˜\n        const cached = sessionStorage.getItem(hashcode)\n        // è·å–è¯¥ç¼“å­˜çš„æ—¶é—´\n        const whenCached = sessionStorage.getItem(${hashcode}:timestamp)\n        // å¦‚æœç¼“å­˜éƒ½å­˜åœ¨\n        if (cached !== null && whenCached !== null) {\n          // åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸ\n          const age = (Date.now() - whenCached) / 1000\n          // å¦‚æœä¸è¿‡æœŸçš„è¯ç›´æ¥è¿”å›è¯¥å†…å®¹\n          if (age < expirys) {\n              // æ–°å»ºä¸€ä¸ªresponse\n              const response = new Response(new Blob([cached]))\n              // è¿”å›promiseå¼çš„ç¼“å­˜\n              return new Promise((resolve, reject) => resolve(response.json()))\n          }\n          // åˆ é™¤ç¼“å­˜å†…å®¹\n          sessionStorage.removeItem(hashcode)\n          // åˆ é™¤ç¼“å­˜æ—¶é—´\n          sessionStorage.removeItem(${hashcode}:timestamp)\n        }\n    }\n    return axios(url, options).then(checkStatus).then(_cachedSave)\n}\n```\n\n\n### å¦‚ä½•ä½¿ç”¨ request.jsï¼Ÿ\n\nLogin.js ç¤ºä¾‹\n\n```JavaScript\nimport { request } from '@/utils/request.js'\nimport qs from 'qs'\n\nrequest('/admin/user/sysUser/login', {\n  method: 'POST',\n  headers: {'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'},\n  data: qs.stringify({ userAccount, userPwd, type: 'account' })\n}).then(data => {\n    // ...\n})\n```\n","tags":["JavaScript","axios"],"categories":["JavaScript"]},{"title":"å–„ç”¨ JavaScript ç‰¹æ€§ï¼šé—­åŒ…ä¸IIFE","url":"/2019/03/05/bibaoIIFE/","content":"\n<hr>\n\nä¸€ã€ä½¿ç”¨ `IIFE` ä¼˜é›…çš„è§£å†³ `setInterval` é¦–æ¬¡ä¸æ‰§è¡Œçš„å°´å°¬ã€‚\n```JavaScript\n// ä½ çš„å‡½æ•°\nconst f = () => { ... }\n\n// ç«‹å³æ‰§è¡Œå¹¶ä¸”è½®è¯¢\nconst timer = (function(fn, t) {\n    // ä¸ºäº†è§£å†³ setInterval é¦–æ¬¡ä¸æ‰§è¡Œçš„å°´å°¬\n    fn && fn()\n    // è¿”å›è®¡æ—¶å™¨timer\n    return setInterval(fn, t)\n})(f, 1500)\n```\n<!--more--> \n\näºŒã€å–„ç”¨é—­åŒ…ï¼Œå°±å¯ä»¥è½»æ¾å®ç°ç¼“å­˜æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€‚\n\nä¸‹é¢å‡ ä¸ªä¾‹å­æ¥ä½“éªŒé—­åŒ…åœ¨å®æˆ˜ä¸­çš„ä½œç”¨ã€‚\n\n> è¿™ç§ä¹Ÿè¢«ç§°ä¸º `â€œæ¨¡å—æ¨¡å¼â€` â€”â€” ç°ä»£æ¨¡å—åŒ–å®ç°çš„åŸºçŸ³\n\n##### 1. è½»é‡çº§æç®€çš„è’™ç‰ˆå±‚maskï¼Œååˆ†æ–¹ä¾¿æ‰©å±•ï¼š\n```JavaScript\nvar Mask = function (cb) {\n\tvar div = document.createElement('div')\n\tdiv.style = 'background-color: rgba(255, 255, 255, 0.7);position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 199307100337; display:none;'\n\tdiv.addEventListener('click', cb)\n\tdocument.body.append(div)\n\n\tvar img = new Image()\n\timg.src = \"http://wx3.sinaimg.cn/small/006ar8zggy1g0isbtuj2kg300w00wq2p.gif\"\n\timg.style = 'position: absolute; top: 50%; left: 50%;'\n\tdiv.append(img)\n\n\tvar show = function (showcb) {\n\t\tdiv.style.display = 'block'\n\t\tshowcb && showcb()\n\t}\n\n\tvar close = function (showcb) {\n\t\tdiv.style.display = 'none'\n\t\tshowcb && showcb()\n\t}\n\n\treturn { show, close }\n}\n\n// åˆ›å»ºä¸€ä¸ªè’™ç‰ˆ\nconst mask = new Mask()\n// æ‰“å¼€è’™ç‰ˆ\nmask.show()\n// ä¸‰ç§’åå…³é—­\nsetTimeout(() => {\n\tmask.close()\n}, 3500);\n```\n\n##### 2. å·§å¦™ä½¿ç”¨é—­åŒ…å®ç°å»é‡å¤\n\næˆ‘æœ‰ä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚ï¼šéœ€è¦ä»æŒ‡å®šåŒºé—´ï¼ˆæ¯”å¦‚-7 ~ 7ï¼‰éšæœºå– 5 ä¸ªæ•°ï¼Œè™½ç„¶è¯´æ˜¯éšæœºï¼Œä½†å´ä¸æƒ³é‡å¤ã€‚ç”¨é—­åŒ…ç¼“å­˜å·²ç»å–è¿‡çš„æ•°ï¼Œæ¯æ¬¡å–çš„æ—¶å€™é€’å½’è¿‡æ»¤ä¸€ä¸‹å³å¯ã€‚\n\n```JavaScript\n'use strict';\n\n// ç¼“å­˜å‡½æ•°\nvar singeFn = function (fn, maxPollTime = 20) {\n\t// ç¼“å­˜\n\tvar cache = []\n\t// è½®è¯¢æ¬¡æ•°\n\tvar pollTime = 0\n\t// è¿”å›éšæœºæ•°ç”Ÿæˆå™¨\n\treturn function _ () {\n\t\t// è·å–éšæœºæ•°\n\t\tvar data = fn.apply(this, arguments)\n\t\t// å¦‚æœå­˜åœ¨åˆ™é€’å½’\n\t\tif (~cache.indexOf(data)) {\n\t\t\t// é€’å½’è°ƒç”¨ï¼ˆå¦‚æœé€’å½’æ¬¡æ•°å¤§äºé˜ˆå€¼ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›Falseï¼‰\n\t\t\treturn ++pollTime > maxPollTime ? false : _.apply(this, arguments)\n\t\t} else {\n\t\t\t// é‡ç½®è½®è¯¢æ¬¡æ•°\n\t\t\tpollTime = 0\n\t\t\t// æ·»åŠ ç¼“å­˜å¹¶ä¸”è¿”å›data\n\t\t\treturn cache.push(data), data\n\t\t}\n\t}\n}\n\n// æˆ‘çš„éšæœºå‡½æ•°\nvar random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n};\n\n// ä»-7ï¼Œ7å–éšæœºæ•°\nvar rangeRadom = random.bind(null, -7, 7)\n\n// è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°\nvar singeRangeRadom = singeFn(rangeRadom);\n\n// è·å–è¿”å›å€¼ï¼ˆæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼‰\nfor (var i = 0; i < 5; i++) {\n    const randnum = singeRangeRadom()\n    console.log(randnum)\n}\n```\n\n##### 3. ç”¨é—­åŒ…å¯ä»¥å®ç°ç¼“å­˜æ¨¡å¼ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—æ¶ˆè€—ã€‚\nè­¬å¦‚æ¯”è¾ƒå®ç”¨çš„ `memoized`ï¼Œæˆ‘ç§°ä¹‹ä¸º `å‚æ•°æ ‡è®°ç¼“å­˜å™¨`ï¼Œæºç å’Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š\n```\nconst memoized = fn => {\n\tconst lookupTable = {};\n\t// å¯ä»¥é€šè¿‡è§£é‡Šè¿™ä¸ªæ¥è§‚å¯Ÿç¼“å­˜çš„å˜åŒ–\n\t// setInterval( () => console.log(lookupTable) , 1000); \n\treturn arg => lookupTable[arg] || (lookupTable[arg] = fn(arg));\n}\n\n// é˜¶ä¹˜çš„demo\nlet fastFactorial = memoized(n => {\n\tif (n === 0) {\n\t\treturn 1;\n\t}\n\t// è¿™æ˜¯ä¸€ä¸ªé€’å½’ï¼Œå¹¶ä¸”æ¯ä¸€æ¬¡é€’å½’éƒ½å…·æœ‰ç¼“å­˜è¿‡ç¨‹\n\treturn n * fastFactorial(n -1);\n});\n\nfastFactorial(5)\n```\n\næˆ‘çš„åšå®¢ä¸­`ç«™å†…é™æ€æœç´¢åŠŸèƒ½`ï¼Œå°±æ˜¯ä½¿ç”¨äº† `memoized`  çš„ç‰¹æ€§æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘é‡å¤çš„æœç´¢ã€‚\n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g0s9womogeg30ku0cwqhw.gif)\n\nå¦‚å›¾ï¼Œå½“æˆ‘è¾“å…¥ â€œcentosâ€ çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åˆ†åˆ«å¯¹ \n> \"c\", \"ce\", \"cen\", \"cent\", \"cento\", \"centos\" \n\nå…³é”®å­—åˆ†åˆ«è¿›è¡Œäº†:\n\n> æœç´¢ -> è¿‡æ»¤ -> æ¨¡æ¿å¼•æ“ -> æ¸²æŸ“UI\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæŒ‰ä¸‹å…­æ¬¡â€œBackSpaceâ€ã€‚ä¹Ÿå°±æ˜¯å˜æˆäº† \n\n> \"cento\", \"cent\", \"cen\", \"ce\", \"c\", \"\"\n\næ˜¯å¦åˆå¾—é‡å¤è¿›è¡Œä¸Šè¿°çš„è¿ç®—æ“ä½œå‘¢ï¼Ÿ\n\næ˜¾ç„¶æ˜¯ä¸å¿…çš„ï¼Œå› ä¸ºæ¯ä¸€æ¬¡è¾“å…¥å…³é”®è¯ï¼Œæˆ‘éƒ½ä¼šæœç´¢ä¸€ä¸‹ç¼“å­˜æ˜¯å¦å­˜åœ¨ç›¸å…³çš„å†…å®¹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šç¼“å­˜èµ·æ¥ã€‚å¦‚æœå­˜åœ¨åˆ™æ‹¿æ¥å³ç”¨ã€‚è¿™æ ·å°±å‡å°‘äº†å¤§é‡çš„è®¡ç®—æ¶ˆè€—ã€‚ç›´æ¥è·³åˆ°æœ€åä¸€æ­¥â€œæ¸²æŸ“UIâ€äº†ã€‚","tags":["JavaScript"],"categories":["JavaScript"]},{"title":"æ›´ä¼˜é›…çš„é˜²æ­¢è¯·æ±‚(XHR)é‡å¤ â€”â€” è¯·æ±‚é˜Ÿåˆ—","url":"/2019/03/05/norepeatxhr/","content":"\n<hr>\né—®é¢˜ï¼šé‡å¤è¯·æ±‚çš„é—®é¢˜åœ¨å¼€å‘ä¸­å¾ˆå¸¸è§ï¼Œæµªè´¹ç½‘ç»œèµ„æºå€’æ˜¯å…¶æ¬¡ï¼Œæœ€æ€•çš„æ˜¯å‰ä¸€æ¬¡çš„ç‚¹å‡»é€»è¾‘ï¼ŒæŠŠåé¢çš„é€»è¾‘è¦†ç›–äº†ã€‚\n\n> è­¬å¦‚ï¼Œä½ åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»äº†â€œå´å½¦ç¥–â€ï¼Œç„¶åå†å¿«é€Ÿç‚¹å‡»äº†â€œå´å­Ÿè¾¾â€ã€‚å‡è®¾â€œå´å½¦ç¥–â€çš„æ•°æ®è¯·æ±‚éœ€è¦3ç§’ï¼Œè€Œâ€œå´å­Ÿè¾¾â€åªéœ€è¦2ç§’ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ï¼Œé¡µé¢ä¼šå…ˆæ¸²æŸ“å‡ºâ€œå´å½¦ç¥–â€ï¼Œè€Œååˆé©¬ä¸Šâ€œå´å­Ÿè¾¾â€çš„æ•°æ®è¦†ç›–ã€‚\n>\n> **ç”¨æˆ·æœ¬æ¥æ˜¯æƒ³æŸ¥çœ‹â€œå´å½¦ç¥–â€çš„ç…§ç‰‡ï¼Œè€Œç•Œé¢å±•ç¤ºçš„å´æ˜¯â€œå´å­Ÿè¾¾â€â€¦â€¦**\n\n<!--more--> \n\n![](http://wx2.sinaimg.cn/large/006ar8zggy1g0rnnuad9uj30dl06xgmp.jpg)\n\nå¸¸è§çš„é˜²æ­¢é‡å¤è¯·æ±‚çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯å±•ç¤ºä¸€ä¸ªè’™ç‰ˆæˆ–è€…Loadingå±‚ï¼Œæ‹¦æˆªç”¨æˆ·è¿›ä¸€æ­¥æ“ä½œã€‚ç›´åˆ°é€»è¾‘å…¨éƒ¨è·‘é€šä¸ºæ­¢ã€‚\n\nä½†åœ¨å¤§æ•°æ®å±å¹•ä¸­ï¼Œå¦‚æœæ‹¦æˆªç”¨æˆ·æ“ä½œï¼Œå¹¶ä¸”èµ«ç„¶å‡ºç°ä¸€ä¸ªèŠèŠ±å›¾ï¼Œæ˜¯å¾ˆFu*kçš„ä½“éªŒã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘æˆ‘è‡ªå·±çœ‹åˆ°èŠèŠ±éƒ½çƒ¦ï¼š\n\n![](http://wx4.sinaimg.cn/large/006ar8zggy1g0isbtuj2kg300w00wq2p.gif)\n\nä¸è¿‡ï¼Œè¿™ç§ä¸å¥½çš„ä½“éªŒå¹¶ä¸æ˜¯æºäºèŠèŠ±å›¾ï¼Œè€Œæ˜¯æ‹¦æˆªäº†ç”¨æˆ·æ“ä½œã€‚è®©ç”¨æˆ·æ”¾ä¸å¼€ã€‚æ‰€ä»¥éœ€æ±‚æ˜¯ï¼š\n\n> ä½ éšä¾¿çå‡ æŠŠä¹±ç‚¹ï¼Œé‡å¤è¯·æ±‚äº†ç®—æˆ‘è¾“ã€‚\n\n### è¯·æ±‚é˜Ÿåˆ—\n\n1. æŠŠæ‰€æœ‰è¯·æ±‚éƒ½å¡å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼›\n2. æ¯å½“ä¸€ä¸ªè¯·æ±‚è¿›å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œå…ˆæ¸…ç©ºå¹¶å–æ¶ˆï¼ˆCancelï¼‰é˜Ÿåˆ—ä¸­**ç›¸åŒçš„è¯·æ±‚**ï¼›\n3. å½“ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼Œè¦å°†è‡ªå·±ä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼›\n\n\n![](http://wx4.sinaimg.cn/large/006ar8zggy1g0ro3c0myvj30dw09udgm.jpg)\n\né‡ç‚¹åœ¨äºå¦‚ä½• **å–æ¶ˆï¼ˆCancelï¼‰** å·²ç»å‘é€çš„è¯·æ±‚ã€‚å®é™…ä¸Šè¿˜çœŸæœ‰ï¼ŒåŸç”Ÿçš„ XHR å°±æœ‰æä¾› abort() å¯ä»¥ä¸­æ–­è¯·æ±‚ã€‚jQuery çš„ Ajax ä¹Ÿæä¾›äº†ï¼šhttps://github.com/jquery/jquery/blob/master/src/ajax/xhr.js#L82\n\n```JavaScript\nconst xhr = ajax({ ... })\nxhr.abort()\n```\n\naxios ä¹Ÿæä¾›äº†ç±»ä¼¼çš„APIï¼Œä¸è¿‡ç”¨èµ·æ¥æ¯”ä¸Šé¢çš„éº»çƒ¦ä¸€ç‚¹ï¼Œè¯¦æƒ…ä½¿ç”¨åœ¨åç»­çš„demoä¸­ï¼š\n```JavaScript\nnew axios.CancelToken(_ => { ... })\n```\n\nè™½ç„¶å¤§éƒ¨åˆ†é¡¹ç›®å·²ç»æ˜¯é‡‡ç”¨ axiosã€fetchç­‰ç°ä»£XHRè¯·æ±‚æŠ€æœ¯äº†ã€‚ä½†è¿˜æ˜¯ç”¨ä¼ ç»Ÿçš„jQuery Ajaxæ›´å®¹æ˜“è¯´æ˜ï¼Œåæ­£åŸç†æ˜¯ä¸€æ ·çš„ï¼š\n\nsingeAjax.html:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>SingleAjax</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <!-- jquery -->\n    <script src=\"https://cdn.bootcss.com/jquery/1.9.1/jquery.min.js\"></script>\n    <style>\n    </style>\n</head>\n\n<body>\n</body>\n<script>\n\n// è·å–çº¯Urlï¼Œä¸åŒ…å«?åé¢çš„å‚æ•°\nvar getPureUrl = url => {\n\tconst index = url.indexOf('?')\n\treturn url.substr(0, ~index ? index : url.length)\n}\n\n//ï¼ˆæ ¸å¿ƒï¼‰ä»¥urlç›¸åŒä½œä¸ºé‡å¤æ¡ä»¶ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µç¼–å†™è‡ªå·±çš„é‡å¤æ¡ä»¶\nvar SingleAjax = function () {\n    // ç¼“å­˜çš„é˜Ÿåˆ—\n    var pending = [];\n\n    // è¿”å›å•ä¾‹æ¨¡å¼ajax\n    return function (opts) {\n    \t// è·å–çº¯Urlï¼ˆä¸åŒ…å«?åé¢çš„å‚æ•°ï¼‰\n    \tconst pureUrl = getPureUrl(opts.url)\n        // ä¸­æ­¢é˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒè¯·æ±‚åœ°å€çš„xhr\n        pending.forEach(_ => _.url === pureUrl && _.xhr.abort());\n        // è·å– success å›è°ƒå‡½æ•°\n        const _success = opts.success\n        // è£…é¥°æˆåŠŸå›è°ƒå‡½æ•°\n        opts.success = function (...rest) {\n        \t// ä»é˜Ÿåˆ—è¿‡æ»¤æ‰å·²ç»æˆåŠŸçš„è¯·æ±‚\n        \tpending = pending.filter(_ => _.url != pureUrl)\n        \t// ç»§ç»­æ‰§è¡Œå®ƒçš„æˆåŠŸ\n        \t_success && _success(...rest)\n        }\n        // ç§»é™¤æ‰€æœ‰ä¸­æ­¢çš„è¯·æ±‚ï¼Œå¹¶ä¸”å°†æ–°çš„è¯·æ±‚æ¨å…¥ç¼“å­˜\n        pending = [...pending.filter(_ => _.url != pureUrl), { url: pureUrl, xhr: $.ajax(opts) }]\n    }\n}\n\n// ç”Ÿæˆå•ä¾‹ajax\nvar singleAjax = new SingleAjax()\n\nfor (var i = 0; i < 10; i++) {\n    singleAjax({\n        url: \"https://api.github.com/users/dragon8github\",\n        success: function (data) {\n            // å…¶å®åœ¨æˆåŠŸä¹‹åï¼Œå¯ä»¥è€ƒè™‘æ‰©å±•æŠŠæˆåŠŸçš„xhrä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œä½†å…¶å®ä¹Ÿä¸å½±å“ã€‚å·²ç»æˆåŠŸçš„xhrå°±ç®—å†æ¬¡è¢«æ‰§è¡Œabortä¹Ÿä¸ä¼šæ€ä¹ˆæ ·ï¼Œæ›´ä¸ä¼šä»200å˜æˆcannelçŠ¶æ€ï¼Œæ›´ä¸ä¼šè§¦å‘errorã€‚\n            console.log('è¯·æ±‚æˆåŠŸ', data);\n        },\n        error: function(e, m){\n           console.log('æ•°æ®æ¥å£è¯·æ±‚å¼‚å¸¸ï¼ˆè¯·æ”¾å¿ƒè¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œç”±äºè¯·æ±‚è¢«ä¸­æ­¢Cancelï¼Œæ‰€ä»¥ä¼šå›è°ƒerrorã€‚åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹m === \"abort\" å³å¯ï¼Œä½ è¿˜å¯ä»¥åœ¨ abort() æ—¶åœ¨ _.xhr ä¸­åŠ å…¥ä»»æ„å±æ€§æ¥åˆ¤æ–­æ·±å…¥åˆ¤æ–­ï¼‰', e, m, m === \"abort\");\n        }\n    })\n}\n</script>\n</html>\n```\n\nä»£ç ä¸­æˆ‘ä»¬æ¨¡æ‹Ÿäº†åæ¬¡é‡å¤çš„è¯·æ±‚ï¼Œå‘ç°å‰9æ¬¡éƒ½è¢«abortäº†ã€‚åªç•™ä¸‹æœ€åä¸€æ¡ã€‚\n\n![](http://wx3.sinaimg.cn/large/006ar8zggy1g0rqu574qbj314m0htmz1.jpg)\n\n\nä¸‹é¢æ˜¯axiosçš„ç¤ºä¾‹ singeAxios:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js\"></script>\n</head>\n<body>\n</body>\n<script>\n// è¯·æ±‚é˜Ÿåˆ—\nlet pending = []\n\n// è·å–çº¯Urlï¼Œä¸åŒ…å«?åé¢çš„å‚æ•°\nvar getPureUrl = url => {\n\tconst index = url.indexOf('?')\n\treturn url.substr(0, ~index ? index : url.length)\n}\n\n// è¯·æ±‚æ‹¦æˆªå™¨\naxios.interceptors.request.use(config => {\n    // è·å–çº¯Urlï¼ˆä¸åŒ…å«?åé¢çš„å‚æ•°ï¼‰\n    const pureUrl = getPureUrl(config.url)\n    // ä¸­æ­¢é˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒè¯·æ±‚åœ°å€çš„xhr\n    pending.forEach(_ => _.url === pureUrl && _.cancel('repeat abort'));\n    // é…ç½®å–æ¶ˆä»¤ç‰Œ\n    config.cancelToken = new axios.CancelToken(cancel => {\n       // ç§»é™¤æ‰€æœ‰ä¸­æ­¢çš„è¯·æ±‚ï¼Œå¹¶ä¸”å°†æ–°çš„è¯·æ±‚æ¨å…¥ç¼“å­˜\n       pending = [...pending.filter(_ => _.url != pureUrl), { url: pureUrl, cancel }]\n    })\n    return config\n}, error => {\n    return Promise.reject(error)\n})\n\n// å“åº”æ‹¦æˆªå™¨\naxios.interceptors.response.use(res => {\n  // æˆåŠŸå“åº”ä¹‹åæ¸…ç©ºé˜Ÿåˆ—ä¸­æ‰€æœ‰ç›¸åŒUrlçš„è¯·æ±‚\n  pending = pending.filter(_ => _.url != getPureUrl(res.config.url))\n  // è¿”å› response\n  return res\n}, error => {\n   return Promise.reject(error)\n});\n\nfor (var i = 0; i < 10; i++) {\n    axios({url: 'https://api.github.com/users/dragon8github'}).then(console.log).catch(_ => {\n        if (_.message === 'repeat abort') return console.info(_.message)\n        // other error handler...\n        // something code...\n        throw new Error(_.message)\n    })\n}\n</script>\n</html>\n```\n\naxios ä¹Ÿæ˜¯ä¸€æ ·é“ç†ï¼Œåªæ˜¯åšæ³•ä¸ä¸€æ ·ã€‚å‰9ä¸ªè¯·æ±‚éƒ½è¢«abortäº†ã€‚\n\n![](http://wx4.sinaimg.cn/large/006ar8zggy1g0rr60x3knj30y30huwfa.jpg)\n\nä¸è¿‡å¥‡æ€ªçš„æ˜¯ï¼Œå¹¶æ²¡æœ‰cancelçš„è¿‡ç¨‹ã€‚å°±åƒä»æ¥æ²¡æœ‰å‘èµ·è¯·æ±‚è¿‡ä¸€æ ·ã€‚\n\n![](http://wx4.sinaimg.cn/large/006ar8zggy1g0rr5yplkjj30y30hudgw.jpg)\n","tags":["xhr","axios"],"categories":["xhr"]},{"title":"Dartï¼ˆFlutterï¼‰ pub åŒ…ç®¡ç†","url":"/2019/02/21/Dartpub/","content":"\n<hr>\n\nPubï¼ˆhttps://pub.dartlang.org/ ï¼‰æ˜¯Googleå®˜æ–¹çš„Dart Packagesä»“åº“ï¼Œç±»ä¼¼äºnodeä¸­çš„npmä»“åº“ï¼Œandroidä¸­çš„jcenterï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„åŒ…å’Œæ’ä»¶ï¼Œä¹Ÿå¯ä»¥å‘pubå‘å¸ƒæˆ‘ä»¬çš„åŒ…å’Œæ’ä»¶ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»å¦‚ä½•å‘pubå‘å¸ƒæˆ‘ä»¬çš„åŒ…å’Œæ’ä»¶ã€‚\n\n<!--more--> \n\n# ç¤ºä¾‹\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªæ˜¾ç¤ºéšæœºå­—ç¬¦ä¸²çš„widgetã€‚æœ‰ä¸€ä¸ªåä¸ºâ€œenglish_wordsâ€çš„å¼€æºè½¯ä»¶åŒ…ï¼Œå…¶ä¸­åŒ…å«æ•°åƒä¸ªå¸¸ç”¨çš„è‹±æ–‡å•è¯ä»¥åŠä¸€äº›å®ç”¨åŠŸèƒ½ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨pubä¸Šæ‰¾åˆ°english_wordsè¿™ä¸ªåŒ…ï¼Œç¡®å®šå…¶æœ€æ–°çš„ç‰ˆæœ¬å·å’Œæ˜¯å¦æ”¯æŒFlutterã€‚\n\n![english_words](http://wx4.sinaimg.cn/large/006ar8zggy1g0duqg9p60j30y105e0ta.jpg)\n\næˆ‘ä»¬çœ‹åˆ°â€œenglish_wordsâ€åŒ…æœ€æ–°çš„ç‰ˆæœ¬æ˜¯3.1.3ï¼Œå¹¶ä¸”æ”¯æŒflutterï¼Œæ¥ä¸‹æ¥ï¼š\n\nå°†english_wordsï¼ˆ3.1.3ç‰ˆæœ¬ï¼‰æ·»åŠ åˆ°ä¾èµ–é¡¹åˆ—è¡¨ï¼Œå¦‚ä¸‹ï¼š\n\n```yaml\ndependencies:\n  flutter:\n    sdk: flutter\n\n  cupertino_icons: ^0.1.0\n  # æ–°æ·»åŠ çš„ä¾èµ–\n  english_words: ^3.1.3\n```\n\n### ä¸‹è½½åŒ…\n\nåœ¨Android Studioçš„ç¼–è¾‘å™¨è§†å›¾ä¸­æŸ¥çœ‹pubspec.yamlæ—¶ï¼Œå•å‡»å³ä¸Šè§’çš„ Packages get ã€‚\n![Packages get](http://wx4.sinaimg.cn/large/006ar8zggy1g0dur11rqtj30dp0a8ab5.jpg)\n\nè¿™ä¼šå°†ä¾èµ–åŒ…å®‰è£…åˆ°æ‚¨çš„é¡¹ç›®ã€‚æ‚¨å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š\n```\nflutter packages get\nRunning \"flutter packages get\" in flutter_in_action...\nProcess finished with exit code 0\n```\n\n## ä½¿ç”¨\n1ã€å¼•å…¥english_wordsåŒ…\n```dart\nimport 'package:english_words/english_words.dart';\n```\n\nåœ¨è¾“å…¥æ—¶ï¼Œå¯¼å…¥åè¯¥è¡Œä»£ç å°†ä¼šæ˜¾ç¤ºä¸ºç°è‰²ï¼Œè¯·æ”¾å¿ƒï¼Œè¿™å¹¶ä¸ä¸€å®šæ˜¯å®‰è£…å¤±è´¥å¯¼è‡´çš„ã€‚å®ƒè¡¨ç¤ºå¯¼å…¥çš„åº“å°šæœªä½¿ç”¨ã€‚\n\n![import 'package:english_words/english_words.dart';](http://wx4.sinaimg.cn/large/006ar8zggy1g0dvh5ytdej30hd030t8r.jpg)\n\n2ã€ä½¿ç”¨english_wordsåŒ…æ¥ç”Ÿæˆéšæœºå­—ç¬¦ä¸²ã€‚\n```dart\nclass RandomWordsWidget extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    // ç”Ÿæˆéšæœºå­—ç¬¦ä¸²\n    final wordPair = new WordPair.random();\n    return Padding(\n      padding: const EdgeInsets.all(8.0),\n      child: new Text(wordPair.toString()),\n    );\n  }\n}\n```\n3ã€æˆ‘ä»¬å°† RandomWordsWidget æ·»åŠ åˆ°\"è®¡æ•°å™¨\"ç¤ºä¾‹çš„é¦–é¡µMyHomePage çš„Columnçš„å­widgetä¸­ã€‚\n\n![RandomWordsWidget](http://wx4.sinaimg.cn/large/006ar8zggy1g0dvh87tibj30oy0oktay.jpg)\n\n![RandomWordsWidget](http://wx4.sinaimg.cn/large/006ar8zggy1g0dvhap38oj30cr0mstai.jpg)\n\n## çƒ­æ›´æ–°\n\nå¦‚æœåº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œè¯·ä½¿ç”¨çƒ­é‡è½½æŒ‰é’®ã€âš¡ã€‘æ›´æ–°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚æ¯æ¬¡å•å‡»çƒ­é‡è½½æˆ–ä¿å­˜é¡¹ç›®æ—¶ï¼Œéƒ½ä¼šåœ¨æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­éšæœºé€‰æ‹©ä¸åŒçš„å•è¯å¯¹ã€‚ è¿™æ˜¯å› ä¸ºå•è¯å¯¹æ˜¯åœ¨ build æ–¹æ³•å†…éƒ¨ç”Ÿæˆçš„ã€‚æ¯æ¬¡çƒ­æ›´æ–°æ—¶ï¼Œbuildæ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚\n\n![âš¡](http://wx4.sinaimg.cn/large/006ar8zggy1g0dvhib782j30nx02bq2x.jpg)\n","tags":["Dart","Flutter","pub"],"categories":["Dart","Flutter"]},{"title":"Dart for the web  ä¸€å°æ—¶å…¥é—¨","url":"/2019/02/20/DartWeb/","content":"\n<hr>\n\nå®˜æ–¹ç½‘ç«™ï¼šhttps://webdev.dartlang.org/guides/get-started\n\n#### 1ã€Dart-window å®‰è£…\nhttp://www.gekorm.com/dart-windows/\n\n#### 2ã€å®‰è£…å¼€å‘å·¥å…· webstorm\nhttps://webdev.dartlang.org/tools/webstorm\n\n#### 3ã€å®‰è£…ä½¿ç”¨ pub å®‰è£…ä¸¤ä¸ªå¿…å¤‡æ’ä»¶ï¼šactivateï¼Œwebdev\n```bash\n> pub global activate webdev\n> pub global activate stagehand\n```\n\n<!--more--> \n\n#### 4ã€æ–°å»ºä¸€ä¸ªDarté¡¹ç›®\n\n![Create Dart](http://wx3.sinaimg.cn/large/006ar8zggy1g0d0u82axpj30r00gwjsm.jpg)\n\n#### 5ã€å¯åŠ¨åº”ç”¨ç¨‹åº\n\n![Run 'index.html'](http://wx3.sinaimg.cn/large/006ar8zggy1g0d0yt2xluj30ps0m1q5g.jpg)\n\n![Serving `web` on http://localhost:53322](http://wx3.sinaimg.cn/large/006ar8zggy1g0d0yuv7wqj30k207d74n.jpg)\n\n![Your Dart app is running.](http://wx3.sinaimg.cn/large/006ar8zggy1g0d0ywnt0lj313n04zaa8.jpg)","tags":["Dart"],"categories":["Dart"]},{"title":"åœ¨ Windows ä¸Šæ­å»º Flutter å¼€å‘ç¯å¢ƒ","url":"/2019/02/20/åœ¨Windowsä¸Šæ­å»ºFlutterå¼€å‘ç¯å¢ƒ/","content":"\n<hr>\n1ã€è·å–Flutter SDKï¼šhttps://flutter.io/sdk-archive/#windows\n\n2ã€è§£å‹ **flutter_windows_v1.0.0-stable.zip**ï¼Œå¹¶å°† flutter/bin åŠ å…¥åˆ°ç¯å¢ƒå˜é‡\n\n3ã€å®‰è£…Android Studio ï¼šhttps://developer.android.google.cn\n\n4ã€åœ¨ Android Studio çš„ **Browse repositories** å®‰è£… **Flutter** å’Œ **Dart** æ’ä»¶\n- Flutteræ’ä»¶ï¼š æ”¯æŒFlutterå¼€å‘å·¥ä½œæµ (è¿è¡Œã€è°ƒè¯•ã€çƒ­é‡è½½ç­‰)ã€‚\n- Dartæ’ä»¶ï¼š æä¾›ä»£ç åˆ†æ (è¾“å…¥ä»£ç æ—¶è¿›è¡ŒéªŒè¯ã€ä»£ç è¡¥å…¨ç­‰)ã€‚\n<!--more--> \næ¬¢è¿é¡µ -> configure -> Plugins -> Browse repositories... -> Search\n\n![configure](http://wx4.sinaimg.cn/large/006ar8zggy1g0cy57wy3qj30mr0ng3zw.jpg)\n\n![Plugins](http://wx4.sinaimg.cn/large/006ar8zggy1g0cy5amfb5j30ru0nttac.jpg)\n\n![Browse repositories...](http://wx4.sinaimg.cn/large/006ar8zggy1g0cy5d3o4xj30so0o20v9.jpg)\n\n5ã€å®‰è£…å®Œ flutter æ’ä»¶åï¼Œé‡å¯ä¸€ä¸‹Android Studioï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æ–°å»º flutter æ¨¡æ¿äº†ã€‚\n\næ¬¢è¿é¡µ -> Start a new Flutter project -> Flutter application -> è¾“å…¥é¡¹ç›®åç§°å’Œé€‰æ‹©flutterçš„sdkç›®å½• -> finish\n\n![Start a new Flutter project](http://wx4.sinaimg.cn/large/006ar8zggy1g0cyaijpcwj30mu0i3q3y.jpg)\n\n![Flutter application](http://wx4.sinaimg.cn/large/006ar8zggy1g0cyie6pehj30ru0nn3zo.jpg)\n\n![flutter sdk ](http://wx4.sinaimg.cn/large/006ar8zggy1g0cyigbo29j30ru0nn75k.jpg)\n\n![finish](http://wx4.sinaimg.cn/large/006ar8zggy1g0cyij36rtj30ru0nnjsk.jpg)\n\n6ã€è¿è¡Œåº”ç”¨ç¨‹åº\n\n![Flutter Demo Home Page](http://wx4.sinaimg.cn/large/006ar8zggy1g0cyqjwvnkj313n0q7wka.jpg)\n\n---\n\nå¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š\n##### 0. ä»»ä½•è®¿é—®ä¸äº†ç½‘ç«™ï¼Œè‡ªåŠ¨å®‰è£…å¤±è´¥ã€ä¸‹è½½å¤±è´¥ç­‰ç½‘ç»œé—®é¢˜ï¼Œè‡ªå·±æƒ³åŠæ³•ævpn fqã€‚\n\n- [é˜¿é‡Œäº‘ é¦™æ¸¯æœåŠ¡å™¨ Centos7 3åˆ†é’Ÿæå®švpn](https://www.cnblogs.com/CyLee/p/10401766.html)\n\n- [åŠ é€Ÿåº¦](https://dc.36fy.com/)\n\n##### 1. å¯åŠ¨Android Studioæ—¶ï¼Œå‡ºç°â€œUnable to access Android SDK add-on listâ€\nç‚¹å‡» **\"Cancel\"**ï¼Œ ç¨åå†æ ¹æ®æŒ‡å¼•ï¼Œè‡ªåŠ¨å®‰è£…å³å¯ã€‚\n\n##### 2. å…¶ä»–å¸¸è§é…ç½®é—®é¢˜\n[https://book.flutterchina.club/chapter1/configuration.html](https://book.flutterchina.club/chapter1/configuration.html)","tags":["flutter"],"categories":["flutter"]},{"title":"é˜¿é‡Œäº‘ é¦™æ¸¯æœåŠ¡å™¨ Centos7 3åˆ†é’Ÿæå®švpn","url":"/2019/02/19/aliyun/","content":"\n<hr>\n\n\næ•™ç¨‹ä¼ é€é—¨ï¼š\n[é˜¿é‡Œäº‘ä¸»æœºæ­å»ºVPNæœåŠ¡](https://blog.csdn.net/ztx114/article/details/80423705)\n[åœ¨å…è´¹EC2ä¸Šæ­å»ºè‡ªå·±çš„VPN](https://my.oschina.net/imcf/blog/659230)\n\n<!--more--> \n\n#### 1ã€å®‰è£…python å’Œ Pip\n```\n$ yum install python-setuptools && easy_install pip\n```\n\n#### 2ã€å®‰è£… shadowsocks\n```\n$ pip install shadowsocks\n```\n\n#### 3ã€æ·»åŠ  shadowsocks çš„é…ç½®æ–‡ä»¶\n```\n$ vi /etc/shadowsocks.json\n{\n    \"server\": \"0.0.0.0\",\n    \"server_port\": 443,\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\": 1080,\n    \"password\": \"daweiyixiangshihao\",\n    \"timeout\": 300,\n    \"method\": \"aes-256-cfb\",\n    \"fast_open\": false,\n    \"workers\": 1\n}\n```\n\n- server_portï¼šæ˜¯å¼€æ”¾ç«¯å£ï¼Œé˜¿é‡Œäº‘é»˜è®¤å¼€æ”¾äº†443;\n- passwordï¼šæ˜¯è¿æ¥å¯†ç ;\n- serverï¼šå°±æ˜¯æœ¬æœºï¼Œä¿æŒ0.0.0.0 å³å¯;\n- methodï¼šæ˜¯ä¼ è¾“æ–¹å¼ï¼Œä¿æŒ\"aes-256-cfb\" å³å¯;\n\n#### 4ã€å¯åŠ¨ shadowsocks æœåŠ¡\n```\n$ ssserver -c /etc/shadowsocks.json -d start\n```\n\n#### 5ã€å…³é—­é˜²ç«å¢™\nCentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ã€‚éœ€è¦ä½¿ç”¨å‘½ä»¤å…³é—­é˜²ç«å¢™ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ä»£ç†ã€‚\n\næŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€å‘½ä»¤ï¼šfirewall-cmd --state\n\nåœæ­¢firewallå‘½ä»¤ï¼šsystemctl stop firewalld.service\n\nç¦æ­¢firewallå¼€æœºå¯åŠ¨å‘½ä»¤ï¼šsystemctl disable firewalld.service\n\n#### 6ã€æœ¬æœºä¸‹è½½  shadowsocks.exe \né“¾æ¥ï¼šhttps://pan.baidu.com/s/17y-v40jPGIHcftuE7gGiEA \næå–ç ï¼š5gzb \n\n#### 7ã€é…ç½® shadowsocks.exe \n![](aliyun/1.png)\n\n#### 8ã€è®¿é—®google.com æµ‹è¯•\n![](aliyun/2.png)\n\n# åè®°\n\ntest.sh\n> $ vi test.sh\n> $ chmod 777 test.sh\n\n```\n#!/bin/bash\n\nyum install python-setuptools && easy_install pip\n\npip install shadowsocks\n\ncat>/etc/shadowsocks.json<<EOF\n{\n    \"server\": \"0.0.0.0\",\n    \"server_port\": 443,\n    \"local_address\": \"127.0.0.1\",\n    \"local_port\": 1080,\n    \"password\": \"daweiyixiangshihao\",\n    \"timeout\": 300,\n    \"method\": \"aes-256-cfb\",\n    \"fast_open\": false,\n    \"workers\": 1\n}\nEOF\n\nssserver -c /etc/shadowsocks.json -d start\n\nsystemctl stop firewalld.service\n\nsystemctl disable firewalld.service\n```\n\n","tags":["centos","aliyun","vpn","shadowsocks"],"categories":["centos","vpn"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å…«ï¼šDockerfile ä¸­çš„å‘½ä»¤ä¸‰å…„è´µ","url":"/2019/02/11/Dockeræ¯å¤©äº”åˆ†é’Ÿ8/","content":"\n<hr>\n\n# RUN vs CMD vs ENTRYPOINT\n\nç®€å•åœ°è¯´ï¼š\nï¼ˆ1ï¼‰RUNï¼š è¯¥å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªé•œåƒå±‚ï¼Œé€‚åˆåœ¨å®‰è£…è½¯ä»¶åŒ…çš„æ—¶å€™ä½¿ç”¨ã€‚\nï¼ˆ2ï¼‰CMDï¼š é…ç½®å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å‚æ•°ï¼Œä½† CMD ä¼šè¢« `$ docker run` åé¢è·Ÿçš„å‘½ä»¤è¡Œå‚æ•°æ›¿æ¢ã€‚æ¯”å¦‚ `$ docker run -it [image] /bash/bin`ï¼Œ é‚£ä¹ˆ CMD æŒ‡ä»¤ä¼šè¢«å¿½ç•¥æ‰ã€‚\nï¼ˆ3ï¼‰ENTRYPOINTï¼šé…ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚\n\n<!--more--> \n\n# RUN\nRUN æŒ‡ä»¤ä¼šåˆ›å»ºæ–°çš„é•œåƒå±‚ã€‚ é€šå¸¸ç”¨äºå®‰è£…åº”ç”¨å’Œè½¯ä»¶åŒ…ã€‚ Dockerfile ä¸­å¸¸å¸¸åŒ…å«å¤šä¸ª RUN æŒ‡ä»¤ã€‚\n\nRUN æœ‰ä¸¤ç§æ ¼å¼ï¼š\nï¼ˆ1ï¼‰ **Shell æ ¼å¼ï¼ˆæ¨èï¼‰ï¼š `RUN yum update && yum install gcc-c++\\vim\\git -y`**\nï¼ˆ2ï¼‰ Exec æ ¼å¼ï¼š `RUN [\"yum\", \"install\", \"gcc-c++\", \"vim\", \"git\", \"-y\"]`\n\n> æ³¨æ„ï¼Œæˆ‘ä»¬åå¤æåˆ° RUN æŒ‡ä»¤ä¼šåˆ›å»ºæ–°çš„é•œåƒå±‚ã€‚é•œåƒå±‚çš„æ¦‚å¿µå°±ç±»ä¼¼ç¼“å­˜ã€‚ä¼šåœ¨å„ä¸ªåœ°æ–¹çš„dockerfileè¢«åå¤ä½¿ç”¨ã€‚\n> è¿™é‡Œ yum update æ”¾åœ¨å’Œå®‰è£…åŒä¸€ä¸ªæŒ‡ä»¤ä¸­ã€‚èƒ½ä¿è¯æ¯æ¬¡å®‰è£…éƒ½æ˜¯æœ€æ–°çš„åŒ…ã€‚å¦‚æœ yum update å•ç‹¬çš„RUNã€‚åˆ™ä¼šåˆ›å»ºä¸€ä¸ª yum update çš„é•œåƒå±‚ã€‚å½“å…¶ä»–åœ°æ–¹çš„d ockerfile ä½¿ç”¨ yum update çš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥ä½¿ç”¨è¯¥é•œåƒå±‚ï¼Œè€Œè¿™ä¸€å±‚å¾ˆå¯èƒ½æ˜¯å¾ˆä¹…ä»¥å‰ç¼“å­˜çš„äº†ã€‚\n\n# CMD\næ­¤å‘½ä»¤ä¼šåœ¨å®¹å™¨å¯åŠ¨åè¿è¡Œã€‚ å‰ææ˜¯ `$ docker run` æ²¡æœ‰æŒ‡å®šå…¶ä»–å‘½ä»¤ã€‚\n- å¦‚æœ docker run æŒ‡å®šäº†å…¶ä»–å‘½ä»¤ï¼Œ CMD æŒ‡å®šäº†é»˜è®¤å‘½ä»¤å°†è¢«å¿½ç•¥ã€‚\n- å¦‚æœ Docker file ä¸­æœ‰å¤šä¸ª CMD æŒ‡ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ª CMD æœ‰æ•ˆã€‚\n\nCMD æœ‰ä¸‰ç§æ ¼å¼ï¼š\nï¼ˆ1ï¼‰ **Exec æ ¼å¼ï¼ˆæ¨èï¼‰ï¼š CMD [\"/bin/echo\", \"Hello World\"]**\nï¼ˆ2ï¼‰ å«è¡£æ ¼å¼ï¼š CMD [\"param1\", \"params2\"]\nï¼ˆ3ï¼‰ Shellæ ¼å¼ï¼š CMD echo \"Hello World\"\n\n> ï¼ˆ2ï¼‰å«è¡£æ ¼å¼æ˜¯ä¸º ENTRYPOINT æä¾›å‚æ•°ï¼Œæ­¤æ—¶ ENTRYPOINT å¿…é¡»ä½¿ç”¨ Exec æ ¼å¼ã€‚\n\nä¸¾ä¾‹è¯´æ˜ CMD å’Œ `$ docker run` çš„å…³ç³»ï¼ŒDockerfile ç‰‡æ®µå¦‚ä¸‹ï¼š\n\n```dockerfile\nCMD echo \"Hello world\"\n```\nè¿è¡Œå®¹å™¨ `$ docker run -it [image]` å°†è¾“å‡ºï¼š\n```\nHello world\n```\nä½†å¦‚æœåŠ ä¸Šå‘½ä»¤ï¼š `$ docker run -it [image] /bin/bash`ï¼Œ CMD ä¼šè¢«å¿½ç•¥æ‰ã€‚ä¹Ÿå°±æ²¡æœ‰è¾“å‡º `Hello world` äº†\n\n# ENTRYPOINT\n\nENTRYPOINT æŒ‡ä»¤å¯ä»¥è®©å®¹å™¨ä»¥åº”ç”¨ç¨‹åºæˆ–è€…æœåŠ¡çš„å½¢å¼è¿è¡Œã€‚\n\nENTRYPOINT ä¸ CMD å¾ˆç›¸ä¼¼ï¼Œå®ƒä»¬éƒ½å¯ä»¥æŒ‡å®šæ‰§è¡Œçš„å‘½ä»¤å’Œå‚æ•°ã€‚ä¸åŒçš„åœ°æ–¹åœ¨äº ENTRYPOINT ä¸ä¼šè¢« `$ docker run` æ—¶æŒ‡å®šçš„å‘½ä»¤å¿½ç•¥ã€‚\n\nENTRYPOINT æœ‰ä¸¤ç§æ ¼å¼ï¼š\nï¼ˆ1ï¼‰ **Exec æ ¼å¼ï¼ˆæ¨èï¼‰ï¼š ENTRYPOINT [\"executable\", \"param1\", \"param2\"]**\nï¼ˆ2ï¼‰Shell æ ¼å¼ï¼šENTRYPOINT command param1 param2\n\n> ENTRYPOINT ä¸åŒçš„æ ¼å¼æ•ˆæœå·®åˆ«å·¨å¤§ã€‚ é€‰æ‹©ä½¿ç”¨æ—¶å¿…é¡»å°å¿ƒã€‚\n> ENTRYPOINT çš„ Exec æ ¼å¼å¯ä»¥æ¥å— CMD æˆ– `$ docker run` æä¾›çš„å‚æ•°ã€‚\n> ENTRYPOINT çš„ Shell æ ¼å¼ä¼šå¿½ç•¥ä»»ä½• CMD æˆ– `$ docker run` æä¾›çš„å‚æ•°ã€‚\n\n### ENTRYPOINT çš„ Exec æ ¼å¼\n\nENTRYPOINT çš„ Exec æ ¼å¼å¯ä»¥æ¥å— CMD æˆ– `$ docker run` æä¾›çš„å‚æ•°ã€‚ æ¯”å¦‚ä¸‹é¢çš„ Dockerfile ç‰‡æ®µï¼š\n```dockerfile\nENTRYPOINT [\"/bin/echo\", \"Hello\"] CMD [\"world\"]\n```\nå½“å®¹å™¨é€šè¿‡ `$ docker run -it [image]` ï¼ˆæ— å‘½ä»¤ï¼‰å¯åŠ¨æ—¶ï¼Œè¾“å‡ºä¸ºï¼š\n```\nHello world\n```\n\nè€Œå¦‚æœé€šè¿‡ `$ docker run -it [image] CloudMan` å¯åŠ¨æ—¶ï¼Œåˆ™è¾“å‡ºä¸ºï¼š\n```\nHello CloudMan\n```\n\n# Exec æ ¼å¼ ä¸ å˜é‡ shell è§£æ\n\n> è¯·æ³¨æ„ï¼Œå½“éœ€è¦è§£æå˜é‡æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ Shell è§£æï¼Œå¦‚/bin/shï¼ˆbashï¼‰ \n\nä¾‹å¦‚ä¸‹é¢çš„ Dockerfile ç‰‡æ®µï¼Œæˆ‘ä»¬ç”¨ ENV æŒ‡ä»¤è®¾ç½®äº†ç¯å¢ƒå˜é‡ $name å¹¶ä¸ä¼šè¢«è§£æï¼š\n\n```dockerfile\nENV name Cloud Man ENTRYPOINT [\"/bin/echo\", \"Hello, $name\"]\n```\n\nè¿è¡Œå®¹å™¨å°†è¾“å‡ºï¼š \n```shell\nHello, $name\n```\n\n> æ³¨æ„ï¼šç¯å¢ƒå˜é‡ $name æ²¡æœ‰è¢«æ›¿æ¢ã€‚å¿…é¡»ä½¿ç”¨ shell è§£æã€‚\n\nå¦‚æœå¸Œæœ›ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦‚ä¸‹ä¿®æ”¹ Dockerfileï¼š\n```dockerfile\nENV name Cloud Man ENTRYPOINT [\"/bin/sh\", \"-c\", \"echo Hello, $name\"]\n```\n\nè¿è¡Œå®¹å™¨å°†è¾“å‡ºï¼š \n```shell\nHello, Cloud Man\n```","tags":["Docker"],"categories":["Docker"]},{"title":"ç¢ç‰‡åŒ–ç»éªŒå¹¿åœº","url":"/2019/02/04/ç¢ç‰‡åŒ–ç»éªŒå¹¿åœº/","content":"\n<hr>\n\n### å¦‚ä½•åœ¨ dockerhub æ‰¾åˆ°åˆé€‚çš„é•œåƒï¼Ÿ\n\n1. ç¡®å®šä½ çš„ base é•œåƒï¼Œå¦‚`centos`\n3. ç¡®å®šä½ çš„å¼€å‘ç¯å¢ƒå’Œä¾èµ–ï¼Œæ¯”å¦‚`php + nginx + mysql + redis`\n3. æ‰¾åˆ°å®˜æ–¹é•œåƒä»“åº“\n","tags":["ç¢ç‰‡åŒ–","ç»éªŒ"],"categories":["ç¢ç‰‡åŒ–","ç»éªŒ"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸ƒï¼šè°ƒè¯• dockerfile","url":"/2019/02/03/Dockeræ¯å¤©äº”åˆ†é’Ÿ7/","content":"\n<hr>\n\næ€»ç»“ä¸€ä¸‹ `dockerfile` çš„æ„å»ºé•œåƒçš„è¿‡ç¨‹ï¼š\n1. ä» base é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚\n2. æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œå¯¹å®¹å™¨åšä¿®æ”¹ã€‚\n3. æ‰§è¡Œç±»ä¼¼ `docker commit` çš„æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒå±‚ã€‚\n4. Docker å†åŸºäºåˆšåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ã€‚\n5. é‡å¤ 2 ~ 4 æ­¥ï¼Œç›´åˆ° `dockerfile` ä¸­æ‰€æœ‰çš„æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ã€‚\n\nä»è¿™ä¸ªè¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œ**å¦‚æœ `dockerfile` ç”±äºæŸç§åŸå› æ‰§è¡Œåˆ°æŸä¸ªæŒ‡ä»¤å¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå¾—åˆ°å‰ä¸€ä¸ªæŒ‡ä»¤æˆåŠŸæ‰§è¡Œæ„å»ºå‡ºçš„é•œåƒã€‚**\n\nè¿™æ ·å½“æˆ‘ä»¬ä¿®å¤å®Œbugå†æ¬¡æ‰§è¡Œæ„å»ºçš„æ—¶å€™ï¼Œä¹Ÿèƒ½ä¾é dockerçš„ç¼“å­˜ç‰¹æ€§è·³è¿‡å·²å®Œæˆçš„é•œåƒã€‚è¿™å¯¹å¼€å‘å’Œè°ƒè¯• `dockerfile` æ˜¯éå¸¸å‹å¥½ä¸”æœ‰å¸®åŠ©çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°çš„æ‰“å°å’Œæµ‹è¯•ï¼Œå¿«é€Ÿå®šä½é”™è¯¯å’Œåˆ†æåŸå› ã€‚\n\n<!--more--> \n\n<hr>\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè°ƒè¯•ç¤ºä¾‹ï¼Œä»¥ buysbox ä¸º base é•œåƒï¼š\n\n> BusyBox æ˜¯ä¸€ä¸ªé›†æˆäº†ä¸‰ç™¾å¤šä¸ªæœ€å¸¸ç”¨Linuxå‘½ä»¤å’Œå·¥å…·çš„è½¯ä»¶ã€‚BusyBox åŒ…å«äº†ä¸€äº›ç®€å•çš„å·¥å…·ï¼Œä¾‹å¦‚lsã€catå’Œechoç­‰ç­‰ï¼Œè¿˜åŒ…å«äº†ä¸€äº›æ›´å¤§ã€æ›´å¤æ‚çš„å·¥å…·ï¼Œä¾‹grepã€findã€mountä»¥åŠtelnetã€‚æœ‰äº›äººå°† BusyBox ç§°ä¸º Linux å·¥å…·é‡Œçš„ç‘å£«å†›åˆ€ã€‚\n\næ–°å»ºä¸€ä¸ª `Dockerfile` å’Œä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ `testfile`:\n```bash\n[root@10-255-0-217 dc2-user]# echo test > testfile\n[root@10-255-0-217 dc2-user]# vim Dockerfile\n```\nDockerfile å†…å®¹å¦‚ä¸‹ï¼š\n> FROM busybox\n> RUN touch tmpfile\n> RUN /bin/bash -c echo \"continue to build...\"\n> COPY testfile /\n\nå¼€å§‹æ„å»ºè°ƒè¯•\n```bash\n[root@10-255-0-217 dc2-user]# docker build -t image-debug .\n```\n![/bin/sh: /bin/bash: not found](Dockeræ¯å¤©äº”åˆ†é’Ÿ7/1.png)\n\næˆ‘ä»¬å¯ä»¥è½»æ¾å‘ç°åœ¨æ‰§è¡Œç¬¬ä¸‰å¥æŒ‡ä»¤ï¼š `RUN /bin/bash -c echo \"continue to build...\"` çš„æ—¶å€™å‘ç”Ÿäº†å¼‚å¸¸ï¼Œ\n\né”™è¯¯ä¿¡æ¯æ˜¯: `/bin/sh: /bin/bash: not found`\n\nå¾ˆæ˜¾ç„¶æˆ‘ä»¬å¾—çŸ¥äº† buysbox ç³»ç»Ÿä¸­ä¸åŒ…å« /bin/bash ç¨‹åºã€‚ç„¶åå†è¿›ä¸€æ­¥çš„ä¿®æ­£ã€‚\n\n<hr>\n\nä¸Šè¿°è¿™ç§é”™è¯¯æ˜¯æ¯”è¾ƒç®€å•ä¸”æ˜¾è€Œæ˜“è§çš„ï¼Œå¤§éƒ¨åˆ†çš„bugéƒ½æ˜¯éš¾ä»¥è‚‰çœ¼è§‚å¯Ÿï¼Œæˆ‘ä»¬å¸Œæœ›è¿›ä¸€æ­¥çš„è°ƒè¯•ã€‚\n\næ ¹æ® `Dockerfile` æ„å»ºé•œåƒçš„ç‰¹æ€§ï¼Œå°½ç®¡ç”±äºæŸç§åŸå› æ‰§è¡Œåˆ°æŸä¸ªæŒ‡ä»¤å¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿå¾—åˆ°å‰ä¸€ä¸ªæŒ‡ä»¤æˆåŠŸæ‰§è¡Œæ„å»ºå‡ºçš„é•œåƒã€‚\n\nåœ¨æ­¤ä¾‹å­ä¸­ï¼Œå°±æ˜¯ç”± `RUN touch tmpfile` æŒ‡ä»¤æ„æˆçš„é•œåƒ `6fa9f3938b8b`ï¼š\n\n![RUN touch tmpfile](Dockeræ¯å¤©äº”åˆ†é’Ÿ7/2.png)\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ä» `docker images` ä¸­æŸ¥çœ‹æœ€åæˆåŠŸçš„é•œåƒï¼š\n\n![docker images](Dockeræ¯å¤©äº”åˆ†é’Ÿ7/3.png)\n\nç„¶åæˆ‘ä»¬è¿›å…¥é•œåƒä¹‹ä¸­è¿›ä¸€æ­¥çš„æ“ä½œä½“éªŒå’Œè°ƒè¯•ï¼š\n```bash\n[root@10-255-0-217 dc2-user]# docker run -it 6fa9f3938b8b\n/ # /bin/bash -c echo \"continue to build...\"\nsh: /bin/bash: not found\n/ # \n```\n\nä¾ç„¶èƒ½å¾—å‡º `/bin/bash: not found` çš„é”™è¯¯å®šä½ç»“æœã€‚","tags":["Docker"],"categories":["Docker"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å…­ï¼šç¬¬ä¸€ä¸ª Dockerfile","url":"/2019/02/02/Dockeræ¯å¤©äº”åˆ†é’Ÿ6/","content":"\n<hr>\n\nDockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè®°å½•äº†é•œåƒæ„å»ºçš„æ‰€æœ‰æ­¥éª¤ã€‚\n\n```bash\n$ vim Dockerfile\n```\nDockerfile å†…å®¹å¦‚ä¸‹ï¼š\n\n> FROM centos\n> RUN yum install -y vim\n\nå¼€å§‹æ„å»º\n\n<!--more--> \n\n```bash\n$ docker build -t centos-with-vim .\n```\n- -tï¼šæŒ‡æ˜é•œåƒçš„åå­—ï¼Œè¯¥ç¤ºä¾‹ä¸º `centos-with-vim`ï¼›\n- è¯·æ³¨æ„æœ€åä¸€ä¸ª`.` å®ƒæŒ‡æ˜åœ¨å½“å‰è·¯å¾„å¯»æ‰¾ Dockerfileï¼›\n\nç»è¿‡æ¼«é•¿çš„å®‰è£…ä¹‹åã€‚æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹é•œåƒåˆ—è¡¨ `$ docker images`:\n\n![docker images](Dockeræ¯å¤©äº”åˆ†é’Ÿ6/1.png)\n\n### docker çš„`ç¼“å­˜`ç‰¹æ€§ï¼š\n\nå¯ä»¥çœ‹åˆ° Docker åˆ†ä¸ºäº†ä¸¤ä¸ªé•œåƒï¼š `centos` å’Œ `centos-with-vim`ã€‚\n\nå…¶ä¸­ `centos` é•œåƒæˆ‘ä»¬ç§°ä¸ºbaseé•œåƒã€‚è€Œ `centos-with-vim` å°±æ˜¯åŸºäºbaseé•œåƒæ„å»ºçš„ã€‚\n\nå¦‚æœåœ¨æ„å»ºä¹‹å‰ä½ çš„æœ¬åœ°é•œåƒå·²ç»å­˜åœ¨baseé•œåƒã€‚é‚£ä¹ˆä¼šç›´æ¥ä½¿ç”¨ï¼Œæ— é¡»é‡æ–°ä¸‹è½½å’Œæ„å»ºã€‚è¿™ä¹Ÿæ˜¯ docker çš„é‡è¦`ç¼“å­˜`ç‰¹æ€§ã€‚\n","tags":["Docker"],"categories":["Docker"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹äº”ï¼šdocker commit åˆ¶ä½œé•œåƒ","url":"/2019/02/02/Dockeræ¯å¤©äº”åˆ†é’Ÿ5/","content":"\n<hr>\n\ndocker commit å‘½ä»¤æ˜¯åˆ›å»ºæ–°é•œåƒæœ€ç›´æ¥çš„æ–¹æ³•ï¼Œå…¶è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š\n- è¿è¡Œå®¹å™¨\n- ä¿®æ”¹å®¹å™¨\n- å°†å®¹å™¨ä¿å­˜ä¸ºæ–°é•œåƒ\n\n###### ï¼ˆ1ï¼‰è¿è¡Œå®¹å™¨\n```bash\n[root@10-255-0-217 dc2-user]# docker run -it centos\n\nUnable to find image 'centos:latest' locally\nlatest: Pulling from library/centos\na02a4930cb5d: Pulling fs layer \nlatest: Pulling from library/centos\na02a4930cb5d: Pull complete \nDigest: sha256:184e5f35598e333bfa7de10d8fb1cebb5ee4df5bc0f970bf2b1e7c7345136426\nStatus: Downloaded newer image for centos:latest\n\n[root@ea9b3dcd88ad /]# \n```\n\nè‡ªåŠ¨ä¸‹è½½äº†æœ€æ–°ç‰ˆæœ¬çš„ Centos é•œåƒï¼Œå¹¶ä¸”è¿è¡Œå’Œè¿›å…¥äº†å®¹å™¨ï¼ˆea9b3dcd88adï¼‰ã€‚\n\n<!--more--> \n\n###### (2) ä¿®æ”¹å®¹å™¨\n\nè¿™é‡Œç¤ºä¾‹å®‰è£… vim \n\n```bash\n[root@ea9b3dcd88ad /]# vim\nbash: vim: command not found\n\n[root@ea9b3dcd88ad /]# yum install -y vim\n...\nComplete!\n```\n\n###### (3) ä¿å­˜ä¸ºæ–°é•œåƒ\n\nè®©å®¹å™¨ç»§ç»­è¿è¡Œç€ï¼Œç„¶å `æ–°å»ºçª—å£` æ¥æŸ¥çœ‹å½“å‰è¿è¡Œçš„é•œåƒã€‚\n```bash\n[root@10-255-0-217 dc2-user]# docker ps\n```\n![silly_aryabhata](Dockeræ¯å¤©äº”åˆ†é’Ÿ5/1.png)\n\n`silly_aryabhata` æ˜¯ Docker ä¸ºæˆ‘ä»¬çš„å®¹å™¨éšæœºåˆ†é…çš„åå­—ã€‚\n\næ‰§è¡Œ `docker commit` å‘½ä»¤å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒã€‚\n\n```bash\n[root@10-255-0-217 dc2-user]# docker commit silly_aryabhata centos-with-vi\n\nsha256:3badf3a0b2d0a59bd3cd106e70d088c32da2e59676746e7613a30f7eb5d3e2b0\n```\n\n![centos-with-vi](Dockeræ¯å¤©äº”åˆ†é’Ÿ5/2.png)\n\nå¯¹æ¯”ä¸¤ä¸ªé•œåƒï¼Œä» `SIZE` ä¸Šçœ‹åˆ°é•œåƒå› ä¸ºå®‰è£…äº† `vim` è½¯ä»¶è€Œå˜å¤§äº†ã€‚\n\n<hr>\n\nä»¥ä¸Šæ¼”ç¤ºäº†å¦‚ä½•ç”¨ `docker commit` åˆ›å»ºæ–°é•œåƒã€‚\n\n> ç„¶è€Œï¼ŒDocker å¹¶ä¸å»ºè®®ç”¨æˆ·é€šè¿‡ `docker commit` è¿™ç§æ–¹å¼æ„å»ºé•œåƒã€‚\n\n### åŸå› å¦‚ä¸‹ï¼š\n\n1. è¿™æ˜¯ä¸€ç§æ‰‹å·¥åˆ›å»ºé•œåƒçš„æ–¹å¼ï¼Œå®¹æ˜“å‡ºé”™ï¼Œæ•ˆç‡ä½ä¸”é‡å¤æ€§å¼±ã€‚æ¯”å¦‚è¦åœ¨ubuntué•œåƒä¸­ä¹ŸåŠ å…¥vimï¼Œè¿˜å¾—é‡å¤å‰é¢æ‰€æœ‰æ­¥éª¤ã€‚\n2. ä½¿ç”¨è€…å¹¶ä¸çŸ¥é“é•œåƒæ˜¯å¦‚ä½•åˆ›å»ºå‡ºæ¥çš„ï¼Œé‡Œé¢æä¾›ä»€ä¹ˆæœåŠ¡ï¼ŒåŒ…å«ä»€ä¹ˆç¨‹åºï¼Œé‡Œé¢æ˜¯å¦æœ‰æ¶æ„ç¨‹åºï¼Ÿä¹Ÿå°±æ˜¯è¯´æ— æ³•å¯¹é•œåƒè¿›è¡Œå®¡è®¡ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£ã€‚\n\næ—¢ç„¶ `docker commit` ä¸æ˜¯æ¨èçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦èŠ±æ—¶é—´å­¦ä¹ å‘¢ï¼Ÿ\n\n> å³ä¾¿æ˜¯ç”¨ dockerfileï¼ˆæ¨èæ–¹æ³•ï¼‰æ„å»ºé•œåƒï¼Œåº•å±‚ä¹Ÿæ˜¯ `docker commit` ä¸€å±‚ä¸€å±‚æ„å»ºé•œåƒçš„ã€‚å­¦ä¹  `docker commit` èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´åŠ æ·±å…¥çš„ç†è§£æ„å»ºè¿‡ç¨‹å’Œé•œåƒçš„åˆ†å±‚ç»“æ„ã€‚","tags":["Docker"],"categories":["Docker"]},{"title":"ç¢ç‰‡åŒ–çŸ¥è¯†å¹¿åœº","url":"/2019/02/01/ç¢ç‰‡åŒ–çŸ¥è¯†å¹¿åœº/","content":"\n<hr>\n\n###### (1) å¦‚ä½•è°ƒè¯• node_modules ä¸­çš„ä»£ç ï¼Ÿ\n\nå¦‚æœä½ å°è¯•ç›´æ¥ä¿®æ”¹ `node_modules` ä¸­çš„æºç ï¼Œå¦‚åŠ ä¸Šæ–­ç‚¹ `debugger;` æˆ–è€… æ‰“å° `console.log` æ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\n\nè¿™æ˜¯å› ä¸ºä½ å¼•ç”¨çš„æ˜¯å®ƒç¼–è¯‘å¥½çš„å†…å®¹ã€‚ï¼ˆé€šå¸¸åœ¨ç›®å½•ä¸‹ `package.json` ä¸­ `main` å­—æ®µæŒ‡å‘ï¼‰ã€‚è€Œä½ ä¿®æ”¹çš„æ˜¯å®ƒçš„æºç ï¼Œå¹¶æ²¡æœ‰å®æ—¶ç¼–è¯‘ã€‚å½“ç„¶ä½ å¯ä»¥ä¿®æ”¹æºç åé‡æ–°ç¼–è¯‘ä»–ä»¬ï¼Œä½†æ²¡ä»€ä¹ˆå¿…è¦ã€‚è¿™æ ·å¾ˆå®¹æ˜“ç©å´©â€¦â€¦_(:3ã€âˆ )_\n\n>ï¼ˆä»”ç»†æƒ³æƒ³æœ¬æ¥å°±ä¸å¯èƒ½å®æ—¶ç¼–è¯‘ `node_modules` ä¸­æ‰€æœ‰çš„ä¾èµ–ã€‚å¹³æ—¶å¼€å‘ `webpack` çƒ­ç¼–è¯‘çš„ `src` ä¸‹çš„æ–‡ä»¶éƒ½éœ€è¦è€—è´¹å‡ ç§’é’Ÿäº†ã€‚æ›´ä¸å¯èƒ½å»å…¼é¡¾ç¼–è¯‘ `node_modules` ä¸­çš„å†…å®¹ï¼‰\n\næ­£ç¡®çš„åšæ³•æ˜¯ï¼šå°†**å…¥å£æ–‡ä»¶**è¿ç§»åˆ°é¡¹ç›®ç›®å½•ï¼Œè€Œå…¥å£æ–‡ä»¶ä¸­çš„å…¶ä»–ä¾èµ–ç›´æ¥æŒ‡å‘ `node_modules` ä¸­çš„æºç ç›®å½•å³å¯ã€‚ \n\nåŸç†æ˜¯ä»€ä¹ˆ? å°±åƒä¸Šæ–‡è¯´çš„ï¼Œ`webpack` çƒ­ç¼–è¯‘çš„åªæœ‰ `src` ä¸‹çš„é¡¹ç›®ï¼Œå¦‚æœä½ å°†è¦è°ƒè¯•çš„æ–‡ä»¶è¿ç§»åˆ°ä½ çš„é¡¹ç›® `src` ä¸­ï¼Œ`webpack` å°±èƒ½ç¼–è¯‘äº†ï¼Œè€Œå…¥å£çš„ä¾èµ–æ–‡ä»¶å“ªæ€•æŒ‡å‘ `node_modules` ä¹Ÿæ²¡å…³ç³»ï¼Œ`webpack` ä¹Ÿä¼šè‡ªåŠ¨æ”¶é›†å¹¶ä¸”ç¼–è¯‘ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½æ„‰å¿«çš„åœ¨ `node_modules` ä¸­ä¿®æ”¹æºç äº†ã€‚\n\n\n","tags":["cpmposer"],"categories":["cpmposer"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹å››ï¼šå¸¸ç”¨api","url":"/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ4/","content":"\n<hr>\n\n\n|\tå‘½ä»¤   |\t\tåŠŸèƒ½      |\n|----------|:------------:|\n| $ docker images |  æŸ¥çœ‹æ‰€æœ‰é•œåƒ |\n| $ docker ps -a | æŸ¥çœ‹æ‰€æœ‰å®¹å™¨   |\n| $ docker run -it <é•œåƒ> | è¿è¡Œæœ¬åœ°é•œåƒï¼Œå¦‚æœé•œåƒä¸å­˜åœ¨åˆ™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬  |\n| $ docker exec -it <å·²å¯åŠ¨å®¹å™¨> /bin/bash | ä»¥äº¤äº’çš„æ–¹å¼è¿›å…¥å·²å¯åŠ¨çš„å®¹å™¨å†…éƒ¨  |\n| $ docker stop <å®¹å™¨> | åœæ­¢å®¹å™¨  |\n| $ docker start <å®¹å™¨> | å¯åŠ¨å®¹å™¨  |\n| $ docker rm <å®¹å™¨> | åˆ é™¤å®¹å™¨ï¼Œå¿…é¡»å…ˆåœæ­¢å®¹å™¨ |\n| $ docker rmi <é•œåƒ> | åˆ é™¤é•œåƒï¼Œå¿…é¡»å…ˆåˆ é™¤æ‰€æœ‰ä¾èµ–è¯¥é•œåƒçš„å®¹å™¨ |\n| $ docker build -t <æ–°å»ºå®¹å™¨å> . | é€šè¿‡ Dockerfile æ„å»ºé•œåƒï¼Œ<br>è¯·æ³¨æ„æœ€åä¸€ä¸ª`.` æŒ‡æ˜åœ¨å½“å‰è·¯å¾„å¯»æ‰¾ Dockerfile |\n| $ docker history <é•œåƒ> | æŸ¥çœ‹é•œåƒçš„æ„å»ºå±‚çº§ |\n\n\n\n> Dockerfile æ”¯æŒä»¥ â€˜#â€™ å¼€å¤´æ³¨é‡Š\n\n<!--more--> \n\n|\tå‘½ä»¤   |\t\tåŠŸèƒ½      |\n|----------|:------------:|\n| FORM | æŒ‡å®š base é•œåƒ |\n| MAINTAINER | è®¾ç½®é•œåƒçš„ä½œè€…ï¼Œå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸² |\n| RUN | ï¼ˆå‘½ä»¤ä¸‰å…„å¼Ÿä¹‹ä¸€ï¼‰åœ¨å®¹å™¨ä¸­è¿è¡ŒæŒ‡å®šå‘½ä»¤ã€‚ |\n| CMD | ï¼ˆå‘½ä»¤ä¸‰å…„å¼Ÿä¹‹ä¸€ï¼‰åœ¨å®¹å™¨å¯åŠ¨æ—¶è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚ |\n| ENTRYPOINT | ï¼ˆå‘½ä»¤ä¸‰å…„å¼Ÿä¹‹ä¸€ï¼‰è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚ |\n| COPY | å°†æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒï¼Œ`COPY src desc` ä¸ `COPY [\"src\", \"desc\"]` |\n| ADD | ä¸COPYç±»ä¼¼ï¼Œå°†æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒã€‚ä¸åŒçš„æ˜¯å¦‚æœsrcæ˜¯å½’æ¡£æ–‡ä»¶ï¼ˆzipã€tazã€xzç­‰ï¼‰ï¼Œæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨è§£å‹ |\n| ENV | è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡å¯è¢«åé¢çš„æŒ‡ä»¤ä½¿ç”¨å¦‚ï¼š <br> `ENV MY_VERSION 1.9.1 RUN yum install -y mypackage=$MY_VERSION` |\n| WORKDIR | è®¾ç½®é•œåƒä¸­å½“å‰å·¥ä½œç›®å½•ï¼ˆæœåŠ¡äºCOPYã€ADDã€CMDã€RUNã€ENTRYPOINTç­‰æŒ‡ä»¤ï¼‰ã€‚ |\n| EXPOSE | æŒ‡å®šå®¹å™¨ä¸­çš„è¿›ç¨‹ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼Œ Docker å¯ä»¥å°†è¯¥ç«¯å£æš´æ¼å‡ºæ¥ã€‚ |\n| VOLUME | å°†æ–‡ä»¶æˆ–ç›®å½•å£°æ˜ä¸º volumeã€‚ |\n\næ³¨æ„ç‚¹ï¼š\n- Dockerfile ä¸­å¯ä»¥æœ‰å¤šä¸ª CMD æŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚\n- Dockerfile ä¸­å¯ä»¥æœ‰å¤šä¸ª ENTRYPOINT æŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚\n- CMD æŒ‡ä»¤ä¼šè¢« `$ docker run [image] ...` ä¹‹åçš„å‚æ•°æ›¿æ¢æ‰ã€‚ å¦‚  `$ docker run [image] /bash/bin`\n- CMD æˆ– docker run ä¹‹åçš„å‚æ•°ä¼šè¢«å½“åšå‚æ•°ä¼ é€’ç»™ENTRYPOINTã€‚\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸‰ï¼šhello-worldã€åˆè¯†dockerfile","url":"/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ3/","content":"\n<hr>\n\nhello-world æ˜¯ Docker å®˜æ–¹æä¾›çš„ä¸€ä¸ªé•œåƒã€‚é€šå¸¸ç”¨æ¥éªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸã€‚ æˆ‘ä»¬å…ˆé€šè¿‡ `$ docker pull` ä» Docker Hub ä¸‹è½½å®ƒã€‚\n```bash\n$ docker pull hello-world\n```\n\n<!--more--> \n\nä½¿ç”¨ `$ docker images` æŸ¥çœ‹é•œåƒæ˜¯å¦ä¸‹è½½æˆåŠŸã€‚ å‘ç°æ‰ä¸åˆ°2kbï¼ \n\n![Size 1.84kB](Dockeræ¯å¤©äº”åˆ†é’Ÿ3/1.png)\n\né€šè¿‡ `$ docker run` è¿è¡Œå®ƒã€‚\n\n```bash\n$ docker run hello-world\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n...\n```\n\n<hr>\n\nDockerfile æ˜¯é•œåƒçš„æè¿°æ–‡ä»¶ï¼Œå®šä¹‰äº†å¦‚ä½•æ„å»º Docker é•œåƒã€‚\n\n> æ³¨ï¼šå¯ä»¥åœ¨ [dockerhub](https://hub.docker.com/_/hello-world?tab=description) ä¸­æŸ¥çœ‹ Dockerfile å†…å®¹\n\n\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹äºŒï¼šåˆ‡æ¢ DaoCloud é•œåƒæº","url":"/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ2/","content":"\n<hr>\n\nåˆ‡æ¢å›½å†… [DaoCloud](https://dashboard.daocloud.io/settings/profile) é•œåƒæœåŠ¡ã€‚ [å…è´¹æ³¨å†Œ](https://account.daocloud.io/signup)åè¿›å…¥æ§åˆ¶å°ï¼Œæ‰¾åˆ°å³ä¸Šè§’çš„[åŠ é€Ÿå™¨å›¾æ ‡](https://www.daocloud.io/mirror)ã€‚\n\n<!--more--> \n\n![åŠ é€Ÿå™¨](Dockeræ¯å¤©äº”åˆ†é’Ÿ2/3.png)\n\nç„¶åæ‰¾åˆ°Linuxçš„é…ç½®å‘½ä»¤ã€‚\n\n![é…ç½® Docker åŠ é€Ÿå™¨](Dockeræ¯å¤©äº”åˆ†é’Ÿ2/1.png)\n\nä½ çš„é…ç½®å‘½ä»¤ä¹Ÿè®¸å’Œæˆ‘çš„ä¸ä¸€æ ·å“¦ã€‚\n\n```bash\n$ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io\n\n$ sudo systemctl restart docker\n```\n\n\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"ã€ŠDockeræ¯å¤©äº”åˆ†é’Ÿã€‹ä¸€ï¼šå¯åŠ¨ç¬¬ä¸€ä¸ªhttpdå®¹å™¨","url":"/2019/01/31/Dockeræ¯å¤©äº”åˆ†é’Ÿ1/","content":"\n<hr>\n\n```bash\n$ sudo docker run -d -p 8080:80 httpd\n```\n\n1ï¼‰ä» Docker Hub ä¸‹è½½ httpd é•œåƒã€‚é•œåƒä¸­å·²ç»å®‰è£…å¥½äº† Apache HTTP Server.\n2ï¼‰å¯åŠ¨å®¹å™¨ï¼Œå¹¶å°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„8080ç«¯å£ã€‚\n\nè¿™æ ·å½“æˆ‘ä»¬è®¿é—®å®¿ä¸»æœºçš„8080ç«¯å£æ—¶ï¼Œå°±èƒ½çœ‹åˆ°HTTPæœåŠ¡é¡µé¢äº†ã€‚\n\n<!--more--> \n\n> å¦‚æœå¤–ç½‘ipè®¿é—®ä¸äº†ã€‚è¯·ç¡®ä¿ä½ æœåŠ¡å™¨çš„å®‰å…¨ç»„ï¼Œä»¥åŠæœ¬æœºçš„é˜²ç«å¢™é…ç½®ã€‚\n\n```bash\n$ curl localhost:8080\n\n<html><body><h1>It works!</h1></body></html>\n```\n\n![It works!](Dockeræ¯å¤©äº”åˆ†é’Ÿ1/2.png)\n\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Nginxä¸phpç»“åˆ","url":"/2019/01/25/Nginxä¸phpç»“åˆ/","content":"\n<hr>\n\n### ä¼ é€é—¨ï¼š\n- [Centos7 PHP-lastest å®‰è£…](/2019/01/25/phpå®‰è£…/)\n- [centos7 nginx å®‰è£…](/2019/01/24/nginxå®‰è£…/)\n\n### æ“ä½œé¢„è§ˆï¼š\n1. å°† php.ini æ–‡ä»¶ä¸­çš„é…ç½®é¡¹ cgi.fix_pathinfo è®¾ç½®ä¸º 0\n2. ä¿®æ”¹ `php-fpm.conf` è·¯å¾„å¼•ç”¨é”™è¯¯çš„bug\n3. æ·»åŠ å¹¶ä¸”ä¿®æ”¹ `www.conf`\n4. å¯åŠ¨ php-fpm\n5. é…ç½® Nginx ä½¿å…¶æ”¯æŒ PHP åº”ç”¨\n6. é…ç½® .php æ–‡ä»¶çš„è¯·æ±‚å°†è¢«ä¼ é€åˆ°åç«¯çš„ PHP-FPM æ¨¡å—\n7. é‡å¯ Nginxã€‚\n8. åˆ›å»ºæµ‹è¯•æ–‡ä»¶\n\n<!--more--> \n\n<hr>\n\n> è¡¥å……ï¼šæ­å»ºç¯å¢ƒæœ€æ€•çš„å°±æ˜¯è·¯å¾„ä¸åŒï¼Œå»ºè®®é…åˆ `$ find / -name \"ä½ è¦æœç´¢çš„æ–‡ä»¶å\"` æ¥è¾…åŠ©ã€‚\n> å»ºè®®ç»“åˆ[å®˜ç½‘æ•™ç¨‹](http://php.net/manual/zh/install.unix.php](http://php.net/manual/zh/install.unix.php)ä½¿ç”¨ã€‚\n> ä½†å®é™…ä¸Šå®˜ç½‘çš„å†…å®¹éƒ¨åˆ†ä¹Ÿæ˜¯è¿‡æ—¶çš„æ— æ•ˆçš„ã€‚æ‰€ä»¥è¦ç»“åˆç¬¬ä¸‰æ–¹æ–‡ç« æ¥æ’å‘ã€‚\n\n\n###### 1. å°† php.ini æ–‡ä»¶ä¸­çš„é…ç½®é¡¹ cgi.fix_pathinfo è®¾ç½®ä¸º 0\n```bash\n$ vim /usr/local/php/php.ini\n```\nå®šä½åˆ° `cgi.fix_pathinfo` å¹¶å°†å…¶ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n> cgi.fix_pathinfo=0\n\n###### 2. ä¿®æ”¹ `php-fpm.conf` è·¯å¾„å¼•ç”¨é”™è¯¯çš„bug\n\n```bash\n$ vim /usr/local/etc/php-fpm.conf\n```\n\næ‰¾åˆ°æœ€åä¸€è¡Œ `include=NONE/etc/php-fpm.d/*.conf`ï¼Œæ”¹ä¸º `include=etc/php-fpm.d/*.conf`\n\n> include=NONE/etc/php-fpm.d/*.conf\n> æ”¹ä¸º\n> include=etc/php-fpm.d/*.conf\n\n###### 3. æ·»åŠ  www.confï¼Œå¹¶ä¸”ä¿®æ”¹æƒé™\n```bash\n$ cd /usr/local/etc/php-fpm.d\n$ cp www.conf.default www.conf\n$ vim www.conf\n```\n\næ‰¾åˆ°å¹¶ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š\n\n```bash\n; Unix user/group of processes\n; Note: The user is mandatory. If the group is not set, the default user's group\n;       will be used.\nuser = nobody\ngroup = nobody\n```\n\n###### 4. å¯åŠ¨ php-fpm\n\n```bash\n$ /usr/local/bin/php-fpm\n```\n\n\n###### 5. é…ç½® Nginx ä½¿å…¶æ”¯æŒ PHP åº”ç”¨\n\n`$ vim /usr/local/nginx/conf/nginx.conf`ï¼Œä¿®æ”¹é»˜è®¤çš„ location å—ï¼Œä½¿å…¶æ”¯æŒ .php æ–‡ä»¶ï¼š\n\n```nginx\nlocation / {\n    root   html;\n    index  index.php index.html index.htm;\n}\n```\n\n###### 6. é…ç½® .php æ–‡ä»¶çš„è¯·æ±‚å°†è¢«ä¼ é€åˆ°åç«¯çš„ PHP-FPM æ¨¡å—\n```nginx\nlocation ~* \\.php$ {\n    fastcgi_index   index.php;\n    fastcgi_pass    127.0.0.1:9000;\n    include         fastcgi_params;\n    fastcgi_param   SCRIPT_FILENAME    $document_root$fastcgi_script_name;\n    fastcgi_param   SCRIPT_NAME        $fastcgi_script_name;\n}\n```\n\n\n###### 7. é‡å¯ Nginxã€‚\n```bash\n$ sudo /usr/local/nginx/sbin/nginx -s stop\n$ sudo /usr/local/nginx/sbin/nginx\n```\n\n###### 8. åˆ›å»ºæµ‹è¯•æ–‡ä»¶\n```bash\n$ rm /usr/local/nginx/html/index.html\n$ echo \"<?php phpinfo(); ?>\" >> /usr/local/nginx/html/index.php\n```\n\n![php.info](Nginxä¸phpç»“åˆ/1.png)\n","tags":["nginx","php"],"categories":["nginx"]},{"title":"hexoçš„è®¤çŸ¥","url":"/2019/01/25/hexoçš„è®¤çŸ¥/","content":"\n<hr>\n\n### é¢„è§ˆï¼š\n0. å¦‚ä½•ä½¿ç”¨æ‘˜è¦ï¼ŸåŠ å…¥ `<!--more--> `å³å¯\n1. è‡ªå®šä¹‰æ–‡ç« æ¨¡æ¿\n2. åŠ å…¥ `<script>`\n3. åŠ å…¥å…¨å±€æ ·å¼\n4. hexo å†…ç½®å…¨å±€å˜é‡\n5. å¦‚ä½•æ‰“å°å…¨å±€å˜é‡\n6. æœ¬åœ°æœç´¢åŠŸèƒ½\n7. éƒ¨ç½²çš„gitå’Œé¡¹ç›®çš„git\n\n<!--more--> \n\n#### 1. è‡ªå®šä¹‰æ–‡ç« æ¨¡æ¿\n> \\themes\\landscape\\layout\\_partial\\after-footer.ejs\n\n#### 2. åŠ å…¥ `<script>`\n> \\scaffolds\\post.md\n\n#### 3. åŠ å…¥å…¨å±€æ ·å¼\n> \\my\\themes\\landscape\\source\\css\\style.styl\n\n#### 4. hexo å†…ç½®å…¨å±€å˜é‡\n> [https://hexo.io/zh-cn/docs/variables](https://hexo.io/zh-cn/docs/variables)\n\n#### 5. å¦‚ä½•æ‰“å°å…¨å±€å˜é‡\næ‰“å¼€ä»»æ„ä¸€ä¸ªejsæ–‡ä»¶å¦‚ï¼š`my\\themes\\landscape\\layout\\_partial\\article.ejs`ï¼Œé¡¶éƒ¨åŠ å…¥JavaScriptä»£ç ï¼š\n```ejs\n<% \n\tconsole.log(20190125172431, post) \n%>\n```\nä¸è¿‡å¹¶ä¸ä¼šæ‰“å°åˆ°é¡µé¢ï¼Œè€Œæ˜¯æ‰“å°åˆ°æ§åˆ¶å°ã€‚\n\n![console.log](hexoçš„è®¤çŸ¥/1.png)\n\n#### 6.æœ¬åœ°æœç´¢åŠŸèƒ½\n\néœ€è¦ç»“åˆæ’ä»¶ [hexo-generator-search](https://github.com/wzpan/hexo-generator-search) æ¥ä½¿ç”¨ï¼š\n\n```bash\n$ cnpm install https://github.com/wzpan/hexo-generator-search\n```\né…ç½® `_config.yml`\n\n> search:\n>   path: search.json\n>   field: post\n>   content: true\n\nå½“ä½ ä½¿ç”¨ `$ hexo g` ä¹‹åï¼Œpublish ç›®å½•ä¸‹å°±ç”Ÿæˆäº†search.jsonäº†ã€‚æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªjsonæ¥åšæœ¬åœ°æœç´¢ã€‚\n\n#### 7. éƒ¨ç½²çš„gitå’Œé¡¹ç›®çš„git\n\næˆ‘ä»¬å¸Œæœ›éƒ¨ç½²/publishåˆ°github.ioå’Œé¡¹ç›®æœ¬èº«çš„gitä¸ä¸€æ ·ã€‚åªéœ€è¦åŠ å…¥ä¸€ä¸ª [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git) æ’ä»¶å³å¯ã€‚\n\n```bash\n$ cnpm install hexo-deployer-git\n```\n\né…ç½® `_config.yml`\n\n```yml\n# Deployment\n## Docs: https://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repository: https://github.com/dragon8github/dragon8github.github.io.git\n  branch: master\n```\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `$ hexo g && hexo d` æ¥éƒ¨ç½²åˆ°github.ioäº†ã€‚å°±ä¸ä¼šå’Œæˆ‘ä»¬é¡¹ç›®æœ¬èº«çš„gitå†²çªäº†ã€‚","tags":["hexo"],"categories":["hexo"]},{"title":"ç½‘é¡µæ— æ³•æ’­æ”¾MP4çš„è§£å†³æ–¹æ¡ˆ","url":"/2019/01/25/ç½‘é¡µæ— æ³•æ’­æ”¾MP4çš„è§£å†³æ–¹æ¡ˆ/","content":"\n<hr>\n\n### æ“ä½œé¢„è§ˆï¼š\n1. ä¸‹è½½ `æ ¼å¼å·¥å‚`\n2. é€‰æ‹© MP4 å¯¼å…¥ä½ éœ€è¦è½¬æ¢çš„è§†é¢‘\n3. å³é”®åˆ—è¡¨ä¸­çš„è§†é¢‘é€‰æ‹© `è¾“å‡ºé…ç½®`ï¼Œé€‰æ‹© `è§†é¢‘ç¼–è¾‘ï¼šAVCï¼ˆH264ï¼‰`\n4. ç‚¹å‡»å¼€å§‹\n\n<!--more--> \n\n![ç½‘é¡µæ— æ³•æ’­æ”¾MP4çš„è§£å†³æ–¹æ¡ˆ](/1.png)\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <style>\n    #myVideo {\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        z-index: 199307100337;\n    }\n    </style>\n</head>\n\n<body>\n    <video autoplay loop muted id=\"myVideo\">\n        <source src=\"./saber.mp4\" type=\"video/mp4\">\n    </video>\n</body>\n</html>\n```\n\n![saber.mp4](ç½‘é¡µæ— æ³•æ’­æ”¾MP4çš„è§£å†³æ–¹æ¡ˆ/2.png)","tags":["MP4","video","HTML"],"categories":["HTML","video","MP4"]},{"title":"Centos7 PHP-lastest å®‰è£…","url":"/2019/01/25/phpå®‰è£…/","content":"\n<hr>\n\nå‚è€ƒå®˜æ–¹ UNIX ç¼–è¯‘æ•™ç¨‹ï¼š [http://php.net/manual/zh/install.unix.php](http://php.net/manual/zh/install.unix.php)\n\n###### 1ã€å®‰è£…ä¾èµ–\n```bash\n$ sudo yum install libxml2 libxml2-devel\n```\n###### 2ã€ä¸‹è½½phpï¼ˆChinaï¼‰: http://php.net/get/php-7.3.1.tar.gz/from/a/mirror\n```bash\n$ wget -O php-7.3.1.tar.gz http://cn2.php.net/get/php-7.3.1.tar.gz/from/this/mirror\n```\n\n###### 3ã€ç¼–è¯‘ä¸‰å…„è´µ\n```bash\n$ ./configure --disable-fileinfo --enable-fpm\n$ make && make install \n```\n<!--more--> \nåŠ å…¥--disable-fileinfoæ˜¯ä¸ºäº†é¿å…makeæ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š\n> virtual memory exhausted: Cannot allocate memory \n> make: *** [ext/fileinfo/libmagic/apprentice.lo] Error 1\n\nå…¶ä¸­ `--enable-fpm` æ˜¯æ”¯æŒfpmæ‰©å±•\n\nå®‰è£…å®Œæˆä¹‹åï¼Œä¼šå‡ºç°å¦‚ä¸‹æç¤ºè¯­ï¼š\n\n> Wrote PEAR system config file at: /usr/local/etc/pear.conf\n> You may want to add: /usr/local/lib/php to your php.ini include_path\n> /home/dc2-user/php-7.3.1/build/shtool install -c ext/phar/phar.phar /usr/local/bin\n> ln -s -f phar.phar /usr/local/bin/phar\n> Installing PDO headers:           /usr/local/include/php/ext/pdo/\n\nè¯·æ”¾å¿ƒè¿™æ˜¯æ­£å¸¸çš„ï¼Œå®é™…ä¸Šæ­¤æ—¶ä½ çš„phpå·²ç»å®‰è£…æˆåŠŸäº†ï¼š\n```bash\n$ php -v\n\nPHP 7.3.1 (cli) (built: Jan 24 2019 21:37:18) ( NTS )\nCopyright (c) 1997-2018 The PHP Group\nZend Engine v3.3.1, Copyright (c) 1998-2018 Zend Technologies\n```\n\n###### 4ã€åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°æ­£ç¡®çš„ä½ç½®ã€‚\n```bash\n$ sudo cp php.ini-development /usr/local/php/php.ini\n$ sudo cp /usr/local/etc/php-fpm.conf.default /usr/local/etc/php-fpm.conf\n$ sudo cp sapi/fpm/php-fpm /usr/local/bin\n```\n\næ¥ä¸‹æ¥ä½ å¯èƒ½æƒ³è¦äº†è§£ï¼š\n- [nginx ä¸ php ç»“åˆä½¿ç”¨](/2019/01/25/Nginxä¸phpç»“åˆ/)\n- nginx ä¸ apache ç»“åˆä½¿ç”¨","tags":["centos","PHP"],"categories":["centos","PHP"]},{"title":"Centos7 ä¾èµ–å…¨å®¶æ¡¶","url":"/2019/01/24/Centos7ä¾èµ–å…¨å®¶æ¡¶/","content":"\n<hr>\n\nè¯¥æ–‡æ”¶é›†æˆ‘å®‰è£… Centos7 ç¯å¢ƒä¸­æ‰€æœ‰ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚åªéœ€è¦æ‰§è¡Œä»¥ä¸‹ä¸€å¥ä»£ç å³å¯ï¼š\n```bash\n$ sudo yum install \\\ngcc-c++ \\\nzlib-devel \\\npcre-devel \\\nlibxml2 \\\nlibxml2-devel \\\nyum-utilsdevice-mapper-persistent-data \\\nlvm2 \\\nyum-utils \\\nautoconf \\\n```\n\n<!--more--> ","tags":["centos","yum"],"categories":["centos"]},{"title":"Centos7 Nodejs å®‰è£…","url":"/2019/01/24/Nodejså®‰è£…/","content":"\n<hr>\n\n### æ“ä½œé¢„è§ˆ\n1. ä¸‹è½½nodejsï¼š https://nodejs.org/en/download/\n2. æ£€æŸ¥é…ç½®æ˜¯å¦å¥åº·\n3. make ç¼–è¯‘ï¼ˆå¤§æ¦‚éœ€è¦åŠå°æ—¶ï¼‰\n4. å®‰è£…ï¼ˆrootï¼‰\n5. éªŒè¯\n\n###### 1. ä¸‹è½½nodejsï¼š https://nodejs.org/en/download/\n```bash\n$ wget https://nodejs.org/dist/v10.15.0/node-v10.15.0.tar.gz\n```\n\n###### 2. æ£€æŸ¥é…ç½®æ˜¯å¦å¥åº·\n```bash\n$ ./configure\n```\n\n###### 3. make ç¼–è¯‘ï¼ˆå¤§æ¦‚éœ€è¦åŠå°æ—¶ï¼‰\n```bash\n$ make\n```\n\n###### 4. å®‰è£…ï¼ˆrootï¼‰\n```bash\n$ sudo make install\n```\n\n###### 5. éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ\n```bash\n$ node -v \nv10.15.0\n```","tags":["centos","Nodejs"],"categories":["centos","Nodejs"]},{"title":"centos7 nginx å®‰è£…","url":"/2019/01/24/nginxå®‰è£…/","content":"\n<hr>\n\n### æ“ä½œé¢„è§ˆï¼š\n1. å®‰è£…ä¾èµ–\n2. ä¸‹è½½nginx ï¼š http://nginx.org/en/download.html\n3. è§£å‹\n4. æ£€æŸ¥é…ç½®æ˜¯å¦å¥åº·\n5. å¼€å§‹å®‰è£…\n6. æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œé»˜è®¤å®‰è£…ç›®å½•æ˜¯åœ¨/usr/local/nginx\n7. å¯åŠ¨nginxæœåŠ¡\n8. æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€å¯\n9. ä½¿ç”¨ `$ curl localhost` æŸ¥çœ‹ nginx æ¬¢è¿é¡µ \n\n<!--more--> \n\n//////////////////////////////////////////////\n\n\n##### 1ã€å®‰è£…ä¾èµ–\n```bash\n$ yum -y install gcc-c++ zlib-devel pcre-devel\n```\n\n##### 2ã€ä¸‹è½½nginx ï¼š http://nginx.org/en/download.html\n```bash\n$ wget http://nginx.org/download/nginx-1.15.8.tar.gz\n```\n\n##### 3ã€è§£å‹\n```bash\n$ tar zxvf nginx-1.15.8.tar.gz\n```\n\n//////////////////////////////////////////////\n\n##### 4ã€æ£€æŸ¥é…ç½®æ˜¯å¦å¥åº·\n```bash\n$ ./configure\n```\n\n##### 5ã€å¼€å§‹å®‰è£…\n```bash\n$ make && make install\n```\n\n//////////////////////////////////////////////\n\n##### 6ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œé»˜è®¤å®‰è£…ç›®å½•æ˜¯åœ¨/usr/local/nginx\n```bash\n$ /usr/local/nginx/sbin/nginx -t\n\nnginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful\n```\n\n##### 7ã€å¯åŠ¨nginxæœåŠ¡\n```bash\n$ /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf\n```\n\n//////////////////////////////////////////////\n\n##### 8ã€æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€å¯\n```bash\n$ ps -ef | grep nginx\n```\n\n##### 9ã€ä½¿ç”¨ `$ curl localhost` æŸ¥çœ‹ nginx æ¬¢è¿é¡µ \n```html\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n```\n\n![Welcome to nginx!](nginxå®‰è£…/1.png)","tags":["centos","nginx"],"categories":["centos","nginx"]},{"title":"Centos 7 Docker å®‰è£…","url":"/2019/01/24/Dockerå®‰è£…/","content":"\n### æ“ä½œé¢„è§ˆï¼š\n1.  å®‰è£…ä¸€äº›åŸºæœ¬ä¾èµ–è½¯ä»¶\n2.  ä¸ºäº†ä½¿ç”¨ yum-config-manager éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ yum-utils\n3.  è®¾ç½®ç¨³å®šç‰ˆä»“åº“\n4.  æ›´æ–°ä»“åº“ï¼ˆå¯é€‰ï¼‰\n5.  æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰\n6.  æ­£å¼ä¸‹è½½å®‰è£…\n7.  å¯åŠ¨ (å¹¶å¼€æœºå¯åŠ¨)\n8.  æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ\n\n<!--more--> \n\n////////////////////////////////////////////// \nå‰æˆå‡†å¤‡ \n//////////////////////////////////////////////\n\n\n###### 1ã€å®‰è£…ä¸€äº›åŸºæœ¬ä¾èµ–è½¯ä»¶\n```bash\n$ sudo yum install -y yum-utilsdevice-mapper-persistent-data lvm2\n```\n\n###### 2ã€ä¸ºäº†ä½¿ç”¨ yum-config-manager éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹è¿™ä¸ª yum-utils\n```bash\n$ sudo yum -y install yum-utils\n```\n\n###### 3ã€è®¾ç½®ç¨³å®šç‰ˆä»“åº“\n```bash\n$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n```\n\n###### 4ã€æ›´æ–°ä»“åº“ï¼ˆå¯é€‰ï¼‰\n```bash\n$ sudo yum-config-manager --enable docker-ce-edge\n```\n\n////////////////////////////////////////////// \næ­£å¼å¼€å§‹ \n//////////////////////////////////////////////\n\n\n###### 5ã€æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰\n```bash\n$ sudo yum list docker-ce --showduplicates | sort -r\n```\n\n###### 6ã€æ­£å¼ä¸‹è½½å®‰è£…\n```bash\n$ sudo yum install docker-ce -y\n```\n\n###### 7ã€å¯åŠ¨ (å¹¶å¼€æœºå¯åŠ¨)\n```bash\n$ sudo systemctl start docker\n$ sudo systemctl enable docker\n```\n\n###### 8ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ\n```bash\n$ docker -v\n```\n\n![Docker version 18.09.1](Dockerå®‰è£…/1.png)","tags":["centos","docker"],"categories":["docker"]},{"title":"Laravel Eloquent å…¥é—¨","url":"/2019/01/20/laravel-Eloquent/","content":"\n# ä¸€ã€æ•°æ®å»ºæ¨¡\n\nåˆ›å»ºä¸€ä¸ªåä¸º `Article` çš„ Eloquent Modelï¼ŒLaravel ä¼šè‡ªåŠ¨å°†å…¶ä¸ Article æ•°æ®è¡¨å…³è”ã€‚\n<!--more--> \n```php\n$ php artisan make:model Article\n```\n\n![\\app\\Article.php](laravel-Eloquent/1.png)\n\n<hr>\n\n# äºŒã€tinker å‘½ä»¤è¡Œäº¤äº’\n\nè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›å…¥äº¤äº’æ¨¡å¼ï¼š\n\n```bash\n$ php artisan tinker\n```\n\n#### ç¤ºä¾‹ 1 - Modelä¸æ’å…¥æ•°æ®ï¼š\n\n```bash\n>>> $article = new App\\Article;\n=> App\\Article {#2909}\n\n>>> $article->title='My first Title';\n=> \"My first Title\"\n\n>>> $article->content='content'\n=> \"content\"\n\n>>> $article->published_at=Carbon\\Carbon::now();\n=> Carbon\\Carbon @1547995347 {#2913\n     date: 2019-01-20 14:42:27.721241 UTC (+00:00),\n   }\n\n>>> $article;\n=> App\\Article {#2909\n     title: \"My first Title\",\n     content: \"content\",\n     published_at: Carbon\\Carbon @1547995347 {#2913\n       date: 2019-01-20 14:42:27.721241 UTC (+00:00),\n     },\n   }\n\n>>> $article->save();\n=> true\n>>>\n```\n\nä»£ç è¯´æ˜ï¼š\n- `$article = new App\\Article` ï¼š æ–°å»ºä¸€ä¸ª Article Modelï¼›\n- `$article->title='My first Title'`ï¼šå¡«å……titleå­—æ®µï¼›\n- `$article->content='content'`ï¼šå¡«å……contentå­—æ®µï¼›\n- `$article->published_at=Carbon\\Carbon::now()`ï¼š ä½¿ç”¨ `Carbon\\Carbon` æ—¶é—´åº“æ¥è·å–å¹¶è®¾ç½®å½“å‰æ—¶é—´ï¼›\n- `$article`ï¼šæ‰“å°å‡ºå½“å‰çš„Modelï¼›\n- `$article->save()`ï¼šä¿å­˜åˆ°æ•°æ®åº“ï¼Œå¦‚æœè¿”å›trueåˆ™è¡¨ç¤ºæˆåŠŸï¼›\n\n![Article Model](laravel-Eloquent/3.png)\n\n![Successfulï¼ï¼](laravel-Eloquent/2.png)\n\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ `$article->toArray()` æ‰“å°å‡º Model ä¿¡æ¯ï¼š\n```bash\n>>> $article->toArray()\n=> [\n     \"title\" => \"My first Title\",\n     \"content\" => \"content\",\n     \"published_at\" => Carbon\\Carbon @1547995347 {#2913\n       date: 2019-01-20 14:42:27.721241 UTC (+00:00),\n     },\n     \"updated_at\" => \"2019-01-20 14:43:05\",\n     \"created_at\" => \"2019-01-20 14:43:05\",\n     \"id\" => 1,\n   ]\n>>>\n```\n\n#### ç¤ºä¾‹ 2 - æŸ¥æ‰¾æ•°æ®\n\næŸ¥æ‰¾åˆšåˆšæ’å…¥ `id` ä¸º **1** çš„æ•°æ®ï¼š\n\n```bash\n>>> $data = App\\Article::find(1);\n=> App\\Article {#2924\n     id: 1,\n     title: \"My first Title\",\n     content: \"content\",\n     published_at: \"2019-01-20 14:42:27\",\n     created_at: \"2019-01-20 14:43:05\",\n     updated_at: \"2019-01-20 14:43:05\",\n     introl: \"\",\n   }\n>>>\n```\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ `App\\Article::all()` æ–¹æ³•æ— æ¡ä»¶æŸ¥æ‰¾æ‰€æœ‰æ•°æ®ï¼š\n\n```bash\n>>> $data=App\\Article::all()\n\n=> Illuminate\\Database\\Eloquent\\Collection {#2924\n     all: [\n       App\\Article {#2906\n         id: 1,\n         title: \"My first Title\",\n         content: \"content\",\n         published_at: \"2019-01-20 14:42:27\",\n         created_at: \"2019-01-20 14:43:05\",\n         updated_at: \"2019-01-20 14:43:05\",\n         introl: \"\",\n       },\n     ],\n   }\n>>>\n\n\n```\n\n#### ç¤ºä¾‹ 3 - æ›´æ–°æ•°æ®\n\nå’Œæ’å…¥å¾ˆç›¸ä¼¼ï¼Œä¾ç„¶æ˜¯ä½¿ç”¨ `save()` æ–¹æ³•ï¼š\n\n```bash\n>>> $data->title=\"Update\";\n=> \"Update\"\n\n>>> $data->save();\n=> true\n>>>\n```\n\n#### ç¤ºä¾‹ 4 - where æŸ¥è¯¢\n\n```bash\n>>> $data=App\\Article::where('content', '=', 'content')->get()\n\n=> Illuminate\\Database\\Eloquent\\Collection {#2911\n     all: [\n       App\\Article {#2929\n         id: 1,\n         title: \"Update\",\n         content: \"content\",\n         published_at: \"2019-01-20 23:02:45\",\n         created_at: \"2019-01-20 14:43:05\",\n         updated_at: \"2019-01-20 15:02:45\",\n         introl: \"\",\n       },\n     ],\n   }\n>>>\n\n```\n\n`get()` æ–¹æ³•ä»£è¡¨è·å–æ‰€æœ‰è¡Œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªCollectionæ•°æ®ç±»å‹ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŠ å¼ºç‰ˆçš„æ•°ç»„ã€‚\n\né€šå¸¸æˆ‘ä»¬åªæƒ³è¿”å›ä¸€æ¡æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `first()` æ–¹æ³•ï¼Œå®ƒåªä¼šç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š\n\n```bash\n>>> $data=App\\Article::where('content', '=', 'content')->first()\n\n=> App\\Article {#2910\n     id: 1,\n     title: \"Update\",\n     content: \"content\",\n     published_at: \"2019-01-20 23:02:45\",\n     created_at: \"2019-01-20 14:43:05\",\n     updated_at: \"2019-01-20 15:02:45\",\n     introl: \"\",\n   }\n\n>>> $data->title\n=> \"Update\"\n```\n\n#### ç¤ºä¾‹ 5 - `create()` / `update()` \n\nä½¿ç”¨ `App\\Article::create([...])` å’Œ `$model->udate([...])` å¯ä»¥æ›´ä¾¿æ·çš„åˆ›å»ºå’Œæ›´æ–°æ•°æ®ã€‚\n\nå…ˆæ¥ `\\app\\Article.php` ä¸­æ·»åŠ ä»£ç ï¼Œè®¾ç½®å­—æ®µå…è®¸è¢«å¡«å……ï¼š\n\n```php\n<?php\n\nnamespace App;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Article extends Model\n{\n    protected $fillable = ['title', 'content', 'published_at'];\n}\n```\n\n**å¿…é¡»é‡æ–°è¿›å…¥å‘½ä»¤è¡Œäº¤äº’ï¼ï¼**\n**å¿…é¡»é‡æ–°è¿›å…¥å‘½ä»¤è¡Œäº¤äº’ï¼ï¼**\n**å¿…é¡»é‡æ–°è¿›å…¥å‘½ä»¤è¡Œäº¤äº’ï¼ï¼**\n\nä½¿ç”¨ `App\\Article::create([...])` æ¥åˆ›å»ºæ•°æ®ï¼š\n\n```bash\n>>> $article=App\\Article::create(['title'=>'Second Title', 'content'=>'Second Content', 'published_at'=>Carbon\\Carbon::now() ]);\n\n=> App\\Article {#2913\n     title: \"Second Title\",\n     content: \"Second Content\",\n     published_at: Carbon\\Carbon @1547998078 {#2923\n       date: 2019-01-20 15:27:58.713977 UTC (+00:00),\n     },\n     updated_at: \"2019-01-20 15:27:58\",\n     created_at: \"2019-01-20 15:27:58\",\n     id: 2,\n   }\n>>>\n\n```\n\nä½¿ç”¨ `$model->udate([...])` æ¥æ›´æ–°æ•°æ®ï¼š\n\n```bash\n>>> $article->update(['title'=>'Change Title']);\n=> true\n```\n","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"Laravel Mysql æ•°æ®åº“é…ç½® ä¸ Migration åŸºç¡€","url":"/2019/01/20/laravel-migration/","content":"\n# ä¸€ã€MySql æ•°æ®åº“é…ç½®\n\nå…ˆæ¥é…ç½®ä¸€ä¸‹æ•°æ®åº“ï¼Œæ‰“å¼€ Laravel çš„ç¯å¢ƒé…ç½® `\\.env` æ–‡ä»¶ï¼Œç®€å•é…ç½®ä½ çš„æ•°æ®åº“ä¿¡æ¯ï¼š\n\n```\nDB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=laravel\nDB_USERNAME=root\nDB_PASSWORD=root\n```\n\nå†æ‰“å¼€æ•°æ®åº“é…ç½®æ–‡ä»¶ `\\config\\database.php`ï¼Œæ£€æŸ¥å½“å‰çš„ Mysql æ•°æ®åº“é…ç½®ï¼š\n<!--more--> \n```php\n<?php\n\n'default' => env('DB_CONNECTION', 'mysql'),\n\n'mysql' => [\n    'driver' => 'mysql',\n    'host' => env('DB_HOST'),\n    'port' => env('DB_PORT'),\n    'database' => env('DB_DATABASE'),\n    'username' => env('DB_USERNAME'),\n    'password' => env('DB_PASSWORD'),\n    'prefix' => '',\n],\n\n// ... otherthing\n\n```\n\n<hr>\n\n# äºŒã€migrate åˆä½“éªŒ\n\nLaravel æœ€å¼ºå¤§å·¥å…·ä¹‹ä¸€ï¼š**migration**\n\nå¦‚æœå¯¹ `migration` çš„æ¦‚å¿µä¸æ¸…æ™°ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæ•°æ®åº“çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚æœ‰äº†å®ƒæˆ‘ä»¬å°±å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œæ–¹ä¾¿çš„ç®¡ç†å’Œæ„‰å¿«åœ°å¼€å‘äº†ã€‚\n\n\næ‰¾åˆ° `\\database\\migrations\\`ï¼Œå¯ä»¥çœ‹åˆ°Laravelé»˜è®¤å¸®æˆ‘ä»¬å‡†å¤‡äº†ä¸¤ä¸ª migrations ç¤ºä¾‹æ–‡ä»¶ã€‚\n\n![migrations ç¤ºä¾‹æ–‡ä»¶](laravel-migration/1.png)\n\næˆ‘ä»¬å°±æ¥å­¦ä¹ å’Œä½¿ç”¨ä¸€ä¸‹ `2014_10_12_000000_create_users_table.php` æ–‡ä»¶ï¼š\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateUsersTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('users', function (Blueprint $table) {\n            $table->increments('id');\n            $table->string('name');\n            $table->string('email')->unique();\n            $table->timestamp('email_verified_at')->nullable();\n            $table->string('password');\n            $table->rememberToken();\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('users');\n    }\n}\n\n```\n\nä»£ç è¯´æ˜ï¼š\n- upï¼š è´Ÿè´£åˆ›å»ºä¸€ä¸ª `users` è¡¨ï¼›\n- downï¼š ä¸ºäº†é¿å…é‡å¤æ–°å»ºï¼Œè´Ÿè´£åˆ é™¤ `users` è¡¨ï¼Œ**ä½†è¿™ä¹Ÿè¯´æ˜æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šæ¸…ç©ºè¯¥è¡¨çš„æ•°æ®**ï¼›\n\n\n\n```bash\n$ php artisan migrate\n```\n\n![successfullyï¼ï¼ï¼](laravel-migration/2.png)\n\n![Navicat for MySql](laravel-migration/3.png)\n\n<hr>\n\n# ä¸‰ã€åˆ›å»º migration æ–‡ä»¶\n\nåˆšåˆšæˆ‘ä»¬ä½¿ç”¨äº† Laravel ç¤ºä¾‹çš„ migration æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬æ–°å»ºä¸€ä¸ªè‡ªå·±çš„æ–‡ç« è¡¨ `articles`ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡ `artisan` å‘½ä»¤æ¥åˆ›å»ºï¼š\n\n```bash\n$ php artisan make:migration create-articles_table --create=articles\n```\n\n![Created Migration successfully](laravel-migration/4.png)\n\n![2019_01_20_042528_create-articles_table](laravel-migration/5.png)\n\nè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ `\\database\\migrations\\2019_01_20_042528_create-articles_table.php `ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateArticlesTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('articles', function (Blueprint $table) {\n            $table->increments('id');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('articles');\n    }\n}\n\n```\n\nå…¶ä¸­ `$table->timestamps();` å»ºè®®ä¿ç•™ï¼ŒLaravel ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶ç»´æŠ¤ `created_at` å’Œ `updated_at` å­—æ®µã€‚\n\næˆ‘ä»¬è¯•ç€æ·»åŠ ä¸€äº›åŸºæœ¬å­—æ®µï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateArticlesTable extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('articles', function (Blueprint $table) {\n            $table->increments('id');\n            $table->string('title');\n            $table->text('content');\n            $table->timestamp('published_at');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::dropIfExists('articles');\n    }\n}\n\n```\n\nå†æ¬¡æ‰§è¡Œ migrate å‘½ä»¤ \n\n```bash\nphp artisan migrate\n```\n\n![New DataTable articles](laravel-migration/6.png)\n\n<hr>\n\n# å››ã€æ·»åŠ å­—æ®µ\n\nå‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦ä¸º `articles` è¡¨æ·»åŠ ä¸€ä¸ªç®€ä»‹å­—æ®µ `intro`ã€‚\n\n```bash\n$ php artisan make:migration add_intro_column_to_articles --table=articles\n```\n\n`\\database\\migrations\\2019_01_20_060259_add_intro_column_to_articles.php` é»˜è®¤ä»£ç å¦‚ä¸‹ï¼š\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass AddIntroColumnToArticles extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('articles', function (Blueprint $table) {\n            //\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('articles', function (Blueprint $table) {\n            //\n        });\n    }\n}\n```\n\næ·»åŠ ä»£ç ï¼š\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass AddIntroColumnToArticles extends Migration\n{\n    /**\n     * Run the migrations.\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::table('articles', function (Blueprint $table) {\n            $table->string('introl');\n        });\n    }\n\n    /**\n     * Reverse the migrations.\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::table('articles', function (Blueprint $table) {\n            $table->dropColumn('introl');\n        });\n    }\n}\n```\n\nåˆåˆåˆæ‰§è¡Œå‘½ä»¤ï¼š `$ php artisan migrate`\n\nåˆ·æ–°æ•°æ®è¡¨ `articles` ï¼ŒæˆåŠŸæ·»åŠ äº† `introl` å­—æ®µï¼š\n\n![Add Column introl](laravel-migration/7.png)\n\näº‹å®ä¸Šï¼Œå¦‚æœçœŸçš„è¦æ‰§è¡Œ `$table->dropColumn` éœ€è¦ä¾èµ–ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œè¿™é‡Œå®‰è£…ä¸€ä¸‹å§ï¼š\n\n```bash\n$ composer require doctrine/dbal\n```","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"Laravel å…¥é—¨ç¤ºä¾‹ï¼ˆä¸‰ï¼‰ï¼šå¸¸ç”¨çš„bladeè¯­æ³•","url":"/2019/01/20/laravel-demo3/","content":"\n# @yield è¯­æ³•\n\nä¸­æ–‡ç†è§£ä¸ºåŒºåŸŸï¼Œåœ¨æ¯ç‰ˆé¡µï¼ˆlayoutsï¼‰ä¸­ä¼šä½¿ç”¨ã€‚ç±»ä¼¼ Vue ä¸­çš„ `<slot name='content'>` æ ‡ç­¾ã€‚ \n\næ–°å»º **\\resources\\views\\layouts\\app.blade.php**\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/twitter-bootstrap/3.3.6/css/bootstrap.min.css\">\n    <script src=\"https://cdn.bootcss.com/twitter-bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n</head>\n<body>\n    @yield('content')\n</body>\n</html>\n```\n\n\\resources\\views\\sites\\about.blade.php\n<!--more--> \n```html\n@extends('layouts/app')\n@section('content')\n    <h1>about me {{$first}} {{$last}}</h1>\n@stop\n```\n\n### è¯­æ³•è¯´æ˜ï¼š\n- **@extends**ï¼šç»§æ‰¿ `\\resources\\views\\layouts\\app.blade.php` æ¨¡æ¿ï¼›\n- **@section**ï¼šå°†å†…å®¹å¡«å……åˆ° `@yield('content')` ä¸­ï¼›\n- **@stop**ï¼šé€šå¸¸ä¸€ä¸ª `@section` å¯¹åº”ä¸€ä¸ª `$stop`ï¼›\n\nå¯ä»¥å‘ç° **bootstrap** çš„æ ·å¼èµ·åˆ°æ•ˆæœäº†ï¼š\n\n![](laravel-demo3/1.png)\n\n<hr>\n\n# ç‰¹å®šçš„é¡µé¢åŠ è½½ç‰¹å®šçš„jsæ–‡ä»¶\n\nå…¶å®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ `layouts` ä¸­æ–°å¢å¤šä¸ª@yieldï¼Œåœ¨ç‰¹å®šçš„é¡µé¢é€‰æ‹©æ€§å¡«å……è¿™ä¸ªåŒºåŸŸå³å¯ã€‚\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js\"></script>\n    <link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/twitter-bootstrap/3.3.6/css/bootstrap.min.css\">\n    <script src=\"https://cdn.bootcss.com/twitter-bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n</head>\n<body>\n    @yield('content')\n    @yield('footer')\n</body>\n</html>\n```\n\n```html\n@extends('layouts/app')\n@section('content')\n    <h1>about me {{$first}} {{$last}}</h1>\n@stop\n\n@section('footer')\n    <script>alert('yeshï¼ï¼')</script>\n@stop\n```\n\n![](laravel-demo3/2.png)\n\n<hr>\n\n# @if è¯­æ³•\n```html\n@extends('layouts/app')\n@section('content')\n    @if ($first == \"Zhou\")\n        <h1>about me {{$first}} {{$last}}</h1>\n    @else\n        <h2>nothing</h2>\n    @endif\n@stop\n```\n\n<hr>\n\n# @foreach è¯­æ³•\n\nå…ˆåœ¨æ§åˆ¶å™¨ä¸­å¯¼å‡ºæ•°ç»„ \n\n\\app\\Http\\Controllers\\SitesController.php\n\n```php\npublic function about () {\n    $people = ['Taylor Otwell', 'Jeffray Way', 'Happy Petter'];\n    return view('sites/about', compact('people'));\n}\n```\n\né€šå¸¸ @foreach ä¼šç»“åˆ @if ä½¿ç”¨ï¼Œå¦åˆ™ä¼šå‡ºç°å¤šä½™çš„htmlæ ‡ç­¾çš„æƒ…å†µ\n\n```html\n@extends('layouts/app')\n@section('content')\n    @if (count($people) > 0)\n        <ul>\n            @foreach ($people as $p)\n                <li>{{ $p }}</li>\n            @endforeach\n        </ul>\n    @endif\n@stop\n```\n\n![](laravel-demo3/3.png)","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"Laravel å…¥é—¨ç¤ºä¾‹ï¼ˆäºŒï¼‰ï¼šåˆè¯†æ§åˆ¶å™¨ä¸è§†å›¾","url":"/2019/01/19/laravel-demo2/","content":"\n1ã€æ–°å»º **resources\\views\\sites\\about.blade.php**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n</head>\n<body>\n    <h1>about me</h1>\n</body>\n</html>\n```\n<!--more--> \n2ã€æ–°å¢ **about** è·¯ç”±\n\n\\routes\\web.php\n\n```php\n<?php\n\nRoute::get('/', 'SitesController@index');\n\nRoute::get('/about', 'SitesController@about');\n```\n\n3ã€æ§åˆ¶å™¨æ–°å¢ **about** æ–¹æ³•\n\n\\app\\Http\\Controllers\\SitesController.php\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nclass SitesController extends Controller\n{\n    // Route::get('/', 'SitesController@index');\n    public function index () {\n        return view('welcome');\n    }\n\n    // Route::get('/about', 'SitesController@about');\n    public function about () {\n        return view('sites.about');\n    }\n}\n```\n\nè¦è®¿é—® **resources/views/sites/about.blade.php** é¡µé¢ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹å¼ï¼š\n- return view('sites/about');\n- return view('sites.about'); **ï¼ˆæ¨èï¼‰**\n\nè®¿é—® [http://127.0.0.1:8000/about](http://127.0.0.1:8000/about)ï¼Œæ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š\n\n![](laravel-demo2/1.png)\n\n<hr>\n\n# å‘è§†å›¾ä¼ é€’å˜é‡\n\n1ã€ **with()** ä¸ åŸç”Ÿæ¸²æŸ“\n\n```php\npublic function about () {\n    $name = 'Lee';\n    return view('sites/about')->with('name', $name);\n}\n```\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n</head>\n<body>\n    <h1>about me <?= $name; ?></h1>\n</body>\n</html>\n```\n\n2ã€ ä½¿ç”¨ **blade** æ¨¡æ¿å¼•æ“è¯­æ³•æ¥æ¸²æŸ“\n\næˆ‘ä»¬æ³¨æ„åˆ°è§†å›¾æ–‡ä»¶éƒ½æ˜¯ **.blade.php** æ–‡ä»¶ï¼Œæ‰€ä»¥ç†æ‰€åº”å½“ä½¿ç”¨æ›´ç®€æ´çš„æ¨¡æ¿æ¸²æŸ“è¯­æ³•ã€‚\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n</head>\n<body>\n    <h1>about me {{ $name }}</h1>\n</body>\n</html>\n```\n\n**{!! $name !!}** çš„è¯­æ³•å¯ä»¥ç”¨æ¥è§£æhtmlã€‚è­¬å¦‚ $name çš„å€¼ä¸º `<span style='color: red'> Lee </span>` æ—¶ï¼Œä½†è¦å°å¿ƒxss æ”»å‡»ï¼\n\n![](laravel-demo2/2.png)\n\n\n3ã€ä½¿ç”¨æ•°ç»„ä¼ é€’å¤šä¸ªå˜é‡\n\n```php\npublic function about () {\n    return view('sites/about')->with([\n        'first' => 'Lee',\n        'last' => 'Mp'\n    ]);\n}\n```\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n</head>\n<body>\n    <h1>about me {{$first}} {{$last}}</h1>\n</body>\n</html>\n```\n\n4ã€ç±» yii çš„ä¼ é€’æ–¹å¼\n```php\npublic function about () {\n    $data = [];\n    $data['first'] = 'Lee';\n    $data['last'] = 'Mp';\n    return view('sites/about', $data);\n}\n```\n\n5ã€ **compact** æ–¹å¼**ï¼ˆæ¨èï¼‰**\n```php\npublic function about () {\n    $first = 'Lee';\n    $last = 'Mp';\n    return view('sites/about', compact('first', 'last'));\n}\n```\n\n![](laravel-demo2/3.png)","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"Laravel å…¥é—¨ç¤ºä¾‹ï¼ˆä¸€ï¼‰ï¼šåˆè¯†æ§åˆ¶å™¨ä¸è·¯ç”±","url":"/2019/01/19/laravel-demo1/","content":"\n1ã€å…ˆç”¨ **artisan** å‘½ä»¤æ–°å»ºä¸€ä¸ª **Controller**ï¼Œå‘½åä¸º **SitesController**\n\n```bash\n$ php artisan make:controller SitesController\n```\n\nç”Ÿæˆçš„æ–‡ä»¶åœ¨ç›®å½•ï¼š **\\app\\Http\\Controllers\\SitesController.php**ï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\n\nclass SitesController extends Controller\n{\n    // Route::get('/', 'SitesController@index');\n    public function index () {\n    \treturn view('welcome');\n    }\n}\n\n\n```\n\nè¿™é‡Œçš„ welcome é¡µé¢æ˜¯åœ¨ï¼š**\\resources\\views\\welcome.blade.php**\n\n<!--more--> \n\n2ã€æ‰“å¼€ **\\routes\\web.php**ï¼Œä¿®æ”¹å†…å®¹ä¸ºï¼š\n\n```php\n<?php\n\n// Route::get('/', function () {\n//     return view('welcome');\n// });\n\nRoute::get('/', 'SitesController@index');\n```\n\nåˆ·æ–°é¡µé¢ï¼Œä¸€åˆ‡å¦‚æ•…ã€‚ ","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"laravel å®‰è£…ä¸å¯åŠ¨","url":"/2019/01/19/laravelå®‰è£…ä¸å¯åŠ¨/","content":"\n## 1ã€ä½¿ç”¨ composer å®‰è£… laravel\n\n[https://packagist.org/packages/laravel/laravel](https://packagist.org/packages/laravel/laravel)\n\n```bash\n$ composer create-project laravel/laravel laravel5\n```\n\n&#8195;&#8195;\n\n## 2ã€å¯åŠ¨ laravel\n\n##### æ–¹å¼ä¸€ï¼šphp å†…ç½®æœåŠ¡å™¨\n\næŒ‡å®š public æ–‡ä»¶å¤¹å³å¯\n\n```bash\n$ php -S localhost:8000 -t public\n```\n\n##### æ–¹å¼äºŒï¼šä½¿ç”¨laravelæä¾›çš„å‘½ä»¤è¡Œå·¥å…·artisan\n\n```bash\n$ php artisan serve\n```\n<!--more--> \n![](laravel-start/2.png)\n\né¢„è§ˆ [http://localhost:8000](http://localhost:8000) ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\n\n![](laravel-start/1.png)","tags":["php","laravel"],"categories":["php","laravel"]},{"title":"hexoæ’å…¥æœ¬åœ°å›¾ç‰‡","url":"/2019/01/19/hexoæ’å…¥æœ¬åœ°å›¾ç‰‡/","content":"\nå®‰è£… [hexo-asset-image](https://github.com/CodeFalling/hexo-asset-image)\n\n```bash\n$ cnpm install hexo-asset-image --save\n```\n\n**_config.yml** å¼€å¯ **post_asset_folder: true**\n\n```yaml\npost_asset_folder: true\n```\n\n<!--more--> \n\nå®Œæˆå®‰è£…åç”¨hexoæ–°å»ºæ–‡ç« çš„æ—¶å€™ä¼šå‘ç°_postsç›®å½•ä¸‹é¢ä¼šå¤šå‡ºä¸€ä¸ªå’Œæ–‡ç« åå­—ä¸€æ ·çš„æ–‡ä»¶å¤¹ã€‚\n\n![](hexoæ’å…¥æœ¬åœ°å›¾ç‰‡/3.png)\n\nåªéœ€è¦ä½¿ç”¨è¯¥è¯­å¥å³å¯æ’å…¥å›¾ç‰‡\n\n```\n![](test-img/1.png)\n```","tags":["hexo"],"categories":["hexo"]},{"title":"composerç–‘éš¾æ‚ç—‡","url":"/2019/01/19/composerç–‘éš¾æ‚ç—‡/","content":"\n## The openssl extension is required for SSL/TLS protection\n\n![](composerç–‘éš¾æ‚ç—‡/1.png)\n\nè§£å†³æ–¹æ³•ï¼šåœ¨php.iniæ–‡ä»¶ä¸­æ‰“å¼€php_opensslæ‰©å±• \n\n```\nextension=php_openssl.dll\n```\n\n<!--more--> ","tags":["php","cpmposer"],"categories":["cpmposer"]}]